<!doctype html><html lang=es class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Curso end-to-end para construir un portafolio ML/MLOps profesional desde cero"><meta name=author content=DuqueOM><link href=https://duqueom.github.io/Guia_MLOps/docs/01_PYTHON_MODERNO/ rel=canonical><link href=../PLAN_ESTUDIOS/ rel=prev><link href=../02_DISENO_SISTEMAS/ rel=next><link rel=icon href=../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>01 â€” Python Moderno - GuÃ­a MLOps â€” Portfolio Edition v2</title><link rel=stylesheet href=../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-XXXXXXXXXX"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-XXXXXXXXXX",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=deep-purple> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#01-python-moderno-para-mlops class=md-skip> Saltar a contenido </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Cabecera> <a href=../.. title="GuÃ­a MLOps â€” Portfolio Edition v2" class="md-header__button md-logo" aria-label="GuÃ­a MLOps â€” Portfolio Edition v2" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> GuÃ­a MLOps â€” Portfolio Edition v2 </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> 01 â€” Python Moderno </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=deep-purple aria-label="Cambiar a modo oscuro" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Cambiar a modo oscuro" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=deep-purple aria-label="Cambiar a modo claro" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Cambiar a modo claro" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=BÃºsqueda placeholder=BÃºsqueda autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Buscar> <button type=reset class="md-search__icon md-icon" title=Limpiar aria-label=Limpiar tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Inicializando bÃºsqueda </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/DuqueOM/Guia_MLOps title="Ir al repositorio" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> Guia_MLOps </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=PestaÃ±as data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../ class=md-tabs__link> Inicio </a> </li> <li class=md-tabs__item> <a href=../00_INDICE/ class=md-tabs__link> Ãndice Principal </a> </li> <li class=md-tabs__item> <a href=../SYLLABUS/ class=md-tabs__link> Syllabus </a> </li> <li class=md-tabs__item> <a href=../MAPA_PORTAFOLIO_1TO1/ class=md-tabs__link> Mapa 1:1 Portafolio </a> </li> <li class=md-tabs__item> <a href=../PLAN_ESTUDIOS/ class=md-tabs__link> Plan de Estudios </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=./ class=md-tabs__link> Fase 1 - Fundamentos </a> </li> <li class=md-tabs__item> <a href=../07_SKLEARN_PIPELINES/ class=md-tabs__link> Fase 2 - ML Engineering </a> </li> <li class=md-tabs__item> <a href=../11_TESTING_ML/ class=md-tabs__link> Fase 3 - MLOps Core </a> </li> <li class=md-tabs__item> <a href=../17_DESPLIEGUE/ class=md-tabs__link> Fase 4 - ProducciÃ³n </a> </li> <li class=md-tabs__item> <a href=../19_DOCUMENTACION/ class=md-tabs__link> Fase 5 - Senior/Staff </a> </li> <li class=md-tabs__item> <a href=../apoyo/ class=md-tabs__link> Material de Apoyo </a> </li> <li class=md-tabs__item> <a href=../study_tools/ class=md-tabs__link> Herramientas de Estudio </a> </li> <li class=md-tabs__item> <a href=../../exams/EXAM_01_SETUP/ class=md-tabs__link> ExÃ¡menes </a> </li> <li class=md-tabs__item> <a href=../SIMULACRO_ENTREVISTA_JUNIOR/ class=md-tabs__link> Simulacros de Entrevista </a> </li> <li class=md-tabs__item> <a href=../../notebooks/labs/LAB_01_DOCKER_DEBUG/ class=md-tabs__link> Laboratorios </a> </li> <li class=md-tabs__item> <a href=../templates/ class=md-tabs__link> Plantillas </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=NavegaciÃ³n data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../.. title="GuÃ­a MLOps â€” Portfolio Edition v2" class="md-nav__button md-logo" aria-label="GuÃ­a MLOps â€” Portfolio Edition v2" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> GuÃ­a MLOps â€” Portfolio Edition v2 </label> <div class=md-nav__source> <a href=https://github.com/DuqueOM/Guia_MLOps title="Ir al repositorio" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> Guia_MLOps </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> Inicio </span> </a> </li> <li class=md-nav__item> <a href=../00_INDICE/ class=md-nav__link> <span class=md-ellipsis> Ãndice Principal </span> </a> </li> <li class=md-nav__item> <a href=../SYLLABUS/ class=md-nav__link> <span class=md-ellipsis> Syllabus </span> </a> </li> <li class=md-nav__item> <a href=../MAPA_PORTAFOLIO_1TO1/ class=md-nav__link> <span class=md-ellipsis> Mapa 1:1 Portafolio </span> </a> </li> <li class=md-nav__item> <a href=../PLAN_ESTUDIOS/ class=md-nav__link> <span class=md-ellipsis> Plan de Estudios </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6 checked> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex> <span class=md-ellipsis> Fase 1 - Fundamentos </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=true> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Fase 1 - Fundamentos </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> 01 â€” Python Moderno </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> 01 â€” Python Moderno </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Tabla de contenidos </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#objetivo-del-modulo class=md-nav__link> <span class=md-ellipsis> ğŸ¯ Objetivo del MÃ³dulo </span> </a> </li> <li class=md-nav__item> <a href=#00-prerrequisitos class=md-nav__link> <span class=md-ellipsis> 0.0 Prerrequisitos </span> </a> </li> <li class=md-nav__item> <a href=#01-protocolo-e-como-estudiar-este-modulo class=md-nav__link> <span class=md-ellipsis> 0.1 ğŸ§  Protocolo E: CÃ³mo estudiar este mÃ³dulo </span> </a> </li> <li class=md-nav__item> <a href=#02-entregables-verificables-minimo-viable class=md-nav__link> <span class=md-ellipsis> 0.2 âœ… Entregables verificables (mÃ­nimo viable) </span> </a> </li> <li class=md-nav__item> <a href=#03-puente-teoria-codigo-portafolio class=md-nav__link> <span class=md-ellipsis> 0.3 ğŸ§© Puente teorÃ­a â†” cÃ³digo (Portafolio) </span> </a> </li> <li class=md-nav__item> <a href=#contenido class=md-nav__link> <span class=md-ellipsis> ğŸ“‹ Contenido </span> </a> </li> <li class=md-nav__item> <a href=#04-repaso-fundamentos-de-python-para-mlops class=md-nav__link> <span class=md-ellipsis> 0.4 Repaso: Fundamentos de Python para MLOps </span> </a> <nav class=md-nav aria-label="0.4 Repaso: Fundamentos de Python para MLOps"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#de-notebook-a-codigo-profesional-el-mindset class=md-nav__link> <span class=md-ellipsis> ğŸ¯ De Notebook a CÃ³digo Profesional: El Mindset </span> </a> </li> <li class=md-nav__item> <a href=#funciones-la-unidad-basica-de-codigo-reutilizable class=md-nav__link> <span class=md-ellipsis> Funciones: La Unidad BÃ¡sica de CÃ³digo Reutilizable </span> </a> </li> <li class=md-nav__item> <a href=#clases-agrupando-datos-y-comportamiento class=md-nav__link> <span class=md-ellipsis> Clases: Agrupando Datos y Comportamiento </span> </a> </li> <li class=md-nav__item> <a href=#modulos-organizando-codigo-en-archivos class=md-nav__link> <span class=md-ellipsis> MÃ³dulos: Organizando CÃ³digo en Archivos </span> </a> </li> <li class=md-nav__item> <a href=#decoradores-funciones-que-modifican-funciones class=md-nav__link> <span class=md-ellipsis> Decoradores: Funciones que Modifican Funciones </span> </a> </li> <li class=md-nav__item> <a href=#context-managers-recursos-que-se-limpian-solos class=md-nav__link> <span class=md-ellipsis> Context Managers: Recursos que se Limpian Solos </span> </a> </li> <li class=md-nav__item> <a href=#comprehensions-codigo-conciso-y-pythonico class=md-nav__link> <span class=md-ellipsis> Comprehensions: CÃ³digo Conciso y PythÃ³nico </span> </a> </li> <li class=md-nav__item> <a href=#manejo-de-excepciones-codigo-que-no-se-rompe class=md-nav__link> <span class=md-ellipsis> Manejo de Excepciones: CÃ³digo que No se Rompe </span> </a> </li> <li class=md-nav__item> <a href=#ejercicio-de-auto-evaluacion-estas-listo class=md-nav__link> <span class=md-ellipsis> ğŸ¯ Ejercicio de Auto-evaluaciÃ³n: Â¿EstÃ¡s Listo? </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#11-type-hints-tu-contrato-con-el-futuro class=md-nav__link> <span class=md-ellipsis> 1.1 Type Hints: Tu Contrato con el Futuro </span> </a> <nav class=md-nav aria-label="1.1 Type Hints: Tu Contrato con el Futuro"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#la-analogia-del-restaurante class=md-nav__link> <span class=md-ellipsis> La AnalogÃ­a del Restaurante </span> </a> </li> <li class=md-nav__item> <a href=#codigo-real-del-portafolio-sin-tipos-vs-con-tipos class=md-nav__link> <span class=md-ellipsis> CÃ³digo Real del Portafolio: Sin Tipos vs Con Tipos </span> </a> </li> <li class=md-nav__item> <a href=#los-tipos-esenciales-para-ml class=md-nav__link> <span class=md-ellipsis> Los Tipos Esenciales para ML </span> </a> </li> <li class=md-nav__item> <a href=#configurar-mypy class=md-nav__link> <span class=md-ellipsis> Configurar mypy </span> </a> </li> <li class=md-nav__item> <a href=#mapa-mental-de-conceptos-type-hints class=md-nav__link> <span class=md-ellipsis> ğŸ§  Mapa Mental de Conceptos: Type Hints </span> </a> </li> <li class=md-nav__item> <a href=#ejercicio-puente-type-hints-basicos class=md-nav__link> <span class=md-ellipsis> ğŸ’» Ejercicio Puente: Type Hints BÃ¡sicos </span> </a> </li> <li class=md-nav__item> <a href=#practica-del-portafolio-type-hints-en-bankchurn class=md-nav__link> <span class=md-ellipsis> ğŸ› ï¸ PrÃ¡ctica del Portafolio: Type Hints en BankChurn </span> </a> </li> <li class=md-nav__item> <a href=#checkpoint-de-conocimiento-type-hints class=md-nav__link> <span class=md-ellipsis> âœ… Checkpoint de Conocimiento: Type Hints </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#12-pydantic-validacion-automatica class=md-nav__link> <span class=md-ellipsis> 1.2 Pydantic: ValidaciÃ³n AutomÃ¡tica </span> </a> <nav class=md-nav aria-label="1.2 Pydantic: ValidaciÃ³n AutomÃ¡tica"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#explicacion-teorica-el-guardia-de-seguridad class=md-nav__link> <span class=md-ellipsis> ğŸ“ ExplicaciÃ³n TeÃ³rica: El Guardia de Seguridad </span> </a> </li> <li class=md-nav__item> <a href=#codigo-real-bankchurn-config-nivel-staff class=md-nav__link> <span class=md-ellipsis> CÃ³digo Real: BankChurn Config (Nivel Staff) </span> </a> </li> <li class=md-nav__item> <a href=#el-yaml-correspondiente class=md-nav__link> <span class=md-ellipsis> El YAML Correspondiente </span> </a> </li> <li class=md-nav__item> <a href=#ejemplo-de-error-de-validacion class=md-nav__link> <span class=md-ellipsis> Ejemplo de Error de ValidaciÃ³n </span> </a> </li> <li class=md-nav__item> <a href=#mapa-mental-de-conceptos-pydantic class=md-nav__link> <span class=md-ellipsis> ğŸ§  Mapa Mental de Conceptos: Pydantic </span> </a> </li> <li class=md-nav__item> <a href=#ejercicio-puente-validacion-con-pydantic class=md-nav__link> <span class=md-ellipsis> ğŸ’» Ejercicio Puente: ValidaciÃ³n con Pydantic </span> </a> </li> <li class=md-nav__item> <a href=#practica-del-portafolio-config-pydantic-en-bankchurn class=md-nav__link> <span class=md-ellipsis> ğŸ› ï¸ PrÃ¡ctica del Portafolio: Config Pydantic en BankChurn </span> </a> </li> <li class=md-nav__item> <a href=#checkpoint-de-conocimiento-pydantic class=md-nav__link> <span class=md-ellipsis> âœ… Checkpoint de Conocimiento: Pydantic </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#13-src-layout-estructura-profesional class=md-nav__link> <span class=md-ellipsis> 1.3 src/ Layout: Estructura Profesional </span> </a> <nav class=md-nav aria-label="1.3 src/ Layout: Estructura Profesional"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#explicacion-teorica-la-casa-organizada class=md-nav__link> <span class=md-ellipsis> ğŸ“ ExplicaciÃ³n TeÃ³rica: La Casa Organizada </span> </a> </li> <li class=md-nav__item> <a href=#estructura-del-portafolio class=md-nav__link> <span class=md-ellipsis> Estructura del Portafolio </span> </a> </li> <li class=md-nav__item> <a href=#por-que-src-y-no-codigo-en-la-raiz class=md-nav__link> <span class=md-ellipsis> Â¿Por quÃ© src/ y no cÃ³digo en la raÃ­z? </span> </a> </li> <li class=md-nav__item> <a href=#pyprojecttoml-el-corazon-del-proyecto class=md-nav__link> <span class=md-ellipsis> pyproject.toml: El CorazÃ³n del Proyecto </span> </a> </li> <li class=md-nav__item> <a href=#instalacion-en-modo-editable class=md-nav__link> <span class=md-ellipsis> InstalaciÃ³n en Modo Editable </span> </a> </li> <li class=md-nav__item> <a href=#mapa-mental-de-conceptos-src-layout class=md-nav__link> <span class=md-ellipsis> ğŸ§  Mapa Mental de Conceptos: src/ Layout </span> </a> </li> <li class=md-nav__item> <a href=#ejercicio-puente-crear-estructura-basica class=md-nav__link> <span class=md-ellipsis> ğŸ’» Ejercicio Puente: Crear Estructura BÃ¡sica </span> </a> </li> <li class=md-nav__item> <a href=#practica-del-portafolio-estructura-de-bankchurn class=md-nav__link> <span class=md-ellipsis> ğŸ› ï¸ PrÃ¡ctica del Portafolio: Estructura de BankChurn </span> </a> </li> <li class=md-nav__item> <a href=#checkpoint-de-conocimiento-src-layout class=md-nav__link> <span class=md-ellipsis> âœ… Checkpoint de Conocimiento: src/ Layout </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#14-principios-solid-para-ml class=md-nav__link> <span class=md-ellipsis> 1.4 Principios SOLID para ML </span> </a> <nav class=md-nav aria-label="1.4 Principios SOLID para ML"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#explicacion-teorica-un-modulo-una-tarea class=md-nav__link> <span class=md-ellipsis> ğŸ“ ExplicaciÃ³n TeÃ³rica: Un MÃ³dulo, Una Tarea </span> </a> </li> <li class=md-nav__item> <a href=#codigo-real-del-portafolio class=md-nav__link> <span class=md-ellipsis> CÃ³digo Real del Portafolio </span> </a> </li> <li class=md-nav__item> <a href=#mapa-mental-de-conceptos-solid class=md-nav__link> <span class=md-ellipsis> ğŸ§  Mapa Mental de Conceptos: SOLID </span> </a> </li> <li class=md-nav__item> <a href=#ejercicio-puente-aplicar-single-responsibility class=md-nav__link> <span class=md-ellipsis> ğŸ’» Ejercicio Puente: Aplicar Single Responsibility </span> </a> </li> <li class=md-nav__item> <a href=#practica-del-portafolio-solid-en-bankchurn class=md-nav__link> <span class=md-ellipsis> ğŸ› ï¸ PrÃ¡ctica del Portafolio: SOLID en BankChurn </span> </a> </li> <li class=md-nav__item> <a href=#checkpoint-de-conocimiento-solid class=md-nav__link> <span class=md-ellipsis> âœ… Checkpoint de Conocimiento: SOLID </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#15-oop-para-ml-protocolos-y-clases-abstractas class=md-nav__link> <span class=md-ellipsis> 1.5 OOP para ML: Protocolos y Clases Abstractas </span> </a> <nav class=md-nav aria-label="1.5 OOP para ML: Protocolos y Clases Abstractas"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#el-problema-codigo-no-intercambiable class=md-nav__link> <span class=md-ellipsis> El Problema: CÃ³digo No Intercambiable </span> </a> </li> <li class=md-nav__item> <a href=#la-solucion-protocol-y-abc class=md-nav__link> <span class=md-ellipsis> La SoluciÃ³n: Protocol y ABC </span> </a> </li> <li class=md-nav__item> <a href=#mapa-mental-de-conceptos-oop-para-ml class=md-nav__link> <span class=md-ellipsis> ğŸ§  Mapa Mental de Conceptos: OOP para ML </span> </a> </li> <li class=md-nav__item> <a href=#ejercicio-puente-crear-clase-abstracta class=md-nav__link> <span class=md-ellipsis> ğŸ’» Ejercicio Puente: Crear Clase Abstracta </span> </a> </li> <li class=md-nav__item> <a href=#practica-del-portafolio-basetrainer-compartido class=md-nav__link> <span class=md-ellipsis> ğŸ› ï¸ PrÃ¡ctica del Portafolio: BaseTrainer Compartido </span> </a> </li> <li class=md-nav__item> <a href=#checkpoint-de-conocimiento-oop-para-ml class=md-nav__link> <span class=md-ellipsis> âœ… Checkpoint de Conocimiento: OOP para ML </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#16-pandera-validacion-de-dataframes class=md-nav__link> <span class=md-ellipsis> 1.6 Pandera: ValidaciÃ³n de DataFrames </span> </a> <nav class=md-nav aria-label="1.6 Pandera: ValidaciÃ³n de DataFrames"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#el-problema-dataframes-que-mienten class=md-nav__link> <span class=md-ellipsis> El Problema: DataFrames que Mienten </span> </a> </li> <li class=md-nav__item> <a href=#la-solucion-pandera-schema class=md-nav__link> <span class=md-ellipsis> La SoluciÃ³n: Pandera Schema </span> </a> </li> <li class=md-nav__item> <a href=#schemas-del-portafolio class=md-nav__link> <span class=md-ellipsis> Schemas del Portafolio </span> </a> </li> <li class=md-nav__item> <a href=#mapa-mental-de-conceptos-pandera class=md-nav__link> <span class=md-ellipsis> ğŸ§  Mapa Mental de Conceptos: Pandera </span> </a> </li> <li class=md-nav__item> <a href=#ejercicio-puente-validacion-basica-con-pandera class=md-nav__link> <span class=md-ellipsis> ï¿½ï¿½ Ejercicio Puente: ValidaciÃ³n BÃ¡sica con Pandera </span> </a> </li> <li class=md-nav__item> <a href=#practica-del-portafolio-pandera-en-bankchurn class=md-nav__link> <span class=md-ellipsis> ğŸ› ï¸ PrÃ¡ctica del Portafolio: Pandera en BankChurn </span> </a> </li> <li class=md-nav__item> <a href=#checkpoint-de-conocimiento-pandera class=md-nav__link> <span class=md-ellipsis> âœ… Checkpoint de Conocimiento: Pandera </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#17-ejercicios-practicos class=md-nav__link> <span class=md-ellipsis> 1.7 Ejercicios PrÃ¡cticos </span> </a> <nav class=md-nav aria-label="1.7 Ejercicios PrÃ¡cticos"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#ejercicio-1-anadir-type-hints class=md-nav__link> <span class=md-ellipsis> Ejercicio 1: AÃ±adir Type Hints </span> </a> </li> <li class=md-nav__item> <a href=#ejercicio-2-crear-config-con-pydantic class=md-nav__link> <span class=md-ellipsis> Ejercicio 2: Crear Config con Pydantic </span> </a> </li> <li class=md-nav__item> <a href=#ejercicio-3-convertir-a-src-layout class=md-nav__link> <span class=md-ellipsis> Ejercicio 3: Convertir a src/ Layout </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#errores-habituales-y-como-depurarlos class=md-nav__link> <span class=md-ellipsis> ğŸ§¨ Errores habituales y cÃ³mo depurarlos </span> </a> <nav class=md-nav aria-label="ğŸ§¨ Errores habituales y cÃ³mo depurarlos"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-type-hints-mypy-errores-ruidosos-en-pandassklearn class=md-nav__link> <span class=md-ellipsis> 1) Type hints + mypy: errores ruidosos en pandas/sklearn </span> </a> </li> <li class=md-nav__item> <a href=#2-pydantic-validationerror-por-config-mal-definida class=md-nav__link> <span class=md-ellipsis> 2) Pydantic: ValidationError por config mal definida </span> </a> </li> <li class=md-nav__item> <a href=#3-src-layout-e-imports-modulenotfounderror-en-ci-pero-no-en-tu-maquina class=md-nav__link> <span class=md-ellipsis> 3) src/ layout e imports: ModuleNotFoundError en CI pero no en tu mÃ¡quina </span> </a> </li> <li class=md-nav__item> <a href=#4-patron-general-de-debugging-para-este-modulo class=md-nav__link> <span class=md-ellipsis> 4) PatrÃ³n general de debugging para este mÃ³dulo </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#checkpoint-completaste-el-modulo class=md-nav__link> <span class=md-ellipsis> âœ… Checkpoint: Â¿Completaste el MÃ³dulo? </span> </a> </li> <li class=md-nav__item> <a href=#adr-por-que-estas-decisiones class=md-nav__link> <span class=md-ellipsis> ğŸ”— ADR: Â¿Por QuÃ© Estas Decisiones? </span> </a> <nav class=md-nav aria-label="ğŸ”— ADR: Â¿Por QuÃ© Estas Decisiones?"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#adr-001-type-hints-obligatorios class=md-nav__link> <span class=md-ellipsis> ADR-001: Type Hints Obligatorios </span> </a> </li> <li class=md-nav__item> <a href=#adr-002-pydantic-para-configuracion class=md-nav__link> <span class=md-ellipsis> ADR-002: Pydantic para ConfiguraciÃ³n </span> </a> </li> <li class=md-nav__item> <a href=#adr-003-src-layout class=md-nav__link> <span class=md-ellipsis> ADR-003: src/ Layout </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#como-se-uso-en-el-portafolio class=md-nav__link> <span class=md-ellipsis> ğŸ“¦ CÃ³mo se UsÃ³ en el Portafolio </span> </a> <nav class=md-nav aria-label="ğŸ“¦ CÃ³mo se UsÃ³ en el Portafolio"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#type-hints-en-el-portafolio class=md-nav__link> <span class=md-ellipsis> Type Hints en el Portafolio </span> </a> </li> <li class=md-nav__item> <a href=#pydantic-en-el-portafolio class=md-nav__link> <span class=md-ellipsis> Pydantic en el Portafolio </span> </a> </li> <li class=md-nav__item> <a href=#src-layout-en-el-portafolio class=md-nav__link> <span class=md-ellipsis> src/ Layout en el Portafolio </span> </a> </li> <li class=md-nav__item> <a href=#ejercicio-verifica-en-el-repo-real class=md-nav__link> <span class=md-ellipsis> ğŸ”§ Ejercicio: Verifica en el Repo Real </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#consejos-profesionales class=md-nav__link> <span class=md-ellipsis> ğŸ’¼ Consejos Profesionales </span> </a> <nav class=md-nav aria-label="ğŸ’¼ Consejos Profesionales"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#para-entrevistas class=md-nav__link> <span class=md-ellipsis> Para Entrevistas </span> </a> </li> <li class=md-nav__item> <a href=#para-proyectos-reales class=md-nav__link> <span class=md-ellipsis> Para Proyectos Reales </span> </a> </li> <li class=md-nav__item> <a href=#anti-patrones-a-evitar class=md-nav__link> <span class=md-ellipsis> Anti-patrones a Evitar </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#recursos-externos-del-modulo class=md-nav__link> <span class=md-ellipsis> ğŸ“º Recursos Externos del MÃ³dulo </span> </a> <nav class=md-nav aria-label="ğŸ“º Recursos Externos del MÃ³dulo"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#videos class=md-nav__link> <span class=md-ellipsis> ğŸ¬ Videos </span> </a> </li> <li class=md-nav__item> <a href=#cursos class=md-nav__link> <span class=md-ellipsis> ğŸ“š Cursos </span> </a> </li> <li class=md-nav__item> <a href=#documentacion class=md-nav__link> <span class=md-ellipsis> ğŸ“„ DocumentaciÃ³n </span> </a> </li> <li class=md-nav__item> <a href=#cuando-consultar class=md-nav__link> <span class=md-ellipsis> ğŸ’¡ CuÃ¡ndo Consultar </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#decisiones-tecnicas-adrs class=md-nav__link> <span class=md-ellipsis> âš–ï¸ Decisiones TÃ©cnicas (ADRs) </span> </a> <nav class=md-nav aria-label="âš–ï¸ Decisiones TÃ©cnicas (ADRs)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#adr-001-python-311 class=md-nav__link> <span class=md-ellipsis> ADR-001: Python 3.11+ </span> </a> </li> <li class=md-nav__item> <a href=#adr-003-pydantic-v2-para-configuracion class=md-nav__link> <span class=md-ellipsis> ADR-003: Pydantic v2 para ConfiguraciÃ³n </span> </a> </li> <li class=md-nav__item> <a href=#adr-013-ruff-para-linting class=md-nav__link> <span class=md-ellipsis> ADR-013: Ruff para Linting </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#ejercicios-del-modulo class=md-nav__link> <span class=md-ellipsis> ğŸ”§ Ejercicios del MÃ³dulo </span> </a> <nav class=md-nav aria-label="ğŸ”§ Ejercicios del MÃ³dulo"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#ejercicio-11-type-hints class=md-nav__link> <span class=md-ellipsis> Ejercicio 1.1: Type Hints </span> </a> </li> <li class=md-nav__item> <a href=#ejercicio-12-pydantic-config class=md-nav__link> <span class=md-ellipsis> Ejercicio 1.2: Pydantic Config </span> </a> </li> <li class=md-nav__item> <a href=#ejercicio-13-src-layout class=md-nav__link> <span class=md-ellipsis> Ejercicio 1.3: src/ Layout </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#glosario-del-modulo class=md-nav__link> <span class=md-ellipsis> ğŸ”— Glosario del MÃ³dulo </span> </a> </li> <li class=md-nav__item> <a href=#la-trampa-errores-comunes-de-este-modulo class=md-nav__link> <span class=md-ellipsis> ğŸª¤ La Trampa â€” Errores Comunes de Este MÃ³dulo </span> </a> <nav class=md-nav aria-label="ğŸª¤ La Trampa â€” Errores Comunes de Este MÃ³dulo"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#trampa-1-type-hints-que-no-se-verifican class=md-nav__link> <span class=md-ellipsis> Trampa 1: Type Hints que no se verifican </span> </a> </li> <li class=md-nav__item> <a href=#trampa-2-pydantic-con-valores-mutables-por-defecto class=md-nav__link> <span class=md-ellipsis> Trampa 2: Pydantic con valores mutables por defecto </span> </a> </li> <li class=md-nav__item> <a href=#trampa-3-validacion-pydantic-silenciosa-con-coercion class=md-nav__link> <span class=md-ellipsis> Trampa 3: ValidaciÃ³n Pydantic silenciosa con coerciÃ³n </span> </a> </li> <li class=md-nav__item> <a href=#trampa-4-abc-sin-abstractmethod-no-obliga-implementacion class=md-nav__link> <span class=md-ellipsis> Trampa 4: ABC sin @abstractmethod no obliga implementaciÃ³n </span> </a> </li> <li class=md-nav__item> <a href=#trampa-5-settingwithcopywarning-ignorada class=md-nav__link> <span class=md-ellipsis> Trampa 5: SettingWithCopyWarning ignorada </span> </a> </li> <li class=md-nav__item> <a href=#trampa-6-pandera-schema-muy-permisivo class=md-nav__link> <span class=md-ellipsis> Trampa 6: Pandera schema muy permisivo </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#quiz-del-modulo-semanas-1-3 class=md-nav__link> <span class=md-ellipsis> ğŸ“ Quiz del MÃ³dulo â€” Semanas 1-3 </span> </a> <nav class=md-nav aria-label="ğŸ“ Quiz del MÃ³dulo â€” Semanas 1-3"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#quiz-semana-1-type-hints-pydantic class=md-nav__link> <span class=md-ellipsis> Quiz Semana 1: Type Hints + Pydantic </span> </a> </li> <li class=md-nav__item> <a href=#quiz-semana-2-oop-y-protocolos class=md-nav__link> <span class=md-ellipsis> Quiz Semana 2: OOP y Protocolos </span> </a> </li> <li class=md-nav__item> <a href=#quiz-semana-3-pandas-de-produccion-pandera class=md-nav__link> <span class=md-ellipsis> Quiz Semana 3: Pandas de ProducciÃ³n + Pandera </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../02_DISENO_SISTEMAS/ class=md-nav__link> <span class=md-ellipsis> 02 â€” DiseÃ±o de Sistemas </span> </a> </li> <li class=md-nav__item> <a href=../03_ESTRUCTURA_PROYECTO/ class=md-nav__link> <span class=md-ellipsis> 03 â€” Estructura de Proyecto </span> </a> </li> <li class=md-nav__item> <a href=../04_ENTORNOS/ class=md-nav__link> <span class=md-ellipsis> 04 â€” Entornos </span> </a> </li> <li class=md-nav__item> <a href=../05_GIT_PROFESIONAL/ class=md-nav__link> <span class=md-ellipsis> 05 â€” Git Profesional </span> </a> </li> <li class=md-nav__item> <a href=../06_VERSIONADO_DATOS/ class=md-nav__link> <span class=md-ellipsis> 06 â€” Versionado de Datos </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex=0> <span class=md-ellipsis> Fase 2 - ML Engineering </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Fase 2 - ML Engineering </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../07_SKLEARN_PIPELINES/ class=md-nav__link> <span class=md-ellipsis> 07 â€” sklearn Pipelines </span> </a> </li> <li class=md-nav__item> <a href=../08_INGENIERIA_FEATURES/ class=md-nav__link> <span class=md-ellipsis> 08 â€” IngenierÃ­a de Features </span> </a> </li> <li class=md-nav__item> <a href=../09_TRAINING_PROFESIONAL/ class=md-nav__link> <span class=md-ellipsis> 09 â€” Training Profesional </span> </a> </li> <li class=md-nav__item> <a href=../10_EXPERIMENT_TRACKING/ class=md-nav__link> <span class=md-ellipsis> 10 â€” Experiment Tracking </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_8> <label class=md-nav__link for=__nav_8 id=__nav_8_label tabindex=0> <span class=md-ellipsis> Fase 3 - MLOps Core </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_8_label aria-expanded=false> <label class=md-nav__title for=__nav_8> <span class="md-nav__icon md-icon"></span> Fase 3 - MLOps Core </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../11_TESTING_ML/ class=md-nav__link> <span class=md-ellipsis> 11 â€” Testing ML </span> </a> </li> <li class=md-nav__item> <a href=../12_CI_CD/ class=md-nav__link> <span class=md-ellipsis> 12 â€” CI/CD </span> </a> </li> <li class=md-nav__item> <a href=../13_DOCKER/ class=md-nav__link> <span class=md-ellipsis> 13 â€” Docker </span> </a> </li> <li class=md-nav__item> <a href=../14_FASTAPI/ class=md-nav__link> <span class=md-ellipsis> 14 â€” FastAPI </span> </a> </li> <li class=md-nav__item> <a href=../15_STREAMLIT/ class=md-nav__link> <span class=md-ellipsis> 15 â€” Streamlit </span> </a> </li> <li class=md-nav__item> <a href=../16_OBSERVABILIDAD/ class=md-nav__link> <span class=md-ellipsis> 16 â€” Observabilidad </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_9> <label class=md-nav__link for=__nav_9 id=__nav_9_label tabindex=0> <span class=md-ellipsis> Fase 4 - ProducciÃ³n </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_9_label aria-expanded=false> <label class=md-nav__title for=__nav_9> <span class="md-nav__icon md-icon"></span> Fase 4 - ProducciÃ³n </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../17_DESPLIEGUE/ class=md-nav__link> <span class=md-ellipsis> 17 â€” Despliegue </span> </a> </li> <li class=md-nav__item> <a href=../18_INFRAESTRUCTURA/ class=md-nav__link> <span class=md-ellipsis> 18 â€” Infraestructura </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_10> <label class=md-nav__link for=__nav_10 id=__nav_10_label tabindex=0> <span class=md-ellipsis> Fase 5 - Senior/Staff </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_10_label aria-expanded=false> <label class=md-nav__title for=__nav_10> <span class="md-nav__icon md-icon"></span> Fase 5 - Senior/Staff </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../19_DOCUMENTACION/ class=md-nav__link> <span class=md-ellipsis> 19 â€” DocumentaciÃ³n </span> </a> </li> <li class=md-nav__item> <a href=../20_OBSERVABILIDAD_AVANZADA_DRIFT/ class=md-nav__link> <span class=md-ellipsis> 20 â€” Observabilidad Avanzada </span> </a> </li> <li class=md-nav__item> <a href=../21_CLOUD_FINOPS/ class=md-nav__link> <span class=md-ellipsis> 21 â€” Cloud FinOps </span> </a> </li> <li class=md-nav__item> <a href=../22_IAC_EMPRESARIAL/ class=md-nav__link> <span class=md-ellipsis> 22 â€” IaC Empresarial </span> </a> </li> <li class=md-nav__item> <a href=../23_PROYECTO_INTEGRADOR/ class=md-nav__link> <span class=md-ellipsis> 23 â€” Proyecto Integrador </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_11> <label class=md-nav__link for=__nav_11 id=__nav_11_label tabindex=0> <span class=md-ellipsis> Material de Apoyo </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_11_label aria-expanded=false> <label class=md-nav__title for=__nav_11> <span class="md-nav__icon md-icon"></span> Material de Apoyo </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../apoyo/ class=md-nav__link> <span class=md-ellipsis> Ãndice Apoyo </span> </a> </li> <li class=md-nav__item> <a href=../apoyo/GLOSARIO/ class=md-nav__link> <span class=md-ellipsis> Glosario MLOps </span> </a> </li> <li class=md-nav__item> <a href=../apoyo/CHECKLIST/ class=md-nav__link> <span class=md-ellipsis> Checklist Profesional </span> </a> </li> <li class=md-nav__item> <a href=../apoyo/RECURSOS/ class=md-nav__link> <span class=md-ellipsis> Recursos Externos </span> </a> </li> <li class=md-nav__item> <a href=../apoyo/RUBRICA_EVALUACION/ class=md-nav__link> <span class=md-ellipsis> RÃºbrica de EvaluaciÃ³n </span> </a> </li> <li class=md-nav__item> <a href=../apoyo/PLANTILLAS/ class=md-nav__link> <span class=md-ellipsis> Plantillas </span> </a> </li> <li class=md-nav__item> <a href=../apoyo/GUIA_AUDIOVISUAL/ class=md-nav__link> <span class=md-ellipsis> GuÃ­a Audiovisual </span> </a> </li> <li class=md-nav__item> <a href=../apoyo/MAINTENANCE_GUIDE/ class=md-nav__link> <span class=md-ellipsis> GuÃ­a de Mantenimiento </span> </a> </li> <li class=md-nav__item> <a href=../apoyo/GUIA_SCRIPTS_OPERACIONALES/ class=md-nav__link> <span class=md-ellipsis> Scripts Operacionales </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_12> <label class=md-nav__link for=__nav_12 id=__nav_12_label tabindex=0> <span class=md-ellipsis> Herramientas de Estudio </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_12_label aria-expanded=false> <label class=md-nav__title for=__nav_12> <span class="md-nav__icon md-icon"></span> Herramientas de Estudio </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../study_tools/ class=md-nav__link> <span class=md-ellipsis> Ãndice </span> </a> </li> <li class=md-nav__item> <a href=../study_tools/PROTOCOLO_E/ class=md-nav__link> <span class=md-ellipsis> Protocolo E </span> </a> </li> <li class=md-nav__item> <a href=../study_tools/DIARIO_ERRORES/ class=md-nav__link> <span class=md-ellipsis> Diario de Errores </span> </a> </li> <li class=md-nav__item> <a href=../study_tools/CIERRE_SEMANAL/ class=md-nav__link> <span class=md-ellipsis> Cierre Semanal </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_13> <label class=md-nav__link for=__nav_13 id=__nav_13_label tabindex=0> <span class=md-ellipsis> ExÃ¡menes </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_13_label aria-expanded=false> <label class=md-nav__title for=__nav_13> <span class="md-nav__icon md-icon"></span> ExÃ¡menes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../exams/EXAM_01_SETUP/ class=md-nav__link> <span class=md-ellipsis> Exam 01 â€” Setup </span> </a> </li> <li class=md-nav__item> <a href=../../exams/EXAM_02_PIPELINE/ class=md-nav__link> <span class=md-ellipsis> Exam 02 â€” Pipeline </span> </a> </li> <li class=md-nav__item> <a href=../../exams/EXAM_03_TESTING/ class=md-nav__link> <span class=md-ellipsis> Exam 03 â€” Testing </span> </a> </li> <li class=md-nav__item> <a href=../../exams/EXAM_04_DEPLOYMENT/ class=md-nav__link> <span class=md-ellipsis> Exam 04 â€” Deployment </span> </a> </li> <li class=md-nav__item> <a href=../../exams/EXAM_05_PRODUCTION/ class=md-nav__link> <span class=md-ellipsis> Exam 05 â€” Production </span> </a> </li> <li class=md-nav__item> <a href=../../exams/EXAM_06_INTEGRATION/ class=md-nav__link> <span class=md-ellipsis> Exam 06 â€” Integration </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_14> <label class=md-nav__link for=__nav_14 id=__nav_14_label tabindex=0> <span class=md-ellipsis> Simulacros de Entrevista </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_14_label aria-expanded=false> <label class=md-nav__title for=__nav_14> <span class="md-nav__icon md-icon"></span> Simulacros de Entrevista </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../SIMULACRO_ENTREVISTA_JUNIOR/ class=md-nav__link> <span class=md-ellipsis> Junior </span> </a> </li> <li class=md-nav__item> <a href=../SIMULACRO_ENTREVISTA_MID/ class=md-nav__link> <span class=md-ellipsis> Mid </span> </a> </li> <li class=md-nav__item> <a href=../SIMULACRO_ENTREVISTA_SENIOR_PARTE1/ class=md-nav__link> <span class=md-ellipsis> Senior Parte 1 </span> </a> </li> <li class=md-nav__item> <a href=../SIMULACRO_ENTREVISTA_SENIOR_PARTE2/ class=md-nav__link> <span class=md-ellipsis> Senior Parte 2 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_15> <label class=md-nav__link for=__nav_15 id=__nav_15_label tabindex=0> <span class=md-ellipsis> Laboratorios </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_15_label aria-expanded=false> <label class=md-nav__title for=__nav_15> <span class="md-nav__icon md-icon"></span> Laboratorios </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../notebooks/labs/LAB_01_DOCKER_DEBUG/ class=md-nav__link> <span class=md-ellipsis> LAB 01 â€” Docker Debug </span> </a> </li> <li class=md-nav__item> <a href=../../notebooks/labs/LAB_02_PANDAS_PERFORMANCE/ class=md-nav__link> <span class=md-ellipsis> LAB 02 â€” Pandas Performance </span> </a> </li> <li class=md-nav__item> <a href=../../notebooks/labs/LAB_03_DEPENDENCY_CONFLICTS/ class=md-nav__link> <span class=md-ellipsis> LAB 03 â€” Dependency Conflicts </span> </a> </li> <li class=md-nav__item> <a href=../../notebooks/07_08_sklearn_pipelines/ class=md-nav__link> <span class=md-ellipsis> ğŸ”§ Notebook Interactivo: sklearn Pipelines y Feature Engineering </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_16> <label class=md-nav__link for=__nav_16 id=__nav_16_label tabindex=0> <span class=md-ellipsis> Plantillas </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_16_label aria-expanded=false> <label class=md-nav__title for=__nav_16> <span class="md-nav__icon md-icon"></span> Plantillas </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../templates/ class=md-nav__link> <span class=md-ellipsis> Ãndice Plantillas </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Tabla de contenidos"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Tabla de contenidos </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#objetivo-del-modulo class=md-nav__link> <span class=md-ellipsis> ğŸ¯ Objetivo del MÃ³dulo </span> </a> </li> <li class=md-nav__item> <a href=#00-prerrequisitos class=md-nav__link> <span class=md-ellipsis> 0.0 Prerrequisitos </span> </a> </li> <li class=md-nav__item> <a href=#01-protocolo-e-como-estudiar-este-modulo class=md-nav__link> <span class=md-ellipsis> 0.1 ğŸ§  Protocolo E: CÃ³mo estudiar este mÃ³dulo </span> </a> </li> <li class=md-nav__item> <a href=#02-entregables-verificables-minimo-viable class=md-nav__link> <span class=md-ellipsis> 0.2 âœ… Entregables verificables (mÃ­nimo viable) </span> </a> </li> <li class=md-nav__item> <a href=#03-puente-teoria-codigo-portafolio class=md-nav__link> <span class=md-ellipsis> 0.3 ğŸ§© Puente teorÃ­a â†” cÃ³digo (Portafolio) </span> </a> </li> <li class=md-nav__item> <a href=#contenido class=md-nav__link> <span class=md-ellipsis> ğŸ“‹ Contenido </span> </a> </li> <li class=md-nav__item> <a href=#04-repaso-fundamentos-de-python-para-mlops class=md-nav__link> <span class=md-ellipsis> 0.4 Repaso: Fundamentos de Python para MLOps </span> </a> <nav class=md-nav aria-label="0.4 Repaso: Fundamentos de Python para MLOps"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#de-notebook-a-codigo-profesional-el-mindset class=md-nav__link> <span class=md-ellipsis> ğŸ¯ De Notebook a CÃ³digo Profesional: El Mindset </span> </a> </li> <li class=md-nav__item> <a href=#funciones-la-unidad-basica-de-codigo-reutilizable class=md-nav__link> <span class=md-ellipsis> Funciones: La Unidad BÃ¡sica de CÃ³digo Reutilizable </span> </a> </li> <li class=md-nav__item> <a href=#clases-agrupando-datos-y-comportamiento class=md-nav__link> <span class=md-ellipsis> Clases: Agrupando Datos y Comportamiento </span> </a> </li> <li class=md-nav__item> <a href=#modulos-organizando-codigo-en-archivos class=md-nav__link> <span class=md-ellipsis> MÃ³dulos: Organizando CÃ³digo en Archivos </span> </a> </li> <li class=md-nav__item> <a href=#decoradores-funciones-que-modifican-funciones class=md-nav__link> <span class=md-ellipsis> Decoradores: Funciones que Modifican Funciones </span> </a> </li> <li class=md-nav__item> <a href=#context-managers-recursos-que-se-limpian-solos class=md-nav__link> <span class=md-ellipsis> Context Managers: Recursos que se Limpian Solos </span> </a> </li> <li class=md-nav__item> <a href=#comprehensions-codigo-conciso-y-pythonico class=md-nav__link> <span class=md-ellipsis> Comprehensions: CÃ³digo Conciso y PythÃ³nico </span> </a> </li> <li class=md-nav__item> <a href=#manejo-de-excepciones-codigo-que-no-se-rompe class=md-nav__link> <span class=md-ellipsis> Manejo de Excepciones: CÃ³digo que No se Rompe </span> </a> </li> <li class=md-nav__item> <a href=#ejercicio-de-auto-evaluacion-estas-listo class=md-nav__link> <span class=md-ellipsis> ğŸ¯ Ejercicio de Auto-evaluaciÃ³n: Â¿EstÃ¡s Listo? </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#11-type-hints-tu-contrato-con-el-futuro class=md-nav__link> <span class=md-ellipsis> 1.1 Type Hints: Tu Contrato con el Futuro </span> </a> <nav class=md-nav aria-label="1.1 Type Hints: Tu Contrato con el Futuro"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#la-analogia-del-restaurante class=md-nav__link> <span class=md-ellipsis> La AnalogÃ­a del Restaurante </span> </a> </li> <li class=md-nav__item> <a href=#codigo-real-del-portafolio-sin-tipos-vs-con-tipos class=md-nav__link> <span class=md-ellipsis> CÃ³digo Real del Portafolio: Sin Tipos vs Con Tipos </span> </a> </li> <li class=md-nav__item> <a href=#los-tipos-esenciales-para-ml class=md-nav__link> <span class=md-ellipsis> Los Tipos Esenciales para ML </span> </a> </li> <li class=md-nav__item> <a href=#configurar-mypy class=md-nav__link> <span class=md-ellipsis> Configurar mypy </span> </a> </li> <li class=md-nav__item> <a href=#mapa-mental-de-conceptos-type-hints class=md-nav__link> <span class=md-ellipsis> ğŸ§  Mapa Mental de Conceptos: Type Hints </span> </a> </li> <li class=md-nav__item> <a href=#ejercicio-puente-type-hints-basicos class=md-nav__link> <span class=md-ellipsis> ğŸ’» Ejercicio Puente: Type Hints BÃ¡sicos </span> </a> </li> <li class=md-nav__item> <a href=#practica-del-portafolio-type-hints-en-bankchurn class=md-nav__link> <span class=md-ellipsis> ğŸ› ï¸ PrÃ¡ctica del Portafolio: Type Hints en BankChurn </span> </a> </li> <li class=md-nav__item> <a href=#checkpoint-de-conocimiento-type-hints class=md-nav__link> <span class=md-ellipsis> âœ… Checkpoint de Conocimiento: Type Hints </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#12-pydantic-validacion-automatica class=md-nav__link> <span class=md-ellipsis> 1.2 Pydantic: ValidaciÃ³n AutomÃ¡tica </span> </a> <nav class=md-nav aria-label="1.2 Pydantic: ValidaciÃ³n AutomÃ¡tica"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#explicacion-teorica-el-guardia-de-seguridad class=md-nav__link> <span class=md-ellipsis> ğŸ“ ExplicaciÃ³n TeÃ³rica: El Guardia de Seguridad </span> </a> </li> <li class=md-nav__item> <a href=#codigo-real-bankchurn-config-nivel-staff class=md-nav__link> <span class=md-ellipsis> CÃ³digo Real: BankChurn Config (Nivel Staff) </span> </a> </li> <li class=md-nav__item> <a href=#el-yaml-correspondiente class=md-nav__link> <span class=md-ellipsis> El YAML Correspondiente </span> </a> </li> <li class=md-nav__item> <a href=#ejemplo-de-error-de-validacion class=md-nav__link> <span class=md-ellipsis> Ejemplo de Error de ValidaciÃ³n </span> </a> </li> <li class=md-nav__item> <a href=#mapa-mental-de-conceptos-pydantic class=md-nav__link> <span class=md-ellipsis> ğŸ§  Mapa Mental de Conceptos: Pydantic </span> </a> </li> <li class=md-nav__item> <a href=#ejercicio-puente-validacion-con-pydantic class=md-nav__link> <span class=md-ellipsis> ğŸ’» Ejercicio Puente: ValidaciÃ³n con Pydantic </span> </a> </li> <li class=md-nav__item> <a href=#practica-del-portafolio-config-pydantic-en-bankchurn class=md-nav__link> <span class=md-ellipsis> ğŸ› ï¸ PrÃ¡ctica del Portafolio: Config Pydantic en BankChurn </span> </a> </li> <li class=md-nav__item> <a href=#checkpoint-de-conocimiento-pydantic class=md-nav__link> <span class=md-ellipsis> âœ… Checkpoint de Conocimiento: Pydantic </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#13-src-layout-estructura-profesional class=md-nav__link> <span class=md-ellipsis> 1.3 src/ Layout: Estructura Profesional </span> </a> <nav class=md-nav aria-label="1.3 src/ Layout: Estructura Profesional"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#explicacion-teorica-la-casa-organizada class=md-nav__link> <span class=md-ellipsis> ğŸ“ ExplicaciÃ³n TeÃ³rica: La Casa Organizada </span> </a> </li> <li class=md-nav__item> <a href=#estructura-del-portafolio class=md-nav__link> <span class=md-ellipsis> Estructura del Portafolio </span> </a> </li> <li class=md-nav__item> <a href=#por-que-src-y-no-codigo-en-la-raiz class=md-nav__link> <span class=md-ellipsis> Â¿Por quÃ© src/ y no cÃ³digo en la raÃ­z? </span> </a> </li> <li class=md-nav__item> <a href=#pyprojecttoml-el-corazon-del-proyecto class=md-nav__link> <span class=md-ellipsis> pyproject.toml: El CorazÃ³n del Proyecto </span> </a> </li> <li class=md-nav__item> <a href=#instalacion-en-modo-editable class=md-nav__link> <span class=md-ellipsis> InstalaciÃ³n en Modo Editable </span> </a> </li> <li class=md-nav__item> <a href=#mapa-mental-de-conceptos-src-layout class=md-nav__link> <span class=md-ellipsis> ğŸ§  Mapa Mental de Conceptos: src/ Layout </span> </a> </li> <li class=md-nav__item> <a href=#ejercicio-puente-crear-estructura-basica class=md-nav__link> <span class=md-ellipsis> ğŸ’» Ejercicio Puente: Crear Estructura BÃ¡sica </span> </a> </li> <li class=md-nav__item> <a href=#practica-del-portafolio-estructura-de-bankchurn class=md-nav__link> <span class=md-ellipsis> ğŸ› ï¸ PrÃ¡ctica del Portafolio: Estructura de BankChurn </span> </a> </li> <li class=md-nav__item> <a href=#checkpoint-de-conocimiento-src-layout class=md-nav__link> <span class=md-ellipsis> âœ… Checkpoint de Conocimiento: src/ Layout </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#14-principios-solid-para-ml class=md-nav__link> <span class=md-ellipsis> 1.4 Principios SOLID para ML </span> </a> <nav class=md-nav aria-label="1.4 Principios SOLID para ML"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#explicacion-teorica-un-modulo-una-tarea class=md-nav__link> <span class=md-ellipsis> ğŸ“ ExplicaciÃ³n TeÃ³rica: Un MÃ³dulo, Una Tarea </span> </a> </li> <li class=md-nav__item> <a href=#codigo-real-del-portafolio class=md-nav__link> <span class=md-ellipsis> CÃ³digo Real del Portafolio </span> </a> </li> <li class=md-nav__item> <a href=#mapa-mental-de-conceptos-solid class=md-nav__link> <span class=md-ellipsis> ğŸ§  Mapa Mental de Conceptos: SOLID </span> </a> </li> <li class=md-nav__item> <a href=#ejercicio-puente-aplicar-single-responsibility class=md-nav__link> <span class=md-ellipsis> ğŸ’» Ejercicio Puente: Aplicar Single Responsibility </span> </a> </li> <li class=md-nav__item> <a href=#practica-del-portafolio-solid-en-bankchurn class=md-nav__link> <span class=md-ellipsis> ğŸ› ï¸ PrÃ¡ctica del Portafolio: SOLID en BankChurn </span> </a> </li> <li class=md-nav__item> <a href=#checkpoint-de-conocimiento-solid class=md-nav__link> <span class=md-ellipsis> âœ… Checkpoint de Conocimiento: SOLID </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#15-oop-para-ml-protocolos-y-clases-abstractas class=md-nav__link> <span class=md-ellipsis> 1.5 OOP para ML: Protocolos y Clases Abstractas </span> </a> <nav class=md-nav aria-label="1.5 OOP para ML: Protocolos y Clases Abstractas"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#el-problema-codigo-no-intercambiable class=md-nav__link> <span class=md-ellipsis> El Problema: CÃ³digo No Intercambiable </span> </a> </li> <li class=md-nav__item> <a href=#la-solucion-protocol-y-abc class=md-nav__link> <span class=md-ellipsis> La SoluciÃ³n: Protocol y ABC </span> </a> </li> <li class=md-nav__item> <a href=#mapa-mental-de-conceptos-oop-para-ml class=md-nav__link> <span class=md-ellipsis> ğŸ§  Mapa Mental de Conceptos: OOP para ML </span> </a> </li> <li class=md-nav__item> <a href=#ejercicio-puente-crear-clase-abstracta class=md-nav__link> <span class=md-ellipsis> ğŸ’» Ejercicio Puente: Crear Clase Abstracta </span> </a> </li> <li class=md-nav__item> <a href=#practica-del-portafolio-basetrainer-compartido class=md-nav__link> <span class=md-ellipsis> ğŸ› ï¸ PrÃ¡ctica del Portafolio: BaseTrainer Compartido </span> </a> </li> <li class=md-nav__item> <a href=#checkpoint-de-conocimiento-oop-para-ml class=md-nav__link> <span class=md-ellipsis> âœ… Checkpoint de Conocimiento: OOP para ML </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#16-pandera-validacion-de-dataframes class=md-nav__link> <span class=md-ellipsis> 1.6 Pandera: ValidaciÃ³n de DataFrames </span> </a> <nav class=md-nav aria-label="1.6 Pandera: ValidaciÃ³n de DataFrames"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#el-problema-dataframes-que-mienten class=md-nav__link> <span class=md-ellipsis> El Problema: DataFrames que Mienten </span> </a> </li> <li class=md-nav__item> <a href=#la-solucion-pandera-schema class=md-nav__link> <span class=md-ellipsis> La SoluciÃ³n: Pandera Schema </span> </a> </li> <li class=md-nav__item> <a href=#schemas-del-portafolio class=md-nav__link> <span class=md-ellipsis> Schemas del Portafolio </span> </a> </li> <li class=md-nav__item> <a href=#mapa-mental-de-conceptos-pandera class=md-nav__link> <span class=md-ellipsis> ğŸ§  Mapa Mental de Conceptos: Pandera </span> </a> </li> <li class=md-nav__item> <a href=#ejercicio-puente-validacion-basica-con-pandera class=md-nav__link> <span class=md-ellipsis> ï¿½ï¿½ Ejercicio Puente: ValidaciÃ³n BÃ¡sica con Pandera </span> </a> </li> <li class=md-nav__item> <a href=#practica-del-portafolio-pandera-en-bankchurn class=md-nav__link> <span class=md-ellipsis> ğŸ› ï¸ PrÃ¡ctica del Portafolio: Pandera en BankChurn </span> </a> </li> <li class=md-nav__item> <a href=#checkpoint-de-conocimiento-pandera class=md-nav__link> <span class=md-ellipsis> âœ… Checkpoint de Conocimiento: Pandera </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#17-ejercicios-practicos class=md-nav__link> <span class=md-ellipsis> 1.7 Ejercicios PrÃ¡cticos </span> </a> <nav class=md-nav aria-label="1.7 Ejercicios PrÃ¡cticos"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#ejercicio-1-anadir-type-hints class=md-nav__link> <span class=md-ellipsis> Ejercicio 1: AÃ±adir Type Hints </span> </a> </li> <li class=md-nav__item> <a href=#ejercicio-2-crear-config-con-pydantic class=md-nav__link> <span class=md-ellipsis> Ejercicio 2: Crear Config con Pydantic </span> </a> </li> <li class=md-nav__item> <a href=#ejercicio-3-convertir-a-src-layout class=md-nav__link> <span class=md-ellipsis> Ejercicio 3: Convertir a src/ Layout </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#errores-habituales-y-como-depurarlos class=md-nav__link> <span class=md-ellipsis> ğŸ§¨ Errores habituales y cÃ³mo depurarlos </span> </a> <nav class=md-nav aria-label="ğŸ§¨ Errores habituales y cÃ³mo depurarlos"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-type-hints-mypy-errores-ruidosos-en-pandassklearn class=md-nav__link> <span class=md-ellipsis> 1) Type hints + mypy: errores ruidosos en pandas/sklearn </span> </a> </li> <li class=md-nav__item> <a href=#2-pydantic-validationerror-por-config-mal-definida class=md-nav__link> <span class=md-ellipsis> 2) Pydantic: ValidationError por config mal definida </span> </a> </li> <li class=md-nav__item> <a href=#3-src-layout-e-imports-modulenotfounderror-en-ci-pero-no-en-tu-maquina class=md-nav__link> <span class=md-ellipsis> 3) src/ layout e imports: ModuleNotFoundError en CI pero no en tu mÃ¡quina </span> </a> </li> <li class=md-nav__item> <a href=#4-patron-general-de-debugging-para-este-modulo class=md-nav__link> <span class=md-ellipsis> 4) PatrÃ³n general de debugging para este mÃ³dulo </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#checkpoint-completaste-el-modulo class=md-nav__link> <span class=md-ellipsis> âœ… Checkpoint: Â¿Completaste el MÃ³dulo? </span> </a> </li> <li class=md-nav__item> <a href=#adr-por-que-estas-decisiones class=md-nav__link> <span class=md-ellipsis> ğŸ”— ADR: Â¿Por QuÃ© Estas Decisiones? </span> </a> <nav class=md-nav aria-label="ğŸ”— ADR: Â¿Por QuÃ© Estas Decisiones?"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#adr-001-type-hints-obligatorios class=md-nav__link> <span class=md-ellipsis> ADR-001: Type Hints Obligatorios </span> </a> </li> <li class=md-nav__item> <a href=#adr-002-pydantic-para-configuracion class=md-nav__link> <span class=md-ellipsis> ADR-002: Pydantic para ConfiguraciÃ³n </span> </a> </li> <li class=md-nav__item> <a href=#adr-003-src-layout class=md-nav__link> <span class=md-ellipsis> ADR-003: src/ Layout </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#como-se-uso-en-el-portafolio class=md-nav__link> <span class=md-ellipsis> ğŸ“¦ CÃ³mo se UsÃ³ en el Portafolio </span> </a> <nav class=md-nav aria-label="ğŸ“¦ CÃ³mo se UsÃ³ en el Portafolio"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#type-hints-en-el-portafolio class=md-nav__link> <span class=md-ellipsis> Type Hints en el Portafolio </span> </a> </li> <li class=md-nav__item> <a href=#pydantic-en-el-portafolio class=md-nav__link> <span class=md-ellipsis> Pydantic en el Portafolio </span> </a> </li> <li class=md-nav__item> <a href=#src-layout-en-el-portafolio class=md-nav__link> <span class=md-ellipsis> src/ Layout en el Portafolio </span> </a> </li> <li class=md-nav__item> <a href=#ejercicio-verifica-en-el-repo-real class=md-nav__link> <span class=md-ellipsis> ğŸ”§ Ejercicio: Verifica en el Repo Real </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#consejos-profesionales class=md-nav__link> <span class=md-ellipsis> ğŸ’¼ Consejos Profesionales </span> </a> <nav class=md-nav aria-label="ğŸ’¼ Consejos Profesionales"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#para-entrevistas class=md-nav__link> <span class=md-ellipsis> Para Entrevistas </span> </a> </li> <li class=md-nav__item> <a href=#para-proyectos-reales class=md-nav__link> <span class=md-ellipsis> Para Proyectos Reales </span> </a> </li> <li class=md-nav__item> <a href=#anti-patrones-a-evitar class=md-nav__link> <span class=md-ellipsis> Anti-patrones a Evitar </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#recursos-externos-del-modulo class=md-nav__link> <span class=md-ellipsis> ğŸ“º Recursos Externos del MÃ³dulo </span> </a> <nav class=md-nav aria-label="ğŸ“º Recursos Externos del MÃ³dulo"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#videos class=md-nav__link> <span class=md-ellipsis> ğŸ¬ Videos </span> </a> </li> <li class=md-nav__item> <a href=#cursos class=md-nav__link> <span class=md-ellipsis> ğŸ“š Cursos </span> </a> </li> <li class=md-nav__item> <a href=#documentacion class=md-nav__link> <span class=md-ellipsis> ğŸ“„ DocumentaciÃ³n </span> </a> </li> <li class=md-nav__item> <a href=#cuando-consultar class=md-nav__link> <span class=md-ellipsis> ğŸ’¡ CuÃ¡ndo Consultar </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#decisiones-tecnicas-adrs class=md-nav__link> <span class=md-ellipsis> âš–ï¸ Decisiones TÃ©cnicas (ADRs) </span> </a> <nav class=md-nav aria-label="âš–ï¸ Decisiones TÃ©cnicas (ADRs)"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#adr-001-python-311 class=md-nav__link> <span class=md-ellipsis> ADR-001: Python 3.11+ </span> </a> </li> <li class=md-nav__item> <a href=#adr-003-pydantic-v2-para-configuracion class=md-nav__link> <span class=md-ellipsis> ADR-003: Pydantic v2 para ConfiguraciÃ³n </span> </a> </li> <li class=md-nav__item> <a href=#adr-013-ruff-para-linting class=md-nav__link> <span class=md-ellipsis> ADR-013: Ruff para Linting </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#ejercicios-del-modulo class=md-nav__link> <span class=md-ellipsis> ğŸ”§ Ejercicios del MÃ³dulo </span> </a> <nav class=md-nav aria-label="ğŸ”§ Ejercicios del MÃ³dulo"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#ejercicio-11-type-hints class=md-nav__link> <span class=md-ellipsis> Ejercicio 1.1: Type Hints </span> </a> </li> <li class=md-nav__item> <a href=#ejercicio-12-pydantic-config class=md-nav__link> <span class=md-ellipsis> Ejercicio 1.2: Pydantic Config </span> </a> </li> <li class=md-nav__item> <a href=#ejercicio-13-src-layout class=md-nav__link> <span class=md-ellipsis> Ejercicio 1.3: src/ Layout </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#glosario-del-modulo class=md-nav__link> <span class=md-ellipsis> ğŸ”— Glosario del MÃ³dulo </span> </a> </li> <li class=md-nav__item> <a href=#la-trampa-errores-comunes-de-este-modulo class=md-nav__link> <span class=md-ellipsis> ğŸª¤ La Trampa â€” Errores Comunes de Este MÃ³dulo </span> </a> <nav class=md-nav aria-label="ğŸª¤ La Trampa â€” Errores Comunes de Este MÃ³dulo"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#trampa-1-type-hints-que-no-se-verifican class=md-nav__link> <span class=md-ellipsis> Trampa 1: Type Hints que no se verifican </span> </a> </li> <li class=md-nav__item> <a href=#trampa-2-pydantic-con-valores-mutables-por-defecto class=md-nav__link> <span class=md-ellipsis> Trampa 2: Pydantic con valores mutables por defecto </span> </a> </li> <li class=md-nav__item> <a href=#trampa-3-validacion-pydantic-silenciosa-con-coercion class=md-nav__link> <span class=md-ellipsis> Trampa 3: ValidaciÃ³n Pydantic silenciosa con coerciÃ³n </span> </a> </li> <li class=md-nav__item> <a href=#trampa-4-abc-sin-abstractmethod-no-obliga-implementacion class=md-nav__link> <span class=md-ellipsis> Trampa 4: ABC sin @abstractmethod no obliga implementaciÃ³n </span> </a> </li> <li class=md-nav__item> <a href=#trampa-5-settingwithcopywarning-ignorada class=md-nav__link> <span class=md-ellipsis> Trampa 5: SettingWithCopyWarning ignorada </span> </a> </li> <li class=md-nav__item> <a href=#trampa-6-pandera-schema-muy-permisivo class=md-nav__link> <span class=md-ellipsis> Trampa 6: Pandera schema muy permisivo </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#quiz-del-modulo-semanas-1-3 class=md-nav__link> <span class=md-ellipsis> ğŸ“ Quiz del MÃ³dulo â€” Semanas 1-3 </span> </a> <nav class=md-nav aria-label="ğŸ“ Quiz del MÃ³dulo â€” Semanas 1-3"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#quiz-semana-1-type-hints-pydantic class=md-nav__link> <span class=md-ellipsis> Quiz Semana 1: Type Hints + Pydantic </span> </a> </li> <li class=md-nav__item> <a href=#quiz-semana-2-oop-y-protocolos class=md-nav__link> <span class=md-ellipsis> Quiz Semana 2: OOP y Protocolos </span> </a> </li> <li class=md-nav__item> <a href=#quiz-semana-3-pandas-de-produccion-pandera class=md-nav__link> <span class=md-ellipsis> Quiz Semana 3: Pandas de ProducciÃ³n + Pandera </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=01-python-moderno-para-mlops>01. Python Moderno para MLOps<a class=headerlink href=#01-python-moderno-para-mlops title="Permanent link">&para;</a></h1> <h2 id=objetivo-del-modulo>ğŸ¯ Objetivo del MÃ³dulo<a class=headerlink href=#objetivo-del-modulo title="Permanent link">&para;</a></h2> <p>Transformar tu cÃ³digo de "funciona en un notebook" a "pasa code review en una empresa FAANG".</p> <p>En este portafolio aplicarÃ¡s estos patrones sobre <code>common_utils/</code> y el cÃ³digo de los tres proyectos (BankChurn-Predictor, CarVision-Market-Intelligence, TelecomAI-Customer-Intelligence), para que tu Python sea consistente en todo el stack.</p> <div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a>â•‘                                                                              â•‘
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a>â•‘   ANTES (Data Scientist tÃ­pico)          DESPUÃ‰S (MLOps Engineer)            â•‘
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a>â•‘   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€           â•‘
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>â•‘   â€¢ Un archivo gigante                   â€¢ Paquete instalable                â•‘
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a>â•‘   â€¢ Sin tipos                            â€¢ Type hints en todo                â•‘
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a>â•‘   â€¢ Config hardcodeada                   â€¢ Pydantic validation               â•‘
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a>â•‘   â€¢ &quot;Funciona en mi mÃ¡quina&quot;             â€¢ Funciona en cualquier mÃ¡quina     â•‘
<a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a>â•‘                                                                              â•‘
<a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a>â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
</code></pre></div> <hr> <p><a id=00-prerrequisitos></a></p> <h2 id=00-prerrequisitos>0.0 Prerrequisitos<a class=headerlink href=#00-prerrequisitos title="Permanent link">&para;</a></h2> <ul> <li>Python bÃ¡sico: funciones, clases, mÃ³dulos.</li> <li>Terminal: ejecutar comandos y navegar carpetas.</li> <li>Entorno listo para ejecutar el portafolio (si todavÃ­a no lo tienes, usa el mÃ³dulo <strong><a href=../04_ENTORNOS/ >04_ENTORNOS</a></strong>).</li> <li>Opcional (pero recomendado): entender quÃ© significa instalar un paquete en modo editable (<code>pip install -e .</code>).</li> </ul> <hr> <p><a id=01-protocolo-e-como-estudiar-este-modulo></a></p> <h2 id=01-protocolo-e-como-estudiar-este-modulo>0.1 ğŸ§  Protocolo E: CÃ³mo estudiar este mÃ³dulo<a class=headerlink href=#01-protocolo-e-como-estudiar-este-modulo title="Permanent link">&para;</a></h2> <ul> <li><strong>Antes de leer</strong>: abre <strong><a href=../study_tools/PROTOCOLO_E/ >Protocolo E</a></strong> y define tu <em>output mÃ­nimo</em> de la sesiÃ³n.</li> <li><strong>Mientras implementas</strong>: si te atoras &gt;15 min, registra el bloqueo en <strong><a href=../study_tools/DIARIO_ERRORES/ >Diario de Errores</a></strong>.</li> <li><strong>Al cerrar la semana</strong>: usa <strong><a href=../study_tools/CIERRE_SEMANAL/ >Cierre Semanal</a></strong> para decidir en quÃ© mejorar (calidad, reproducibilidad, etc.).</li> </ul> <hr> <p><a id=02-entregables-verificables-minimo-viable></a></p> <h2 id=02-entregables-verificables-minimo-viable>0.2 âœ… Entregables verificables (mÃ­nimo viable)<a class=headerlink href=#02-entregables-verificables-minimo-viable title="Permanent link">&para;</a></h2> <p>Al terminar este mÃ³dulo, deberÃ­as poder mostrar (en al menos 1 proyecto del portafolio):</p> <ul> <li>[ ] <strong>Type hints</strong> en funciones pÃºblicas (carga de datos, features, train, predict)</li> <li>[ ] <strong><code>mypy</code> corriendo</strong> sobre <code>src/</code> sin errores crÃ­ticos</li> <li>[ ] <strong>Config con Pydantic</strong> (cargando YAML y validando rangos)</li> <li>[ ] <strong><code>src/</code> layout real</strong> (paquete instalable)</li> <li>[ ] <strong>InstalaciÃ³n editable</strong>: <code>pip install -e ".[dev]"</code> y <code>pytest</code> corriendo desde raÃ­z</li> </ul> <hr> <p><a id=03-puente-teoria-codigo-portafolio></a></p> <h2 id=03-puente-teoria-codigo-portafolio>0.3 ğŸ§© Puente teorÃ­a â†” cÃ³digo (Portafolio)<a class=headerlink href=#03-puente-teoria-codigo-portafolio title="Permanent link">&para;</a></h2> <p>Para que esto cuente como progreso real, fuerza este mapeo:</p> <ul> <li><strong>Concepto</strong>: typing / Pydantic / packaging</li> <li><strong>Archivo</strong>: <code>src/&lt;paquete&gt;/config.py</code>, <code>src/&lt;paquete&gt;/training.py</code>, <code>pyproject.toml</code></li> <li><strong>Prueba</strong>: <code>mypy src/</code> + <code>pytest</code></li> <li><strong>Evidencia</strong>: checklist del mÃ³dulo + 1 entrada en Diario si hubo bloqueo</li> </ul> <h2 id=contenido>ğŸ“‹ Contenido<a class=headerlink href=#contenido title="Permanent link">&para;</a></h2> <ul> <li><strong>0.0</strong> <a href=#00-prerrequisitos>Prerrequisitos</a></li> <li><strong>0.1</strong> <a href=#01-protocolo-e-como-estudiar-este-modulo>Protocolo E: CÃ³mo estudiar este mÃ³dulo</a></li> <li><strong>0.2</strong> <a href=#02-entregables-verificables-minimo-viable>Entregables verificables (mÃ­nimo viable)</a></li> <li><strong>0.3</strong> <a href=#03-puente-teoria-codigo-portafolio>Puente teorÃ­a â†” cÃ³digo (Portafolio)</a></li> <li><strong>0.4</strong> <a href=#04-repaso-fundamentos-python>Repaso: Fundamentos de Python para MLOps</a> â­ NUEVO</li> <li><a href=#11-type-hints-tu-contrato-con-el-futuro>Type Hints: Tu Contrato con el Futuro</a></li> <li><a href=#12-pydantic-validation-automatica>Pydantic: ValidaciÃ³n AutomÃ¡tica</a></li> <li><a href=#13-src-layout-estructura-profesional>src/ Layout: Estructura Profesional</a></li> <li><a href=#14-principios-solid-para-ml>Principios SOLID para ML</a></li> <li><a href=#15-oop-para-ml>OOP para ML: Protocolos y ABC</a> â­ NUEVO</li> <li><a href=#16-pandera-validacion-dataframes>Pandera: ValidaciÃ³n de DataFrames</a> â­ NUEVO</li> <li><a href=#17-ejercicios-practicos>Ejercicios PrÃ¡cticos</a></li> </ul> <hr> <p><a id=04-repaso-fundamentos-python></a></p> <h2 id=04-repaso-fundamentos-de-python-para-mlops>0.4 Repaso: Fundamentos de Python para MLOps<a class=headerlink href=#04-repaso-fundamentos-de-python-para-mlops title="Permanent link">&para;</a></h2> <blockquote> <p><strong>Si vienes de Python bÃ¡sico</strong>, esta secciÃ³n te prepara para el salto a cÃ³digo profesional. Si ya dominas funciones, clases y mÃ³dulos, puedes saltar a la secciÃ³n 1.1.</p> </blockquote> <h3 id=de-notebook-a-codigo-profesional-el-mindset>ğŸ¯ De Notebook a CÃ³digo Profesional: El Mindset<a class=headerlink href=#de-notebook-a-codigo-profesional-el-mindset title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>â•‘  EL PROBLEMA DEL DATA SCIENTIST TÃPICO:                                       â•‘
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>â•‘                                                                               â•‘
<a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a>â•‘  En un notebook:                                                              â•‘
<a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a>â•‘  â€¢ Escribes cÃ³digo en celdas desordenadas                                     â•‘
<a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a>â•‘  â€¢ Variables globales por todos lados                                         â•‘
<a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a>â•‘  â€¢ &quot;Funciona&quot; = Ã©xito                                                         â•‘
<a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a>â•‘  â€¢ Cuando algo falla, reinicias el kernel y vuelves a correr todo             â•‘
<a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a>â•‘                                                                               â•‘
<a id=__codelineno-1-10 name=__codelineno-1-10 href=#__codelineno-1-10></a>â•‘  En producciÃ³n:                                                               â•‘
<a id=__codelineno-1-11 name=__codelineno-1-11 href=#__codelineno-1-11></a>â•‘  â€¢ El cÃ³digo debe ser MODULAR (dividido en piezas reutilizables)              â•‘
<a id=__codelineno-1-12 name=__codelineno-1-12 href=#__codelineno-1-12></a>â•‘  â€¢ Las dependencias deben ser EXPLÃCITAS (no variables mÃ¡gicas)               â•‘
<a id=__codelineno-1-13 name=__codelineno-1-13 href=#__codelineno-1-13></a>â•‘  â€¢ &quot;Funciona&quot; = pasa tests + se entiende + se mantiene                        â•‘
<a id=__codelineno-1-14 name=__codelineno-1-14 href=#__codelineno-1-14></a>â•‘  â€¢ Cuando algo falla, necesitas DIAGNOSTICAR sin reiniciar                    â•‘
<a id=__codelineno-1-15 name=__codelineno-1-15 href=#__codelineno-1-15></a>â•‘                                                                               â•‘
<a id=__codelineno-1-16 name=__codelineno-1-16 href=#__codelineno-1-16></a>â•‘  Esta guÃ­a te lleva del primer mindset al segundo.                            â•‘
<a id=__codelineno-1-17 name=__codelineno-1-17 href=#__codelineno-1-17></a>â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
</code></pre></div> <h3 id=funciones-la-unidad-basica-de-codigo-reutilizable>Funciones: La Unidad BÃ¡sica de CÃ³digo Reutilizable<a class=headerlink href=#funciones-la-unidad-basica-de-codigo-reutilizable title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=c1># NIVEL BÃSICO: Funciones simples</span>
<a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a>
<a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=c1># âŒ CÃ³digo de notebook (todo en celdas sueltas) - NO HAGAS ESTO</span>
<a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=kn>import</span><span class=w> </span><span class=nn>pandas</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>pd</span>                              <span class=c1># pandas: librerÃ­a para manipular tablas (DataFrames). &quot;pd&quot; es la convenciÃ³n universal.</span>
<a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=n>df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=s2>&quot;data.csv&quot;</span><span class=p>)</span>                     <span class=c1># read_csv() lee un archivo CSV y lo convierte en DataFrame (tabla en memoria).</span>
<a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a><span class=n>df</span> <span class=o>=</span> <span class=n>df</span><span class=o>.</span><span class=n>dropna</span><span class=p>()</span>                                 <span class=c1># dropna() elimina TODAS las filas con algÃºn valor faltante (NaN). Peligroso: puedes perder datos.</span>
<a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a><span class=n>df</span><span class=p>[</span><span class=s2>&quot;Age&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>df</span><span class=p>[</span><span class=s2>&quot;Age&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>fillna</span><span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=s2>&quot;Age&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>mean</span><span class=p>())</span>   <span class=c1># fillna() rellena NaN con un valor; mean() calcula el promedio. Problema: esto ya modificÃ³ df arriba.</span>
<a id=__codelineno-2-10 name=__codelineno-2-10 href=#__codelineno-2-10></a><span class=c1># ... y asÃ­ 200 lÃ­neas mÃ¡s                       # En notebooks, el cÃ³digo crece sin estructura â†’ imposible de mantener/testear.</span>
<a id=__codelineno-2-11 name=__codelineno-2-11 href=#__codelineno-2-11></a>
<a id=__codelineno-2-12 name=__codelineno-2-12 href=#__codelineno-2-12></a><span class=c1># âœ… CÃ³digo profesional (encapsulado en funciones)</span>
<a id=__codelineno-2-13 name=__codelineno-2-13 href=#__codelineno-2-13></a><span class=k>def</span><span class=w> </span><span class=nf>load_and_clean_data</span><span class=p>(</span><span class=n>path</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>:</span>  <span class=c1># def: define una funciÃ³n. &quot;path: str&quot; indica que espera un string. &quot;-&gt; pd.DataFrame&quot; indica quÃ© retorna.</span>
<a id=__codelineno-2-14 name=__codelineno-2-14 href=#__codelineno-2-14></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Carga datos y aplica limpieza bÃ¡sica.         # Docstring: documentaciÃ³n de la funciÃ³n. SIEMPRE documenta funciones pÃºblicas.</span>
<a id=__codelineno-2-15 name=__codelineno-2-15 href=#__codelineno-2-15></a>
<a id=__codelineno-2-16 name=__codelineno-2-16 href=#__codelineno-2-16></a><span class=sd>    Args:                                            # Args: lista de parÃ¡metros que recibe la funciÃ³n.</span>
<a id=__codelineno-2-17 name=__codelineno-2-17 href=#__codelineno-2-17></a><span class=sd>        path: Ruta al archivo CSV.                   # Describe cada parÃ¡metro con tipo y propÃ³sito.</span>
<a id=__codelineno-2-18 name=__codelineno-2-18 href=#__codelineno-2-18></a>
<a id=__codelineno-2-19 name=__codelineno-2-19 href=#__codelineno-2-19></a><span class=sd>    Returns:                                         # Returns: describe quÃ© devuelve la funciÃ³n.</span>
<a id=__codelineno-2-20 name=__codelineno-2-20 href=#__codelineno-2-20></a><span class=sd>        DataFrame limpio listo para feature engineering.</span>
<a id=__codelineno-2-21 name=__codelineno-2-21 href=#__codelineno-2-21></a>
<a id=__codelineno-2-22 name=__codelineno-2-22 href=#__codelineno-2-22></a><span class=sd>    Example:                                         # Example: muestra cÃ³mo usar la funciÃ³n (doctests ejecutables con pytest).</span>
<a id=__codelineno-2-23 name=__codelineno-2-23 href=#__codelineno-2-23></a><span class=sd>        &gt;&gt;&gt; df = load_and_clean_data(&quot;data/raw/churn.csv&quot;)</span>
<a id=__codelineno-2-24 name=__codelineno-2-24 href=#__codelineno-2-24></a><span class=sd>        &gt;&gt;&gt; df.shape</span>
<a id=__codelineno-2-25 name=__codelineno-2-25 href=#__codelineno-2-25></a><span class=sd>        (10000, 14)</span>
<a id=__codelineno-2-26 name=__codelineno-2-26 href=#__codelineno-2-26></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-2-27 name=__codelineno-2-27 href=#__codelineno-2-27></a>    <span class=n>df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>                           <span class=c1># Lee el CSV. La ruta viene como parÃ¡metro â†’ la funciÃ³n es REUTILIZABLE.</span>
<a id=__codelineno-2-28 name=__codelineno-2-28 href=#__codelineno-2-28></a>    <span class=n>df</span> <span class=o>=</span> <span class=n>df</span><span class=o>.</span><span class=n>dropna</span><span class=p>(</span><span class=n>subset</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;target&quot;</span><span class=p>])</span>                <span class=c1># subset=[&quot;target&quot;]: solo elimina filas donde &quot;target&quot; es NaN, no todas las filas.</span>
<a id=__codelineno-2-29 name=__codelineno-2-29 href=#__codelineno-2-29></a>    <span class=n>df</span><span class=p>[</span><span class=s2>&quot;Age&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>df</span><span class=p>[</span><span class=s2>&quot;Age&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>fillna</span><span class=p>(</span><span class=n>df</span><span class=p>[</span><span class=s2>&quot;Age&quot;</span><span class=p>]</span><span class=o>.</span><span class=n>median</span><span class=p>())</span> <span class=c1># median() es mÃ¡s robusto que mean() frente a outliers.</span>
<a id=__codelineno-2-30 name=__codelineno-2-30 href=#__codelineno-2-30></a>    <span class=k>return</span> <span class=n>df</span>                                        <span class=c1># return: devuelve el resultado. Sin return, la funciÃ³n devuelve None.</span>
<a id=__codelineno-2-31 name=__codelineno-2-31 href=#__codelineno-2-31></a>
<a id=__codelineno-2-32 name=__codelineno-2-32 href=#__codelineno-2-32></a><span class=c1># Ahora puedo REUTILIZAR esta funciÃ³n en cualquier parte</span>
<a id=__codelineno-2-33 name=__codelineno-2-33 href=#__codelineno-2-33></a><span class=n>df_train</span> <span class=o>=</span> <span class=n>load_and_clean_data</span><span class=p>(</span><span class=s2>&quot;data/train.csv&quot;</span><span class=p>)</span>     <span class=c1># Llamo la funciÃ³n con datos de entrenamiento â†’ obtienen misma limpieza.</span>
<a id=__codelineno-2-34 name=__codelineno-2-34 href=#__codelineno-2-34></a><span class=n>df_test</span> <span class=o>=</span> <span class=n>load_and_clean_data</span><span class=p>(</span><span class=s2>&quot;data/test.csv&quot;</span><span class=p>)</span>       <span class=c1># Llamo con datos de test â†’ GARANTIZA consistencia entre train y test.</span>
</code></pre></div> <h3 id=clases-agrupando-datos-y-comportamiento>Clases: Agrupando Datos y Comportamiento<a class=headerlink href=#clases-agrupando-datos-y-comportamiento title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=c1># Â¿POR QUÃ‰ CLASES? La AnalogÃ­a del Formulario</span>
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a>
<a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=c1># Imagina que tienes que procesar solicitudes de crÃ©dito:</span>
<a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=c1>#</span>
<a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a><span class=c1># SIN CLASES (diccionarios sueltos):</span>
<a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a><span class=c1># solicitud1 = {&quot;nombre&quot;: &quot;Juan&quot;, &quot;edad&quot;: 30, &quot;salario&quot;: 50000}</span>
<a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a><span class=c1># solicitud2 = {&quot;nombre&quot;: &quot;Ana&quot;, &quot;edad&quot;: None, &quot;salario&quot;: -1000}  # Â¿VÃ¡lido?</span>
<a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a><span class=c1>#</span>
<a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a><span class=c1># Â¿CÃ³mo validas que la edad no sea None?</span>
<a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a><span class=c1># Â¿CÃ³mo evitas salarios negativos?</span>
<a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a><span class=c1># Â¿DÃ³nde pones la lÃ³gica de calcular el score crediticio?</span>
<a id=__codelineno-3-14 name=__codelineno-3-14 href=#__codelineno-3-14></a><span class=c1>#</span>
<a id=__codelineno-3-15 name=__codelineno-3-15 href=#__codelineno-3-15></a><span class=c1># CON CLASES (estructura + validaciÃ³n + comportamiento):</span>
<a id=__codelineno-3-16 name=__codelineno-3-16 href=#__codelineno-3-16></a>
<a id=__codelineno-3-17 name=__codelineno-3-17 href=#__codelineno-3-17></a><span class=kn>from</span><span class=w> </span><span class=nn>dataclasses</span><span class=w> </span><span class=kn>import</span> <span class=n>dataclass</span>      <span class=c1># dataclass: decorador que genera automÃ¡ticamente __init__, __repr__, __eq__ para tu clase.</span>
<a id=__codelineno-3-18 name=__codelineno-3-18 href=#__codelineno-3-18></a><span class=kn>from</span><span class=w> </span><span class=nn>typing</span><span class=w> </span><span class=kn>import</span> <span class=n>Optional</span>            <span class=c1># Optional[X] significa &quot;puede ser X o None&quot;. Equivale a Union[X, None].</span>
<a id=__codelineno-3-19 name=__codelineno-3-19 href=#__codelineno-3-19></a>
<a id=__codelineno-3-20 name=__codelineno-3-20 href=#__codelineno-3-20></a><span class=nd>@dataclass</span>                             <span class=c1># @dataclass: convierte la clase en una &quot;data class&quot; â†’ menos cÃ³digo boilerplate.</span>
<a id=__codelineno-3-21 name=__codelineno-3-21 href=#__codelineno-3-21></a><span class=k>class</span><span class=w> </span><span class=nc>SolicitudCredito</span><span class=p>:</span>                <span class=c1># class: define un nuevo tipo de objeto. PascalCase por convenciÃ³n (primera letra mayÃºscula).</span>
<a id=__codelineno-3-22 name=__codelineno-3-22 href=#__codelineno-3-22></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Una solicitud de crÃ©dito con validaciÃ³n bÃ¡sica.&quot;&quot;&quot;</span>  <span class=c1># Docstring de la clase: explica su propÃ³sito.</span>
<a id=__codelineno-3-23 name=__codelineno-3-23 href=#__codelineno-3-23></a>    <span class=n>nombre</span><span class=p>:</span> <span class=nb>str</span>                        <span class=c1># Atributo: nombre de tipo str (texto). dataclass lo convierte en parÃ¡metro del __init__.</span>
<a id=__codelineno-3-24 name=__codelineno-3-24 href=#__codelineno-3-24></a>    <span class=n>edad</span><span class=p>:</span> <span class=nb>int</span>                          <span class=c1># Atributo: edad de tipo int (entero). SerÃ¡ obligatorio al crear la instancia.</span>
<a id=__codelineno-3-25 name=__codelineno-3-25 href=#__codelineno-3-25></a>    <span class=n>salario</span><span class=p>:</span> <span class=nb>float</span>                     <span class=c1># Atributo: salario de tipo float (decimal). TambiÃ©n obligatorio.</span>
<a id=__codelineno-3-26 name=__codelineno-3-26 href=#__codelineno-3-26></a>    <span class=n>historial_crediticio</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=nb>float</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>  <span class=c1># Atributo OPCIONAL: tiene valor por defecto None. Puede o no proporcionarse.</span>
<a id=__codelineno-3-27 name=__codelineno-3-27 href=#__codelineno-3-27></a>
<a id=__codelineno-3-28 name=__codelineno-3-28 href=#__codelineno-3-28></a>    <span class=k>def</span><span class=w> </span><span class=nf>__post_init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>           <span class=c1># __post_init__: mÃ©todo especial que se ejecuta DESPUÃ‰S de que dataclass crea el objeto.</span>
<a id=__codelineno-3-29 name=__codelineno-3-29 href=#__codelineno-3-29></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;ValidaciÃ³n al crear la instancia.&quot;&quot;&quot;</span>  <span class=c1># AquÃ­ ponemos validaciones que deben ocurrir al instanciar.</span>
<a id=__codelineno-3-30 name=__codelineno-3-30 href=#__codelineno-3-30></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>edad</span> <span class=o>&lt;</span> <span class=mi>18</span><span class=p>:</span>             <span class=c1># self: referencia al objeto actual. self.edad accede al atributo edad de ESTA instancia.</span>
<a id=__codelineno-3-31 name=__codelineno-3-31 href=#__codelineno-3-31></a>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Debe ser mayor de edad&quot;</span><span class=p>)</span>  <span class=c1># raise: lanza una excepciÃ³n. ValueError: error por valor invÃ¡lido.</span>
<a id=__codelineno-3-32 name=__codelineno-3-32 href=#__codelineno-3-32></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>salario</span> <span class=o>&lt;=</span> <span class=mi>0</span><span class=p>:</span>          <span class=c1># ValidaciÃ³n de negocio: salario debe ser positivo.</span>
<a id=__codelineno-3-33 name=__codelineno-3-33 href=#__codelineno-3-33></a>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Salario debe ser positivo&quot;</span><span class=p>)</span>
<a id=__codelineno-3-34 name=__codelineno-3-34 href=#__codelineno-3-34></a>
<a id=__codelineno-3-35 name=__codelineno-3-35 href=#__codelineno-3-35></a>    <span class=k>def</span><span class=w> </span><span class=nf>calcular_score</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>float</span><span class=p>:</span> <span class=c1># MÃ©todo: funciÃ³n que pertenece a la clase. self siempre es el primer parÃ¡metro.</span>
<a id=__codelineno-3-36 name=__codelineno-3-36 href=#__codelineno-3-36></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Calcula score crediticio bÃ¡sico.&quot;&quot;&quot;</span>
<a id=__codelineno-3-37 name=__codelineno-3-37 href=#__codelineno-3-37></a>        <span class=n>base</span> <span class=o>=</span> <span class=nb>min</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>salario</span> <span class=o>/</span> <span class=mi>1000</span><span class=p>,</span> <span class=mi>100</span><span class=p>)</span>      <span class=c1># min(a, b): retorna el menor. Limita el score base a 100 mÃ¡ximo.</span>
<a id=__codelineno-3-38 name=__codelineno-3-38 href=#__codelineno-3-38></a>        <span class=n>edad_bonus</span> <span class=o>=</span> <span class=nb>min</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>edad</span> <span class=o>-</span> <span class=mi>18</span><span class=p>,</span> <span class=mi>30</span><span class=p>)</span> <span class=o>*</span> <span class=mf>0.5</span>  <span class=c1># Bonus por edad, mÃ¡ximo 15 puntos (30 * 0.5).</span>
<a id=__codelineno-3-39 name=__codelineno-3-39 href=#__codelineno-3-39></a>        <span class=k>return</span> <span class=n>base</span> <span class=o>+</span> <span class=n>edad_bonus</span>       <span class=c1># return: devuelve el resultado del cÃ¡lculo.</span>
<a id=__codelineno-3-40 name=__codelineno-3-40 href=#__codelineno-3-40></a>
<a id=__codelineno-3-41 name=__codelineno-3-41 href=#__codelineno-3-41></a><span class=c1># Ahora es IMPOSIBLE crear una solicitud invÃ¡lida</span>
<a id=__codelineno-3-42 name=__codelineno-3-42 href=#__codelineno-3-42></a><span class=n>solicitud</span> <span class=o>=</span> <span class=n>SolicitudCredito</span><span class=p>(</span><span class=n>nombre</span><span class=o>=</span><span class=s2>&quot;Juan&quot;</span><span class=p>,</span> <span class=n>edad</span><span class=o>=</span><span class=mi>30</span><span class=p>,</span> <span class=n>salario</span><span class=o>=</span><span class=mi>50000</span><span class=p>)</span>  <span class=c1># Crea instancia: dataclass genera __init__ con estos parÃ¡metros.</span>
<a id=__codelineno-3-43 name=__codelineno-3-43 href=#__codelineno-3-43></a><span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Score: </span><span class=si>{</span><span class=n>solicitud</span><span class=o>.</span><span class=n>calcular_score</span><span class=p>()</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>  <span class=c1># f-string: f&quot;...&quot; permite insertar {expresiones} dentro del string. Score: 56.0</span>
<a id=__codelineno-3-44 name=__codelineno-3-44 href=#__codelineno-3-44></a>
<a id=__codelineno-3-45 name=__codelineno-3-45 href=#__codelineno-3-45></a><span class=c1># Esto FALLA inmediatamente con un error claro</span>
<a id=__codelineno-3-46 name=__codelineno-3-46 href=#__codelineno-3-46></a><span class=c1># solicitud_mala = SolicitudCredito(nombre=&quot;Ana&quot;, edad=15, salario=-1000)</span>
<a id=__codelineno-3-47 name=__codelineno-3-47 href=#__codelineno-3-47></a><span class=c1># ValueError: Debe ser mayor de edad  # El error es CLARO y ocurre EN LA CREACIÃ“N, no despuÃ©s cuando ya es tarde.</span>
</code></pre></div> <h3 id=modulos-organizando-codigo-en-archivos>MÃ³dulos: Organizando CÃ³digo en Archivos<a class=headerlink href=#modulos-organizando-codigo-en-archivos title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=c1># Â¿POR QUÃ‰ MÃ“DULOS? La AnalogÃ­a de la Biblioteca</span>
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a>
<a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=c1># Una biblioteca tiene SECCIONES (mÃ³dulos):</span>
<a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=c1># - SecciÃ³n de novelas (data.py)</span>
<a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=c1># - SecciÃ³n de ciencia (features.py)</span>
<a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a><span class=c1># - SecciÃ³n de historia (training.py)</span>
<a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a><span class=c1>#</span>
<a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a><span class=c1># Cada secciÃ³n tiene su PROPÃ“SITO y no mezclas libros de cocina con novelas.</span>
<a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a>
<a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a><span class=c1># Estructura tÃ­pica de un proyecto ML:</span>
<a id=__codelineno-4-13 name=__codelineno-4-13 href=#__codelineno-4-13></a><span class=c1>#</span>
<a id=__codelineno-4-14 name=__codelineno-4-14 href=#__codelineno-4-14></a><span class=c1># src/bankchurn/</span>
<a id=__codelineno-4-15 name=__codelineno-4-15 href=#__codelineno-4-15></a><span class=c1># â”œâ”€â”€ __init__.py      # &quot;Esta carpeta es un paquete Python&quot;</span>
<a id=__codelineno-4-16 name=__codelineno-4-16 href=#__codelineno-4-16></a><span class=c1># â”œâ”€â”€ config.py        # ConfiguraciÃ³n (Pydantic)</span>
<a id=__codelineno-4-17 name=__codelineno-4-17 href=#__codelineno-4-17></a><span class=c1># â”œâ”€â”€ data.py          # Carga y limpieza de datos</span>
<a id=__codelineno-4-18 name=__codelineno-4-18 href=#__codelineno-4-18></a><span class=c1># â”œâ”€â”€ features.py      # Feature engineering</span>
<a id=__codelineno-4-19 name=__codelineno-4-19 href=#__codelineno-4-19></a><span class=c1># â”œâ”€â”€ training.py      # Entrenamiento del modelo</span>
<a id=__codelineno-4-20 name=__codelineno-4-20 href=#__codelineno-4-20></a><span class=c1># â”œâ”€â”€ evaluation.py    # MÃ©tricas y evaluaciÃ³n</span>
<a id=__codelineno-4-21 name=__codelineno-4-21 href=#__codelineno-4-21></a><span class=c1># â””â”€â”€ prediction.py    # Inferencia en producciÃ³n</span>
<a id=__codelineno-4-22 name=__codelineno-4-22 href=#__codelineno-4-22></a>
<a id=__codelineno-4-23 name=__codelineno-4-23 href=#__codelineno-4-23></a><span class=c1># Importar desde mÃ³dulos:</span>
<a id=__codelineno-4-24 name=__codelineno-4-24 href=#__codelineno-4-24></a><span class=kn>from</span><span class=w> </span><span class=nn>bankchurn.config</span><span class=w> </span><span class=kn>import</span> <span class=n>BankChurnConfig</span>
<a id=__codelineno-4-25 name=__codelineno-4-25 href=#__codelineno-4-25></a><span class=kn>from</span><span class=w> </span><span class=nn>bankchurn.data</span><span class=w> </span><span class=kn>import</span> <span class=n>load_and_clean_data</span>
<a id=__codelineno-4-26 name=__codelineno-4-26 href=#__codelineno-4-26></a><span class=kn>from</span><span class=w> </span><span class=nn>bankchurn.training</span><span class=w> </span><span class=kn>import</span> <span class=n>ChurnTrainer</span>
<a id=__codelineno-4-27 name=__codelineno-4-27 href=#__codelineno-4-27></a>
<a id=__codelineno-4-28 name=__codelineno-4-28 href=#__codelineno-4-28></a><span class=c1># Esto es MUCHO mÃ¡s claro que tener todo en un archivo de 2000 lÃ­neas</span>
</code></pre></div> <h3 id=decoradores-funciones-que-modifican-funciones>Decoradores: Funciones que Modifican Funciones<a class=headerlink href=#decoradores-funciones-que-modifican-funciones title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=c1># DECORADORES: Muy usados en MLOps (logging, timing, caching, validaciÃ³n)</span>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a>
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=kn>import</span><span class=w> </span><span class=nn>time</span>                            <span class=c1># time: mÃ³dulo estÃ¡ndar de Python para medir tiempo. time.time() da segundos desde 1970.</span>
<a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=kn>from</span><span class=w> </span><span class=nn>functools</span><span class=w> </span><span class=kn>import</span> <span class=n>wraps</span>            <span class=c1># wraps: preserva metadatos de la funciÃ³n original (nombre, docstring) al decorarla.</span>
<a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a>
<a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=k>def</span><span class=w> </span><span class=nf>medir_tiempo</span><span class=p>(</span><span class=n>func</span><span class=p>):</span>                <span class=c1># Un decorador es una funciÃ³n que RECIBE otra funciÃ³n como parÃ¡metro.</span>
<a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Decorador que mide el tiempo de ejecuciÃ³n de una funciÃ³n.&quot;&quot;&quot;</span>
<a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a>    <span class=nd>@wraps</span><span class=p>(</span><span class=n>func</span><span class=p>)</span>                       <span class=c1># @wraps(func): copia __name__, __doc__ de func a wrapper. Sin esto, se pierde el nombre original.</span>
<a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a>    <span class=k>def</span><span class=w> </span><span class=nf>wrapper</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>):</span>      <span class=c1># wrapper: funciÃ³n interna que &quot;envuelve&quot; a la original. *args/**kwargs capturan cualquier argumento.</span>
<a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a>        <span class=n>inicio</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>           <span class=c1># Guarda el tiempo ANTES de ejecutar la funciÃ³n.</span>
<a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a>        <span class=n>resultado</span> <span class=o>=</span> <span class=n>func</span><span class=p>(</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>  <span class=c1># Ejecuta la funciÃ³n original con sus argumentos. func es la funciÃ³n decorada.</span>
<a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a>        <span class=n>fin</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>time</span><span class=p>()</span>              <span class=c1># Guarda el tiempo DESPUÃ‰S de ejecutar.</span>
<a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a>        <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;â±ï¸ </span><span class=si>{</span><span class=n>func</span><span class=o>.</span><span class=vm>__name__</span><span class=si>}</span><span class=s2> tardÃ³ </span><span class=si>{</span><span class=n>fin</span><span class=w> </span><span class=o>-</span><span class=w> </span><span class=n>inicio</span><span class=si>:</span><span class=s2>.2f</span><span class=si>}</span><span class=s2>s&quot;</span><span class=p>)</span>  <span class=c1># __name__: nombre de la funciÃ³n. :.2f formatea a 2 decimales.</span>
<a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a>        <span class=k>return</span> <span class=n>resultado</span>               <span class=c1># Retorna lo que retornÃ³ la funciÃ³n original (no &quot;comerse&quot; el resultado).</span>
<a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a>    <span class=k>return</span> <span class=n>wrapper</span>                     <span class=c1># El decorador retorna la funciÃ³n wrapper, que reemplaza a la original.</span>
<a id=__codelineno-5-18 name=__codelineno-5-18 href=#__codelineno-5-18></a>
<a id=__codelineno-5-19 name=__codelineno-5-19 href=#__codelineno-5-19></a><span class=c1># Uso:</span>
<a id=__codelineno-5-20 name=__codelineno-5-20 href=#__codelineno-5-20></a><span class=nd>@medir_tiempo</span>                          <span class=c1># @decorador es equivalente a: entrenar_modelo = medir_tiempo(entrenar_modelo)</span>
<a id=__codelineno-5-21 name=__codelineno-5-21 href=#__codelineno-5-21></a><span class=k>def</span><span class=w> </span><span class=nf>entrenar_modelo</span><span class=p>(</span><span class=n>X</span><span class=p>,</span> <span class=n>y</span><span class=p>):</span>             <span class=c1># Esta funciÃ³n ahora estÃ¡ &quot;envuelta&quot; por wrapper. Al llamarla, ejecuta wrapper.</span>
<a id=__codelineno-5-22 name=__codelineno-5-22 href=#__codelineno-5-22></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Entrena un modelo (simulado).&quot;&quot;&quot;</span>
<a id=__codelineno-5-23 name=__codelineno-5-23 href=#__codelineno-5-23></a>    <span class=n>time</span><span class=o>.</span><span class=n>sleep</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span>                      <span class=c1># sleep(2): pausa 2 segundos. Simula un proceso que tarda (como entrenar un modelo).</span>
<a id=__codelineno-5-24 name=__codelineno-5-24 href=#__codelineno-5-24></a>    <span class=k>return</span> <span class=s2>&quot;modelo_entrenado&quot;</span>          <span class=c1># Retorna un string (en la realidad serÃ­a el modelo entrenado).</span>
<a id=__codelineno-5-25 name=__codelineno-5-25 href=#__codelineno-5-25></a>
<a id=__codelineno-5-26 name=__codelineno-5-26 href=#__codelineno-5-26></a><span class=n>modelo</span> <span class=o>=</span> <span class=n>entrenar_modelo</span><span class=p>(</span><span class=kc>None</span><span class=p>,</span> <span class=kc>None</span><span class=p>)</span>   <span class=c1># Llamar entrenar_modelo() realmente llama a wrapper(), que mide tiempo y llama a la original.</span>
<a id=__codelineno-5-27 name=__codelineno-5-27 href=#__codelineno-5-27></a><span class=c1># Output: â±ï¸ entrenar_modelo tardÃ³ 2.00s  # El decorador aÃ±adiÃ³ comportamiento (medir tiempo) SIN modificar la funciÃ³n original.</span>
<a id=__codelineno-5-28 name=__codelineno-5-28 href=#__codelineno-5-28></a>
<a id=__codelineno-5-29 name=__codelineno-5-29 href=#__codelineno-5-29></a><span class=c1># En el portafolio verÃ¡s decoradores para:</span>
<a id=__codelineno-5-30 name=__codelineno-5-30 href=#__codelineno-5-30></a><span class=c1># - Logging automÃ¡tico de funciones    # Registrar cada llamada a funciÃ³n con sus parÃ¡metros.</span>
<a id=__codelineno-5-31 name=__codelineno-5-31 href=#__codelineno-5-31></a><span class=c1># - Caching de resultados costosos     # @lru_cache: guarda resultados para no recalcular.</span>
<a id=__codelineno-5-32 name=__codelineno-5-32 href=#__codelineno-5-32></a><span class=c1># - ValidaciÃ³n de inputs/outputs       # Verificar tipos o rangos antes/despuÃ©s de ejecutar.</span>
<a id=__codelineno-5-33 name=__codelineno-5-33 href=#__codelineno-5-33></a><span class=c1># - Retry de operaciones que pueden fallar  # Reintentar N veces si hay error (Ãºtil para APIs, BD).</span>
</code></pre></div> <h3 id=context-managers-recursos-que-se-limpian-solos>Context Managers: Recursos que se Limpian Solos<a class=headerlink href=#context-managers-recursos-que-se-limpian-solos title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=c1># CONTEXT MANAGERS: Cruciales para archivos, conexiones, MLflow runs</span>
<a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a>
<a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=c1># âŒ PROBLEMA: Si hay un error, el archivo queda abierto</span>
<a id=__codelineno-6-6 name=__codelineno-6-6 href=#__codelineno-6-6></a><span class=n>f</span> <span class=o>=</span> <span class=nb>open</span><span class=p>(</span><span class=s2>&quot;data.csv&quot;</span><span class=p>,</span> <span class=s2>&quot;r&quot;</span><span class=p>)</span>              <span class=c1># open(): abre un archivo. &quot;r&quot; = modo lectura. Retorna un objeto file.</span>
<a id=__codelineno-6-7 name=__codelineno-6-7 href=#__codelineno-6-7></a><span class=n>data</span> <span class=o>=</span> <span class=n>f</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>                        <span class=c1># read(): lee TODO el contenido del archivo a memoria (cuidado con archivos grandes).</span>
<a id=__codelineno-6-8 name=__codelineno-6-8 href=#__codelineno-6-8></a><span class=c1># ... si algo falla aquÃ­, f nunca se cierra  # Si ocurre una excepciÃ³n, el cÃ³digo salta y f.close() nunca se ejecuta.</span>
<a id=__codelineno-6-9 name=__codelineno-6-9 href=#__codelineno-6-9></a><span class=n>f</span><span class=o>.</span><span class=n>close</span><span class=p>()</span>                              <span class=c1># close(): libera el recurso. Sin cerrar, puedes agotar file descriptors del sistema.</span>
<a id=__codelineno-6-10 name=__codelineno-6-10 href=#__codelineno-6-10></a>
<a id=__codelineno-6-11 name=__codelineno-6-11 href=#__codelineno-6-11></a><span class=c1># âœ… SOLUCIÃ“N: with garantiza que el archivo se cierre</span>
<a id=__codelineno-6-12 name=__codelineno-6-12 href=#__codelineno-6-12></a><span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s2>&quot;data.csv&quot;</span><span class=p>,</span> <span class=s2>&quot;r&quot;</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>       <span class=c1># with: inicia un &quot;context manager&quot;. &quot;as f&quot; asigna el archivo a la variable f.</span>
<a id=__codelineno-6-13 name=__codelineno-6-13 href=#__codelineno-6-13></a>    <span class=n>data</span> <span class=o>=</span> <span class=n>f</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>                    <span class=c1># El cÃ³digo dentro del with tiene acceso a f.</span>
<a id=__codelineno-6-14 name=__codelineno-6-14 href=#__codelineno-6-14></a><span class=c1># f se cierra automÃ¡ticamente, incluso si hay error  # Al salir del with (normal o por excepciÃ³n), Python llama f.__exit__() que cierra el archivo.</span>
<a id=__codelineno-6-15 name=__codelineno-6-15 href=#__codelineno-6-15></a>
<a id=__codelineno-6-16 name=__codelineno-6-16 href=#__codelineno-6-16></a><span class=c1># En MLflow (que usarÃ¡s en el mÃ³dulo 10):</span>
<a id=__codelineno-6-17 name=__codelineno-6-17 href=#__codelineno-6-17></a><span class=kn>import</span><span class=w> </span><span class=nn>mlflow</span>                          <span class=c1># mlflow: librerÃ­a para tracking de experimentos ML. VerÃ¡s mÃ¡s en mÃ³dulo 10.</span>
<a id=__codelineno-6-18 name=__codelineno-6-18 href=#__codelineno-6-18></a>
<a id=__codelineno-6-19 name=__codelineno-6-19 href=#__codelineno-6-19></a><span class=k>with</span> <span class=n>mlflow</span><span class=o>.</span><span class=n>start_run</span><span class=p>(</span><span class=n>run_name</span><span class=o>=</span><span class=s2>&quot;experimento_1&quot;</span><span class=p>):</span>  <span class=c1># start_run(): inicia un &quot;run&quot; de MLflow. Es un context manager.</span>
<a id=__codelineno-6-20 name=__codelineno-6-20 href=#__codelineno-6-20></a>    <span class=n>mlflow</span><span class=o>.</span><span class=n>log_param</span><span class=p>(</span><span class=s2>&quot;n_estimators&quot;</span><span class=p>,</span> <span class=mi>100</span><span class=p>)</span>         <span class=c1># log_param(): registra un hiperparÃ¡metro. Se guarda asociado al run.</span>
<a id=__codelineno-6-21 name=__codelineno-6-21 href=#__codelineno-6-21></a>    <span class=n>mlflow</span><span class=o>.</span><span class=n>log_metric</span><span class=p>(</span><span class=s2>&quot;f1_score&quot;</span><span class=p>,</span> <span class=mf>0.85</span><span class=p>)</span>           <span class=c1># log_metric(): registra una mÃ©trica. Puedes ver esto en la UI de MLflow.</span>
<a id=__codelineno-6-22 name=__codelineno-6-22 href=#__codelineno-6-22></a>    <span class=c1># El run se cierra automÃ¡ticamente al salir del with  # MLflow guarda todo y marca el run como finalizado.</span>
</code></pre></div> <h3 id=comprehensions-codigo-conciso-y-pythonico>Comprehensions: CÃ³digo Conciso y PythÃ³nico<a class=headerlink href=#comprehensions-codigo-conciso-y-pythonico title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=c1># COMPREHENSIONS: Transformaciones elegantes de datos</span>
<a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a>
<a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=c1># List comprehension (muy comÃºn en ML)</span>
<a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a><span class=n>columnas</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&quot;CreditScore&quot;</span><span class=p>,</span> <span class=s2>&quot;Age&quot;</span><span class=p>,</span> <span class=s2>&quot;Balance&quot;</span><span class=p>,</span> <span class=s2>&quot;Exited&quot;</span><span class=p>]</span>  <span class=c1># Lista de strings con nombres de columnas.</span>
<a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a><span class=n>columnas_numericas</span> <span class=o>=</span> <span class=p>[</span><span class=n>col</span> <span class=k>for</span> <span class=n>col</span> <span class=ow>in</span> <span class=n>columnas</span> <span class=k>if</span> <span class=n>col</span> <span class=o>!=</span> <span class=s2>&quot;Exited&quot;</span><span class=p>]</span>  <span class=c1># [expresiÃ³n for variable in iterable if condiciÃ³n]</span>
<a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a><span class=c1># [&#39;CreditScore&#39;, &#39;Age&#39;, &#39;Balance&#39;]  # Resultado: lista con todos los elementos EXCEPTO &quot;Exited&quot;.</span>
<a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a><span class=c1># Equivale a:                        # Es equivalente a un for loop, pero en UNA lÃ­nea:</span>
<a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a><span class=c1># columnas_numericas = []            # result = []</span>
<a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a><span class=c1># for col in columnas:               # for col in columnas:</span>
<a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a><span class=c1>#     if col != &quot;Exited&quot;:            #     if col != &quot;Exited&quot;:</span>
<a id=__codelineno-7-13 name=__codelineno-7-13 href=#__codelineno-7-13></a><span class=c1>#         columnas_numericas.append(col)  #         result.append(col)</span>
<a id=__codelineno-7-14 name=__codelineno-7-14 href=#__codelineno-7-14></a>
<a id=__codelineno-7-15 name=__codelineno-7-15 href=#__codelineno-7-15></a><span class=c1># Dict comprehension (Ãºtil para mÃ©tricas)</span>
<a id=__codelineno-7-16 name=__codelineno-7-16 href=#__codelineno-7-16></a><span class=n>metricas</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;accuracy&quot;</span><span class=p>:</span> <span class=mf>0.85</span><span class=p>,</span> <span class=s2>&quot;precision&quot;</span><span class=p>:</span> <span class=mf>0.78</span><span class=p>,</span> <span class=s2>&quot;recall&quot;</span><span class=p>:</span> <span class=mf>0.72</span><span class=p>}</span>  <span class=c1># Diccionario: {clave: valor}.</span>
<a id=__codelineno-7-17 name=__codelineno-7-17 href=#__codelineno-7-17></a><span class=n>metricas_redondeadas</span> <span class=o>=</span> <span class=p>{</span><span class=n>k</span><span class=p>:</span> <span class=nb>round</span><span class=p>(</span><span class=n>v</span><span class=p>,</span> <span class=mi>2</span><span class=p>)</span> <span class=k>for</span> <span class=n>k</span><span class=p>,</span> <span class=n>v</span> <span class=ow>in</span> <span class=n>metricas</span><span class=o>.</span><span class=n>items</span><span class=p>()}</span>  <span class=c1># {clave: valor for clave, valor in dict.items()}</span>
<a id=__codelineno-7-18 name=__codelineno-7-18 href=#__codelineno-7-18></a><span class=c1># items(): retorna pares (clave, valor). round(v, 2): redondea v a 2 decimales.</span>
<a id=__codelineno-7-19 name=__codelineno-7-19 href=#__codelineno-7-19></a>
<a id=__codelineno-7-20 name=__codelineno-7-20 href=#__codelineno-7-20></a><span class=c1># Filtrar columnas por tipo (patrÃ³n comÃºn en feature engineering)</span>
<a id=__codelineno-7-21 name=__codelineno-7-21 href=#__codelineno-7-21></a><span class=kn>import</span><span class=w> </span><span class=nn>pandas</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>pd</span>                  <span class=c1># pandas ya se explicÃ³ arriba; aquÃ­ se re-importa por claridad del ejemplo.</span>
<a id=__codelineno-7-22 name=__codelineno-7-22 href=#__codelineno-7-22></a><span class=n>df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>({</span><span class=s2>&quot;A&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mi>1</span><span class=p>,</span> <span class=mi>2</span><span class=p>],</span> <span class=s2>&quot;B&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;x&quot;</span><span class=p>,</span> <span class=s2>&quot;y&quot;</span><span class=p>],</span> <span class=s2>&quot;C&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mf>1.5</span><span class=p>,</span> <span class=mf>2.5</span><span class=p>]})</span>  <span class=c1># DataFrame: tabla con 3 columnas.</span>
<a id=__codelineno-7-23 name=__codelineno-7-23 href=#__codelineno-7-23></a><span class=n>columnas_numericas</span> <span class=o>=</span> <span class=p>[</span><span class=n>col</span> <span class=k>for</span> <span class=n>col</span> <span class=ow>in</span> <span class=n>df</span><span class=o>.</span><span class=n>columns</span> <span class=k>if</span> <span class=n>df</span><span class=p>[</span><span class=n>col</span><span class=p>]</span><span class=o>.</span><span class=n>dtype</span> <span class=ow>in</span> <span class=p>[</span><span class=s2>&quot;int64&quot;</span><span class=p>,</span> <span class=s2>&quot;float64&quot;</span><span class=p>]]</span>
<a id=__codelineno-7-24 name=__codelineno-7-24 href=#__codelineno-7-24></a><span class=c1># df.columns: lista de nombres de columnas. df[col].dtype: tipo de datos de esa columna.</span>
<a id=__codelineno-7-25 name=__codelineno-7-25 href=#__codelineno-7-25></a><span class=c1># &quot;int64&quot;, &quot;float64&quot;: tipos numÃ©ricos de pandas/numpy. Este patrÃ³n filtra SOLO columnas numÃ©ricas.</span>
<a id=__codelineno-7-26 name=__codelineno-7-26 href=#__codelineno-7-26></a>
<a id=__codelineno-7-27 name=__codelineno-7-27 href=#__codelineno-7-27></a><span class=c1># Crear diccionario de features categÃ³ricas a codificar</span>
<a id=__codelineno-7-28 name=__codelineno-7-28 href=#__codelineno-7-28></a><span class=n>cat_cols</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&quot;Geography&quot;</span><span class=p>,</span> <span class=s2>&quot;Gender&quot;</span><span class=p>]</span>   <span class=c1># Lista de columnas categÃ³ricas que queremos codificar.</span>
<a id=__codelineno-7-29 name=__codelineno-7-29 href=#__codelineno-7-29></a><span class=n>encoding_map</span> <span class=o>=</span> <span class=p>{</span><span class=n>col</span><span class=p>:</span> <span class=n>df</span><span class=p>[</span><span class=n>col</span><span class=p>]</span><span class=o>.</span><span class=n>unique</span><span class=p>()</span><span class=o>.</span><span class=n>tolist</span><span class=p>()</span> <span class=k>for</span> <span class=n>col</span> <span class=ow>in</span> <span class=n>cat_cols</span><span class=p>}</span>
<a id=__codelineno-7-30 name=__codelineno-7-30 href=#__codelineno-7-30></a><span class=c1># unique(): valores Ãºnicos de la columna. tolist(): convierte array a lista Python.</span>
<a id=__codelineno-7-31 name=__codelineno-7-31 href=#__codelineno-7-31></a><span class=c1># Resultado: {&quot;Geography&quot;: [&quot;France&quot;, &quot;Spain&quot;, ...], &quot;Gender&quot;: [&quot;Male&quot;, &quot;Female&quot;]}</span>
</code></pre></div> <h3 id=manejo-de-excepciones-codigo-que-no-se-rompe>Manejo de Excepciones: CÃ³digo que No se Rompe<a class=headerlink href=#manejo-de-excepciones-codigo-que-no-se-rompe title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=c1># EXCEPCIONES: Anticipar y manejar errores profesionalmente</span>
<a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>
<a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=kn>from</span><span class=w> </span><span class=nn>pathlib</span><span class=w> </span><span class=kn>import</span> <span class=n>Path</span>                <span class=c1># Path: clase para manejar rutas de archivos de forma segura y multiplataforma.</span>
<a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a><span class=kn>import</span><span class=w> </span><span class=nn>logging</span>                          <span class=c1># logging: mÃ³dulo estÃ¡ndar para registrar mensajes (mejor que print en producciÃ³n).</span>
<a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a>
<a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a><span class=n>logger</span> <span class=o>=</span> <span class=n>logging</span><span class=o>.</span><span class=n>getLogger</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>    <span class=c1># getLogger(__name__): crea un logger con el nombre del mÃ³dulo actual.</span>
<a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a>                                        <span class=c1># __name__ es una variable especial que contiene el nombre del mÃ³dulo.</span>
<a id=__codelineno-8-10 name=__codelineno-8-10 href=#__codelineno-8-10></a>
<a id=__codelineno-8-11 name=__codelineno-8-11 href=#__codelineno-8-11></a><span class=k>def</span><span class=w> </span><span class=nf>cargar_modelo</span><span class=p>(</span><span class=n>path</span><span class=p>:</span> <span class=n>Path</span><span class=p>):</span>          <span class=c1># FunciÃ³n que recibe un Path (no string) â†’ mÃ¡s seguro y con autocompletado.</span>
<a id=__codelineno-8-12 name=__codelineno-8-12 href=#__codelineno-8-12></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Carga un modelo serializado con manejo de errores.</span>
<a id=__codelineno-8-13 name=__codelineno-8-13 href=#__codelineno-8-13></a>
<a id=__codelineno-8-14 name=__codelineno-8-14 href=#__codelineno-8-14></a><span class=sd>    Args:</span>
<a id=__codelineno-8-15 name=__codelineno-8-15 href=#__codelineno-8-15></a><span class=sd>        path: Ruta al archivo .joblib del modelo.</span>
<a id=__codelineno-8-16 name=__codelineno-8-16 href=#__codelineno-8-16></a>
<a id=__codelineno-8-17 name=__codelineno-8-17 href=#__codelineno-8-17></a><span class=sd>    Returns:</span>
<a id=__codelineno-8-18 name=__codelineno-8-18 href=#__codelineno-8-18></a><span class=sd>        Modelo cargado.</span>
<a id=__codelineno-8-19 name=__codelineno-8-19 href=#__codelineno-8-19></a>
<a id=__codelineno-8-20 name=__codelineno-8-20 href=#__codelineno-8-20></a><span class=sd>    Raises:                              # Raises: documenta quÃ© excepciones puede lanzar esta funciÃ³n.</span>
<a id=__codelineno-8-21 name=__codelineno-8-21 href=#__codelineno-8-21></a><span class=sd>        FileNotFoundError: Si el archivo no existe.</span>
<a id=__codelineno-8-22 name=__codelineno-8-22 href=#__codelineno-8-22></a><span class=sd>        ValueError: Si el archivo no contiene un modelo vÃ¡lido.</span>
<a id=__codelineno-8-23 name=__codelineno-8-23 href=#__codelineno-8-23></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-8-24 name=__codelineno-8-24 href=#__codelineno-8-24></a>    <span class=k>if</span> <span class=ow>not</span> <span class=n>path</span><span class=o>.</span><span class=n>exists</span><span class=p>():</span>                <span class=c1># exists(): mÃ©todo de Path que verifica si el archivo/carpeta existe.</span>
<a id=__codelineno-8-25 name=__codelineno-8-25 href=#__codelineno-8-25></a>        <span class=k>raise</span> <span class=ne>FileNotFoundError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Modelo no encontrado: </span><span class=si>{</span><span class=n>path</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>  <span class=c1># raise: lanza una excepciÃ³n. El programa se detiene aquÃ­.</span>
<a id=__codelineno-8-26 name=__codelineno-8-26 href=#__codelineno-8-26></a>
<a id=__codelineno-8-27 name=__codelineno-8-27 href=#__codelineno-8-27></a>    <span class=k>try</span><span class=p>:</span>                                 <span class=c1># try: intenta ejecutar el cÃ³digo. Si falla, salta al except.</span>
<a id=__codelineno-8-28 name=__codelineno-8-28 href=#__codelineno-8-28></a>        <span class=kn>import</span><span class=w> </span><span class=nn>joblib</span>                    <span class=c1># joblib: librerÃ­a para serializar objetos Python (modelos sklearn).</span>
<a id=__codelineno-8-29 name=__codelineno-8-29 href=#__codelineno-8-29></a>        <span class=n>modelo</span> <span class=o>=</span> <span class=n>joblib</span><span class=o>.</span><span class=n>load</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>       <span class=c1># load(): deserializa el archivo y retorna el objeto Python guardado.</span>
<a id=__codelineno-8-30 name=__codelineno-8-30 href=#__codelineno-8-30></a>    <span class=k>except</span> <span class=ne>Exception</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>               <span class=c1># except: captura la excepciÃ³n si algo fallÃ³ en el try. &quot;as e&quot; guarda el error.</span>
<a id=__codelineno-8-31 name=__codelineno-8-31 href=#__codelineno-8-31></a>        <span class=n>logger</span><span class=o>.</span><span class=n>error</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Error cargando modelo: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>  <span class=c1># error(): registra un mensaje de nivel ERROR en el log.</span>
<a id=__codelineno-8-32 name=__codelineno-8-32 href=#__codelineno-8-32></a>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Archivo invÃ¡lido: </span><span class=si>{</span><span class=n>path</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span> <span class=kn>from</span><span class=w> </span><span class=nn>e</span>  <span class=c1># from e: encadena excepciones (muestra la causa original).</span>
<a id=__codelineno-8-33 name=__codelineno-8-33 href=#__codelineno-8-33></a>
<a id=__codelineno-8-34 name=__codelineno-8-34 href=#__codelineno-8-34></a>    <span class=c1># Validar que sea un modelo sklearn</span>
<a id=__codelineno-8-35 name=__codelineno-8-35 href=#__codelineno-8-35></a>    <span class=k>if</span> <span class=ow>not</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>modelo</span><span class=p>,</span> <span class=s2>&quot;predict&quot;</span><span class=p>):</span>   <span class=c1># hasattr(): verifica si el objeto tiene un atributo/mÃ©todo. Todos los modelos sklearn tienen predict().</span>
<a id=__codelineno-8-36 name=__codelineno-8-36 href=#__codelineno-8-36></a>        <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;El archivo no contiene un modelo vÃ¡lido: </span><span class=si>{</span><span class=n>path</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-8-37 name=__codelineno-8-37 href=#__codelineno-8-37></a>
<a id=__codelineno-8-38 name=__codelineno-8-38 href=#__codelineno-8-38></a>    <span class=n>logger</span><span class=o>.</span><span class=n>info</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Modelo cargado exitosamente: </span><span class=si>{</span><span class=n>path</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>  <span class=c1># info(): mensaje informativo (menos grave que error).</span>
<a id=__codelineno-8-39 name=__codelineno-8-39 href=#__codelineno-8-39></a>    <span class=k>return</span> <span class=n>modelo</span>                        <span class=c1># Si llegamos aquÃ­, todo saliÃ³ bien. Retornamos el modelo cargado.</span>
<a id=__codelineno-8-40 name=__codelineno-8-40 href=#__codelineno-8-40></a>
<a id=__codelineno-8-41 name=__codelineno-8-41 href=#__codelineno-8-41></a><span class=c1># Uso con manejo de error</span>
<a id=__codelineno-8-42 name=__codelineno-8-42 href=#__codelineno-8-42></a><span class=k>try</span><span class=p>:</span>                                     <span class=c1># try/except: patrÃ³n para manejar errores sin que el programa crashee.</span>
<a id=__codelineno-8-43 name=__codelineno-8-43 href=#__codelineno-8-43></a>    <span class=n>modelo</span> <span class=o>=</span> <span class=n>cargar_modelo</span><span class=p>(</span><span class=n>Path</span><span class=p>(</span><span class=s2>&quot;models/pipeline.joblib&quot;</span><span class=p>))</span>  <span class=c1># Path(): convierte string a objeto Path.</span>
<a id=__codelineno-8-44 name=__codelineno-8-44 href=#__codelineno-8-44></a><span class=k>except</span> <span class=ne>FileNotFoundError</span><span class=p>:</span>                <span class=c1># Captura SOLO FileNotFoundError. Otros errores no se capturan aquÃ­.</span>
<a id=__codelineno-8-45 name=__codelineno-8-45 href=#__codelineno-8-45></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;âš ï¸ Modelo no encontrado. Ejecuta &#39;make train&#39; primero.&quot;</span><span class=p>)</span>  <span class=c1># Mensaje amigable al usuario.</span>
<a id=__codelineno-8-46 name=__codelineno-8-46 href=#__codelineno-8-46></a><span class=k>except</span> <span class=ne>ValueError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>                  <span class=c1># Captura ValueError. &quot;as e&quot; permite acceder al mensaje de error.</span>
<a id=__codelineno-8-47 name=__codelineno-8-47 href=#__codelineno-8-47></a>    <span class=nb>print</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;âŒ Error de validaciÃ³n: </span><span class=si>{</span><span class=n>e</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>  <span class=c1># f-string con el error especÃ­fico.</span>
</code></pre></div> <h3 id=ejercicio-de-auto-evaluacion-estas-listo>ğŸ¯ Ejercicio de Auto-evaluaciÃ³n: Â¿EstÃ¡s Listo?<a class=headerlink href=#ejercicio-de-auto-evaluacion-estas-listo title="Permanent link">&para;</a></h3> <p>Antes de continuar, verifica que puedes responder estas preguntas:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=c1># 1. Â¿QuÃ© hace este cÃ³digo?</span>
<a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=k>def</span><span class=w> </span><span class=nf>process</span><span class=p>(</span><span class=n>items</span><span class=p>:</span> <span class=nb>list</span><span class=p>[</span><span class=nb>str</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>int</span><span class=p>]:</span>
<a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a>    <span class=k>return</span> <span class=p>{</span><span class=n>item</span><span class=p>:</span> <span class=nb>len</span><span class=p>(</span><span class=n>item</span><span class=p>)</span> <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=n>items</span> <span class=k>if</span> <span class=n>item</span><span class=p>}</span>
<a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a>
<a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=c1># 2. Â¿Por quÃ© esto es mejor que usar un diccionario?</span>
<a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a><span class=nd>@dataclass</span>
<a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a><span class=k>class</span><span class=w> </span><span class=nc>Config</span><span class=p>:</span>
<a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a>    <span class=n>batch_size</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>32</span>
<a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a>    <span class=n>learning_rate</span><span class=p>:</span> <span class=nb>float</span> <span class=o>=</span> <span class=mf>0.001</span>
<a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a>
<a id=__codelineno-9-11 name=__codelineno-9-11 href=#__codelineno-9-11></a><span class=c1># 3. Â¿QuÃ© problema evita el &quot;with&quot;?</span>
<a id=__codelineno-9-12 name=__codelineno-9-12 href=#__codelineno-9-12></a><span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=s2>&quot;file.txt&quot;</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
<a id=__codelineno-9-13 name=__codelineno-9-13 href=#__codelineno-9-13></a>    <span class=n>data</span> <span class=o>=</span> <span class=n>f</span><span class=o>.</span><span class=n>read</span><span class=p>()</span>
<a id=__codelineno-9-14 name=__codelineno-9-14 href=#__codelineno-9-14></a>
<a id=__codelineno-9-15 name=__codelineno-9-15 href=#__codelineno-9-15></a><span class=c1># 4. Â¿QuÃ© imprime este cÃ³digo?</span>
<a id=__codelineno-9-16 name=__codelineno-9-16 href=#__codelineno-9-16></a><span class=k>def</span><span class=w> </span><span class=nf>decorator</span><span class=p>(</span><span class=n>func</span><span class=p>):</span>
<a id=__codelineno-9-17 name=__codelineno-9-17 href=#__codelineno-9-17></a>    <span class=k>def</span><span class=w> </span><span class=nf>wrapper</span><span class=p>():</span>
<a id=__codelineno-9-18 name=__codelineno-9-18 href=#__codelineno-9-18></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;antes&quot;</span><span class=p>)</span>
<a id=__codelineno-9-19 name=__codelineno-9-19 href=#__codelineno-9-19></a>        <span class=n>func</span><span class=p>()</span>
<a id=__codelineno-9-20 name=__codelineno-9-20 href=#__codelineno-9-20></a>        <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;despuÃ©s&quot;</span><span class=p>)</span>
<a id=__codelineno-9-21 name=__codelineno-9-21 href=#__codelineno-9-21></a>    <span class=k>return</span> <span class=n>wrapper</span>
<a id=__codelineno-9-22 name=__codelineno-9-22 href=#__codelineno-9-22></a>
<a id=__codelineno-9-23 name=__codelineno-9-23 href=#__codelineno-9-23></a><span class=nd>@decorator</span>
<a id=__codelineno-9-24 name=__codelineno-9-24 href=#__codelineno-9-24></a><span class=k>def</span><span class=w> </span><span class=nf>hello</span><span class=p>():</span>
<a id=__codelineno-9-25 name=__codelineno-9-25 href=#__codelineno-9-25></a>    <span class=nb>print</span><span class=p>(</span><span class=s2>&quot;hola&quot;</span><span class=p>)</span>
<a id=__codelineno-9-26 name=__codelineno-9-26 href=#__codelineno-9-26></a>
<a id=__codelineno-9-27 name=__codelineno-9-27 href=#__codelineno-9-27></a><span class=n>hello</span><span class=p>()</span>
</code></pre></div> <details> <summary>ğŸ” Ver respuestas</summary> 1. **Crea un diccionario** donde las keys son strings no vacÃ­os y los values son sus longitudes. 2. **ValidaciÃ³n y documentaciÃ³n automÃ¡tica**: `@dataclass` genera `__init__`, `__repr__`, y permite type hints. Un diccionario no valida tipos ni tiene autocompletado en el IDE. 3. **Evita dejar archivos abiertos**: Si hay un error dentro del `with`, el archivo se cierra automÃ¡ticamente. 4. **Imprime**: <div class=highlight><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a>antes
<a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a>hola
<a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a>despuÃ©s
</code></pre></div> El decorador "envuelve" la funciÃ³n original. </details> <hr> <p><a id=11-type-hints-tu-contrato-con-el-futuro></a></p> <h2 id=11-type-hints-tu-contrato-con-el-futuro>1.1 Type Hints: Tu Contrato con el Futuro<a class=headerlink href=#11-type-hints-tu-contrato-con-el-futuro title="Permanent link">&para;</a></h2> <h3 id=la-analogia-del-restaurante>La AnalogÃ­a del Restaurante<a class=headerlink href=#la-analogia-del-restaurante title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a>â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
<a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a>â•‘  ğŸ½ï¸ IMAGINA UN RESTAURANTE:                                               â•‘
<a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a>â•‘                                                                           â•‘
<a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a>â•‘  SIN MENÃš (cÃ³digo sin tipos):                                             â•‘
<a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a>â•‘  - &quot;TrÃ¡eme algo de comer&quot;                                                 â•‘
<a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a>â•‘  - El chef improvisa                                                      â•‘
<a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a>â•‘  - El cliente no sabe quÃ© esperar                                         â•‘
<a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a>â•‘  - Resultado: sorpresas (bugs)                                            â•‘
<a id=__codelineno-11-9 name=__codelineno-11-9 href=#__codelineno-11-9></a>â•‘                                                                           â•‘
<a id=__codelineno-11-10 name=__codelineno-11-10 href=#__codelineno-11-10></a>â•‘  CON MENÃš (cÃ³digo con tipos):                                             â•‘
<a id=__codelineno-11-11 name=__codelineno-11-11 href=#__codelineno-11-11></a>â•‘  - &quot;Quiero el plato #5: Pasta Carbonara&quot;                                  â•‘
<a id=__codelineno-11-12 name=__codelineno-11-12 href=#__codelineno-11-12></a>â•‘  - El chef sabe exactamente quÃ© preparar                                  â•‘
<a id=__codelineno-11-13 name=__codelineno-11-13 href=#__codelineno-11-13></a>â•‘  - El cliente sabe quÃ© recibirÃ¡                                           â•‘
<a id=__codelineno-11-14 name=__codelineno-11-14 href=#__codelineno-11-14></a>â•‘  - Resultado: consistencia                                                â•‘
<a id=__codelineno-11-15 name=__codelineno-11-15 href=#__codelineno-11-15></a>â•‘                                                                           â•‘
<a id=__codelineno-11-16 name=__codelineno-11-16 href=#__codelineno-11-16></a>â•‘  TYPE HINTS = El menÃº de tu cÃ³digo                                        â•‘
<a id=__codelineno-11-17 name=__codelineno-11-17 href=#__codelineno-11-17></a>â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
</code></pre></div> <h3 id=codigo-real-del-portafolio-sin-tipos-vs-con-tipos>CÃ³digo Real del Portafolio: Sin Tipos vs Con Tipos<a class=headerlink href=#codigo-real-del-portafolio-sin-tipos-vs-con-tipos title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=c1># âŒ ANTES: Â¿QuÃ© recibe? Â¿QuÃ© retorna? </span>
<a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=c1># (Esto es lo que encontrarÃ­as en un notebook)</span>
<a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a>
<a id=__codelineno-12-4 name=__codelineno-12-4 href=#__codelineno-12-4></a><span class=k>def</span><span class=w> </span><span class=nf>prepare_features</span><span class=p>(</span><span class=n>df</span><span class=p>,</span> <span class=n>num_cols</span><span class=p>,</span> <span class=n>cat_cols</span><span class=p>,</span> <span class=n>target</span><span class=p>):</span>  <span class=c1># Define una funciÃ³n sin type hints: no sabemos tipos esperados ni retornos.</span>
<a id=__codelineno-12-5 name=__codelineno-12-5 href=#__codelineno-12-5></a>    <span class=n>X</span> <span class=o>=</span> <span class=n>df</span><span class=o>.</span><span class=n>drop</span><span class=p>(</span><span class=n>columns</span><span class=o>=</span><span class=p>[</span><span class=n>target</span><span class=p>])</span>  <span class=c1># Separa features (X) eliminando la columna objetivo del DataFrame.</span>
<a id=__codelineno-12-6 name=__codelineno-12-6 href=#__codelineno-12-6></a>    <span class=n>y</span> <span class=o>=</span> <span class=n>df</span><span class=p>[</span><span class=n>target</span><span class=p>]</span>  <span class=c1># Extrae el target (y) como una Serie; asume que `target` existe y estÃ¡ bien escrito.</span>
<a id=__codelineno-12-7 name=__codelineno-12-7 href=#__codelineno-12-7></a>
<a id=__codelineno-12-8 name=__codelineno-12-8 href=#__codelineno-12-8></a>    <span class=n>preprocessor</span> <span class=o>=</span> <span class=n>ColumnTransformer</span><span class=p>([</span>  <span class=c1># Crea un transformador por columnas: aplica pipelines distintos a columnas numÃ©ricas vs categÃ³ricas.</span>
<a id=__codelineno-12-9 name=__codelineno-12-9 href=#__codelineno-12-9></a>        <span class=p>(</span><span class=s1>&#39;num&#39;</span><span class=p>,</span> <span class=n>StandardScaler</span><span class=p>(),</span> <span class=n>num_cols</span><span class=p>),</span>  <span class=c1># (nombre, transformer, columnas): escala numÃ©ricas a media=0, var=1 (ayuda a muchos modelos).</span>
<a id=__codelineno-12-10 name=__codelineno-12-10 href=#__codelineno-12-10></a>        <span class=p>(</span><span class=s1>&#39;cat&#39;</span><span class=p>,</span> <span class=n>OneHotEncoder</span><span class=p>(),</span> <span class=n>cat_cols</span><span class=p>)</span>  <span class=c1># One-hot a categÃ³ricas; por defecto puede fallar si aparece una categorÃ­a nueva en inferencia.</span>
<a id=__codelineno-12-11 name=__codelineno-12-11 href=#__codelineno-12-11></a>    <span class=p>])</span>  <span class=c1># Termina la definiciÃ³n del ColumnTransformer (aÃºn no se ha entrenado/ajustado).</span>
<a id=__codelineno-12-12 name=__codelineno-12-12 href=#__codelineno-12-12></a>
<a id=__codelineno-12-13 name=__codelineno-12-13 href=#__codelineno-12-13></a>    <span class=n>X_transformed</span> <span class=o>=</span> <span class=n>preprocessor</span><span class=o>.</span><span class=n>fit_transform</span><span class=p>(</span><span class=n>X</span><span class=p>)</span>  <span class=c1># Ajusta (fit) el preprocesador usando X y luego transforma X; devuelve una matriz (a menudo sparse).</span>
<a id=__codelineno-12-14 name=__codelineno-12-14 href=#__codelineno-12-14></a>    <span class=k>return</span> <span class=n>X_transformed</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>preprocessor</span>  <span class=c1># Retorna features transformadas, el target y el preprocesador ya ajustado (para usar igual en valid/test/inferencia).</span>
</code></pre></div> <div class=highlight><pre><span></span><code><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=c1># âœ… DESPUÃ‰S: CÃ³digo real de BankChurn-Predictor/src/bankchurn/training.py</span>
<a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a>
<a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=kn>from</span><span class=w> </span><span class=nn>__future__</span><span class=w> </span><span class=kn>import</span> <span class=n>annotations</span>  <span class=c1># Posponer evaluaciÃ³n de anotaciones: permite forward refs y reduce problemas de import/ciclos.</span>
<a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a>
<a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a><span class=kn>from</span><span class=w> </span><span class=nn>pathlib</span><span class=w> </span><span class=kn>import</span> <span class=n>Path</span>  <span class=c1># Paths tipados/seguros (mejor que strings) para rutas de archivos/directorios.</span>
<a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a><span class=kn>from</span><span class=w> </span><span class=nn>typing</span><span class=w> </span><span class=kn>import</span> <span class=n>List</span><span class=p>,</span> <span class=n>Tuple</span>  <span class=c1># Tipos genÃ©ricos para anotar colecciones y retornos compuestos.</span>
<a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a>
<a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a><span class=kn>import</span><span class=w> </span><span class=nn>numpy</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>np</span>  <span class=c1># NumPy: arrays y tipos numÃ©ricos; Ãºtil para tipar dtypes concretos.</span>
<a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a><span class=kn>import</span><span class=w> </span><span class=nn>pandas</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>pd</span>  <span class=c1># Pandas: DataFrame/Series, estructuras tÃ­picas para datos tabulares.</span>
<a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a><span class=kn>from</span><span class=w> </span><span class=nn>numpy.typing</span><span class=w> </span><span class=kn>import</span> <span class=n>NDArray</span>  <span class=c1># Tipo estÃ¡tico para arrays NumPy: ayuda a mypy a entender shapes/dtypes (hasta cierto punto).</span>
<a id=__codelineno-13-11 name=__codelineno-13-11 href=#__codelineno-13-11></a><span class=kn>from</span><span class=w> </span><span class=nn>sklearn.compose</span><span class=w> </span><span class=kn>import</span> <span class=n>ColumnTransformer</span>  <span class=c1># Enrutador de transformaciones por grupo de columnas (numÃ©ricas/categÃ³ricas/etc.).</span>
<a id=__codelineno-13-12 name=__codelineno-13-12 href=#__codelineno-13-12></a><span class=kn>from</span><span class=w> </span><span class=nn>sklearn.preprocessing</span><span class=w> </span><span class=kn>import</span> <span class=n>OneHotEncoder</span><span class=p>,</span> <span class=n>StandardScaler</span>  <span class=c1># Transformadores estÃ¡ndar de scikit-learn.</span>
<a id=__codelineno-13-13 name=__codelineno-13-13 href=#__codelineno-13-13></a>
<a id=__codelineno-13-14 name=__codelineno-13-14 href=#__codelineno-13-14></a><span class=k>def</span><span class=w> </span><span class=nf>prepare_features</span><span class=p>(</span>
<a id=__codelineno-13-15 name=__codelineno-13-15 href=#__codelineno-13-15></a>    <span class=n>df</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span>  <span class=c1># Input tabular: se asume que contiene features + columna objetivo.</span>
<a id=__codelineno-13-16 name=__codelineno-13-16 href=#__codelineno-13-16></a>    <span class=n>num_cols</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span>  <span class=c1># Lista de nombres de columnas numÃ©ricas: se usarÃ¡ para escalar.</span>
<a id=__codelineno-13-17 name=__codelineno-13-17 href=#__codelineno-13-17></a>    <span class=n>cat_cols</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>],</span>  <span class=c1># Lista de nombres de columnas categÃ³ricas: se usarÃ¡ para one-hot.</span>
<a id=__codelineno-13-18 name=__codelineno-13-18 href=#__codelineno-13-18></a>    <span class=n>target</span><span class=p>:</span> <span class=nb>str</span>  <span class=c1># Nombre de la columna objetivo (label) que se va a separar en y.</span>
<a id=__codelineno-13-19 name=__codelineno-13-19 href=#__codelineno-13-19></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Tuple</span><span class=p>[</span><span class=n>NDArray</span><span class=p>[</span><span class=n>np</span><span class=o>.</span><span class=n>float64</span><span class=p>],</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>,</span> <span class=n>ColumnTransformer</span><span class=p>]:</span>
<a id=__codelineno-13-20 name=__codelineno-13-20 href=#__codelineno-13-20></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Prepara features para entrenamiento.</span>
<a id=__codelineno-13-21 name=__codelineno-13-21 href=#__codelineno-13-21></a>
<a id=__codelineno-13-22 name=__codelineno-13-22 href=#__codelineno-13-22></a><span class=sd>    Parameters</span>
<a id=__codelineno-13-23 name=__codelineno-13-23 href=#__codelineno-13-23></a><span class=sd>    ----------</span>
<a id=__codelineno-13-24 name=__codelineno-13-24 href=#__codelineno-13-24></a><span class=sd>    df : pd.DataFrame</span>
<a id=__codelineno-13-25 name=__codelineno-13-25 href=#__codelineno-13-25></a><span class=sd>        DataFrame con datos crudos.</span>
<a id=__codelineno-13-26 name=__codelineno-13-26 href=#__codelineno-13-26></a><span class=sd>    num_cols : List[str]</span>
<a id=__codelineno-13-27 name=__codelineno-13-27 href=#__codelineno-13-27></a><span class=sd>        Nombres de columnas numÃ©ricas.</span>
<a id=__codelineno-13-28 name=__codelineno-13-28 href=#__codelineno-13-28></a><span class=sd>    cat_cols : List[str]</span>
<a id=__codelineno-13-29 name=__codelineno-13-29 href=#__codelineno-13-29></a><span class=sd>        Nombres de columnas categÃ³ricas.</span>
<a id=__codelineno-13-30 name=__codelineno-13-30 href=#__codelineno-13-30></a><span class=sd>    target : str</span>
<a id=__codelineno-13-31 name=__codelineno-13-31 href=#__codelineno-13-31></a><span class=sd>        Nombre de la columna objetivo.</span>
<a id=__codelineno-13-32 name=__codelineno-13-32 href=#__codelineno-13-32></a>
<a id=__codelineno-13-33 name=__codelineno-13-33 href=#__codelineno-13-33></a><span class=sd>    Returns</span>
<a id=__codelineno-13-34 name=__codelineno-13-34 href=#__codelineno-13-34></a><span class=sd>    -------</span>
<a id=__codelineno-13-35 name=__codelineno-13-35 href=#__codelineno-13-35></a><span class=sd>    Tuple[NDArray, pd.Series, ColumnTransformer]</span>
<a id=__codelineno-13-36 name=__codelineno-13-36 href=#__codelineno-13-36></a><span class=sd>        Features transformadas, target, y preprocessor fitted.</span>
<a id=__codelineno-13-37 name=__codelineno-13-37 href=#__codelineno-13-37></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-13-38 name=__codelineno-13-38 href=#__codelineno-13-38></a>    <span class=n>X</span> <span class=o>=</span> <span class=n>df</span><span class=o>.</span><span class=n>drop</span><span class=p>(</span><span class=n>columns</span><span class=o>=</span><span class=p>[</span><span class=n>target</span><span class=p>])</span>  <span class=c1># Construye X eliminando la columna objetivo: evita leakage obvio (target dentro de features).</span>
<a id=__codelineno-13-39 name=__codelineno-13-39 href=#__codelineno-13-39></a>    <span class=n>y</span> <span class=o>=</span> <span class=n>df</span><span class=p>[</span><span class=n>target</span><span class=p>]</span>  <span class=c1># Construye y como Serie: etiqueta que el modelo intentarÃ¡ predecir.</span>
<a id=__codelineno-13-40 name=__codelineno-13-40 href=#__codelineno-13-40></a>
<a id=__codelineno-13-41 name=__codelineno-13-41 href=#__codelineno-13-41></a>    <span class=n>preprocessor</span> <span class=o>=</span> <span class=n>ColumnTransformer</span><span class=p>([</span>  <span class=c1># Define el pipeline de preprocesamiento: se â€œfijaâ€ aquÃ­ para ser reproducible.</span>
<a id=__codelineno-13-42 name=__codelineno-13-42 href=#__codelineno-13-42></a>        <span class=p>(</span><span class=s1>&#39;num&#39;</span><span class=p>,</span> <span class=n>StandardScaler</span><span class=p>(),</span> <span class=n>num_cols</span><span class=p>),</span>  <span class=c1># Escalado numÃ©rico: Ãºtil para modelos lineales/NN; inofensivo para muchos casos.</span>
<a id=__codelineno-13-43 name=__codelineno-13-43 href=#__codelineno-13-43></a>        <span class=p>(</span><span class=s1>&#39;cat&#39;</span><span class=p>,</span> <span class=n>OneHotEncoder</span><span class=p>(</span><span class=n>handle_unknown</span><span class=o>=</span><span class=s1>&#39;ignore&#39;</span><span class=p>),</span> <span class=n>cat_cols</span><span class=p>)</span>  <span class=c1># ignore evita crash en inferencia si llega una categorÃ­a nueva.</span>
<a id=__codelineno-13-44 name=__codelineno-13-44 href=#__codelineno-13-44></a>    <span class=p>])</span>  <span class=c1># Nota MLOps: guardar este objeto es clave para que producciÃ³n use la misma transformaciÃ³n que entrenamiento.</span>
<a id=__codelineno-13-45 name=__codelineno-13-45 href=#__codelineno-13-45></a>
<a id=__codelineno-13-46 name=__codelineno-13-46 href=#__codelineno-13-46></a>    <span class=n>X_transformed</span> <span class=o>=</span> <span class=n>preprocessor</span><span class=o>.</span><span class=n>fit_transform</span><span class=p>(</span><span class=n>X</span><span class=p>)</span>  <span class=c1># Ajusta el preprocesador (learn stats/categorÃ­as) y transforma X al espacio numÃ©rico.</span>
<a id=__codelineno-13-47 name=__codelineno-13-47 href=#__codelineno-13-47></a>    <span class=k>return</span> <span class=n>X_transformed</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>preprocessor</span>  <span class=c1># Retorna tuple explÃ­cita y tipada: mypy/IDE verifican contratos y ayudan en refactors.</span>
</code></pre></div> <h3 id=los-tipos-esenciales-para-ml>Los Tipos Esenciales para ML<a class=headerlink href=#los-tipos-esenciales-para-ml title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=c1># TIPOS BÃSICOS - Los usarÃ¡s constantemente</span>
<a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a>
<a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=kn>from</span><span class=w> </span><span class=nn>typing</span><span class=w> </span><span class=kn>import</span> <span class=p>(</span>                   <span class=c1># typing: mÃ³dulo estÃ¡ndar de Python para anotaciones de tipos.</span>
<a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a>    <span class=n>List</span><span class=p>,</span>       <span class=c1># Lista de elementos: List[str] = [&quot;a&quot;, &quot;b&quot;]  # Lista donde TODOS los elementos son strings.</span>
<a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a>    <span class=n>Dict</span><span class=p>,</span>       <span class=c1># Diccionario: Dict[str, float] = {&quot;acc&quot;: 0.95}  # Dict con claves str y valores float.</span>
<a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a>    <span class=n>Tuple</span><span class=p>,</span>      <span class=c1># Tupla fija: Tuple[int, int] = (100, 10)  # Tupla de exactamente 2 enteros.</span>
<a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a>    <span class=n>Optional</span><span class=p>,</span>   <span class=c1># Puede ser None: Optional[Path] = None  # Equivale a Union[Path, None].</span>
<a id=__codelineno-14-10 name=__codelineno-14-10 href=#__codelineno-14-10></a>    <span class=n>Union</span><span class=p>,</span>      <span class=c1># MÃºltiples tipos: Union[str, List[str]]  # Puede ser string O lista de strings.</span>
<a id=__codelineno-14-11 name=__codelineno-14-11 href=#__codelineno-14-11></a>    <span class=n>Any</span><span class=p>,</span>        <span class=c1># Cualquier tipo (evitar si posible)  # Desactiva type checking - Ãºsalo solo si es inevitable.</span>
<a id=__codelineno-14-12 name=__codelineno-14-12 href=#__codelineno-14-12></a>    <span class=n>Literal</span><span class=p>,</span>    <span class=c1># Valores especÃ­ficos: Literal[&quot;train&quot;, &quot;eval&quot;]  # SOLO puede ser &quot;train&quot; o &quot;eval&quot;, nada mÃ¡s.</span>
<a id=__codelineno-14-13 name=__codelineno-14-13 href=#__codelineno-14-13></a><span class=p>)</span>
<a id=__codelineno-14-14 name=__codelineno-14-14 href=#__codelineno-14-14></a><span class=kn>from</span><span class=w> </span><span class=nn>pathlib</span><span class=w> </span><span class=kn>import</span> <span class=n>Path</span>               <span class=c1># Path: ya explicado en excepciones. Mejor que strings para rutas.</span>
<a id=__codelineno-14-15 name=__codelineno-14-15 href=#__codelineno-14-15></a>
<a id=__codelineno-14-16 name=__codelineno-14-16 href=#__codelineno-14-16></a><span class=c1># Ejemplos del portafolio real:</span>
<a id=__codelineno-14-17 name=__codelineno-14-17 href=#__codelineno-14-17></a>
<a id=__codelineno-14-18 name=__codelineno-14-18 href=#__codelineno-14-18></a><span class=c1># BankChurn: features son listas de strings</span>
<a id=__codelineno-14-19 name=__codelineno-14-19 href=#__codelineno-14-19></a><span class=n>features</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=p>[</span><span class=s2>&quot;CreditScore&quot;</span><span class=p>,</span> <span class=s2>&quot;Age&quot;</span><span class=p>,</span> <span class=s2>&quot;Balance&quot;</span><span class=p>]</span>  <span class=c1># &quot;: List[str]&quot; indica el tipo. mypy verifica que sea correcto.</span>
<a id=__codelineno-14-20 name=__codelineno-14-20 href=#__codelineno-14-20></a>
<a id=__codelineno-14-21 name=__codelineno-14-21 href=#__codelineno-14-21></a><span class=c1># CarVision: mÃ©tricas son diccionario string-&gt;float</span>
<a id=__codelineno-14-22 name=__codelineno-14-22 href=#__codelineno-14-22></a><span class=n>metrics</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>float</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&quot;rmse&quot;</span><span class=p>:</span> <span class=mf>4794.27</span><span class=p>,</span> <span class=s2>&quot;r2&quot;</span><span class=p>:</span> <span class=mf>0.77</span><span class=p>}</span>  <span class=c1># Claves son strings (nombres), valores son floats (nÃºmeros).</span>
<a id=__codelineno-14-23 name=__codelineno-14-23 href=#__codelineno-14-23></a>
<a id=__codelineno-14-24 name=__codelineno-14-24 href=#__codelineno-14-24></a><span class=c1># TelecomAI: puede recibir path o None</span>
<a id=__codelineno-14-25 name=__codelineno-14-25 href=#__codelineno-14-25></a><span class=n>model_path</span><span class=p>:</span> <span class=n>Optional</span><span class=p>[</span><span class=n>Path</span><span class=p>]</span> <span class=o>=</span> <span class=kc>None</span>      <span class=c1># Optional[X] = puede ser X o None. Ãštil para parÃ¡metros opcionales.</span>
<a id=__codelineno-14-26 name=__codelineno-14-26 href=#__codelineno-14-26></a>
<a id=__codelineno-14-27 name=__codelineno-14-27 href=#__codelineno-14-27></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-14-28 name=__codelineno-14-28 href=#__codelineno-14-28></a><span class=c1># TIPOS PARA ML - EspecÃ­ficos de Machine Learning</span>
<a id=__codelineno-14-29 name=__codelineno-14-29 href=#__codelineno-14-29></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-14-30 name=__codelineno-14-30 href=#__codelineno-14-30></a>
<a id=__codelineno-14-31 name=__codelineno-14-31 href=#__codelineno-14-31></a><span class=kn>import</span><span class=w> </span><span class=nn>pandas</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>pd</span>                    <span class=c1># pandas: la librerÃ­a estÃ¡ndar para datos tabulares. Ya la vimos antes.</span>
<a id=__codelineno-14-32 name=__codelineno-14-32 href=#__codelineno-14-32></a><span class=kn>import</span><span class=w> </span><span class=nn>numpy</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>np</span>                     <span class=c1># numpy: librerÃ­a para arrays numÃ©ricos de alto rendimiento. Base de sklearn/pandas.</span>
<a id=__codelineno-14-33 name=__codelineno-14-33 href=#__codelineno-14-33></a><span class=kn>from</span><span class=w> </span><span class=nn>numpy.typing</span><span class=w> </span><span class=kn>import</span> <span class=n>NDArray</span>       <span class=c1># NDArray: tipo para arrays numpy. NDArray[np.float64] = array de floats de 64 bits.</span>
<a id=__codelineno-14-34 name=__codelineno-14-34 href=#__codelineno-14-34></a><span class=kn>from</span><span class=w> </span><span class=nn>sklearn.base</span><span class=w> </span><span class=kn>import</span> <span class=n>BaseEstimator</span> <span class=c1># BaseEstimator: clase base de TODOS los modelos sklearn. Garantiza fit/predict.</span>
<a id=__codelineno-14-35 name=__codelineno-14-35 href=#__codelineno-14-35></a><span class=kn>from</span><span class=w> </span><span class=nn>sklearn.pipeline</span><span class=w> </span><span class=kn>import</span> <span class=n>Pipeline</span>  <span class=c1># Pipeline: encadena transformadores + modelo. Lo verÃ¡s en mÃ³dulo 07.</span>
<a id=__codelineno-14-36 name=__codelineno-14-36 href=#__codelineno-14-36></a>
<a id=__codelineno-14-37 name=__codelineno-14-37 href=#__codelineno-14-37></a><span class=c1># DataFrame de pandas</span>
<a id=__codelineno-14-38 name=__codelineno-14-38 href=#__codelineno-14-38></a><span class=k>def</span><span class=w> </span><span class=nf>load_data</span><span class=p>(</span><span class=n>path</span><span class=p>:</span> <span class=n>Path</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>:</span>  <span class=c1># Retorna pd.DataFrame: indica que devuelve una tabla de pandas.</span>
<a id=__codelineno-14-39 name=__codelineno-14-39 href=#__codelineno-14-39></a>    <span class=k>return</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>           <span class=c1># read_csv lee el archivo y retorna un DataFrame.</span>
<a id=__codelineno-14-40 name=__codelineno-14-40 href=#__codelineno-14-40></a>
<a id=__codelineno-14-41 name=__codelineno-14-41 href=#__codelineno-14-41></a><span class=c1># Array NumPy tipado</span>
<a id=__codelineno-14-42 name=__codelineno-14-42 href=#__codelineno-14-42></a><span class=k>def</span><span class=w> </span><span class=nf>predict_proba</span><span class=p>(</span><span class=n>X</span><span class=p>:</span> <span class=n>NDArray</span><span class=p>[</span><span class=n>np</span><span class=o>.</span><span class=n>float64</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>NDArray</span><span class=p>[</span><span class=n>np</span><span class=o>.</span><span class=n>float64</span><span class=p>]:</span>  <span class=c1># NDArray[np.float64]: array de floats 64-bit.</span>
<a id=__codelineno-14-43 name=__codelineno-14-43 href=#__codelineno-14-43></a>    <span class=k>return</span> <span class=n>model</span><span class=o>.</span><span class=n>predict_proba</span><span class=p>(</span><span class=n>X</span><span class=p>)[:,</span> <span class=mi>1</span><span class=p>]</span>  <span class=c1># predict_proba retorna probabilidades. [:, 1] selecciona columna 1 (clase positiva).</span>
<a id=__codelineno-14-44 name=__codelineno-14-44 href=#__codelineno-14-44></a>
<a id=__codelineno-14-45 name=__codelineno-14-45 href=#__codelineno-14-45></a><span class=c1># Modelo sklearn</span>
<a id=__codelineno-14-46 name=__codelineno-14-46 href=#__codelineno-14-46></a><span class=k>def</span><span class=w> </span><span class=nf>train_model</span><span class=p>(</span><span class=n>X</span><span class=p>:</span> <span class=n>NDArray</span><span class=p>,</span> <span class=n>y</span><span class=p>:</span> <span class=n>NDArray</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>BaseEstimator</span><span class=p>:</span>  <span class=c1># Retorna BaseEstimator: cualquier modelo sklearn.</span>
<a id=__codelineno-14-47 name=__codelineno-14-47 href=#__codelineno-14-47></a>    <span class=n>model</span> <span class=o>=</span> <span class=n>RandomForestClassifier</span><span class=p>()</span>   <span class=c1># Crea instancia del modelo. RandomForest: ensemble de Ã¡rboles de decisiÃ³n.</span>
<a id=__codelineno-14-48 name=__codelineno-14-48 href=#__codelineno-14-48></a>    <span class=n>model</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=n>X</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span>                    <span class=c1># fit(): entrena el modelo con datos X (features) e y (target).</span>
<a id=__codelineno-14-49 name=__codelineno-14-49 href=#__codelineno-14-49></a>    <span class=k>return</span> <span class=n>model</span>                       <span class=c1># Retorna el modelo entrenado (listo para predict).</span>
<a id=__codelineno-14-50 name=__codelineno-14-50 href=#__codelineno-14-50></a>
<a id=__codelineno-14-51 name=__codelineno-14-51 href=#__codelineno-14-51></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-14-52 name=__codelineno-14-52 href=#__codelineno-14-52></a><span class=c1># TIPOS AVANZADOS - Para cÃ³digo mÃ¡s robusto</span>
<a id=__codelineno-14-53 name=__codelineno-14-53 href=#__codelineno-14-53></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-14-54 name=__codelineno-14-54 href=#__codelineno-14-54></a>
<a id=__codelineno-14-55 name=__codelineno-14-55 href=#__codelineno-14-55></a><span class=kn>from</span><span class=w> </span><span class=nn>typing</span><span class=w> </span><span class=kn>import</span> <span class=n>TypedDict</span><span class=p>,</span> <span class=n>Literal</span>  <span class=c1># TypedDict: dict con estructura fija. Literal: valores especÃ­ficos.</span>
<a id=__codelineno-14-56 name=__codelineno-14-56 href=#__codelineno-14-56></a>
<a id=__codelineno-14-57 name=__codelineno-14-57 href=#__codelineno-14-57></a><span class=c1># TypedDict: diccionarios con estructura conocida</span>
<a id=__codelineno-14-58 name=__codelineno-14-58 href=#__codelineno-14-58></a><span class=k>class</span><span class=w> </span><span class=nc>MetricsDict</span><span class=p>(</span><span class=n>TypedDict</span><span class=p>):</span>          <span class=c1># TypedDict: define un diccionario donde cada clave tiene tipo especÃ­fico.</span>
<a id=__codelineno-14-59 name=__codelineno-14-59 href=#__codelineno-14-59></a>    <span class=n>accuracy</span><span class=p>:</span> <span class=nb>float</span>                    <span class=c1># La clave &quot;accuracy&quot; DEBE ser float. mypy lo verifica.</span>
<a id=__codelineno-14-60 name=__codelineno-14-60 href=#__codelineno-14-60></a>    <span class=n>precision</span><span class=p>:</span> <span class=nb>float</span>                   <span class=c1># Todas las mÃ©tricas de clasificaciÃ³n son floats.</span>
<a id=__codelineno-14-61 name=__codelineno-14-61 href=#__codelineno-14-61></a>    <span class=n>recall</span><span class=p>:</span> <span class=nb>float</span>                      <span class=c1># recall: proporciÃ³n de positivos reales detectados.</span>
<a id=__codelineno-14-62 name=__codelineno-14-62 href=#__codelineno-14-62></a>    <span class=n>f1</span><span class=p>:</span> <span class=nb>float</span>                          <span class=c1># f1: media armÃ³nica de precision y recall.</span>
<a id=__codelineno-14-63 name=__codelineno-14-63 href=#__codelineno-14-63></a>    <span class=n>roc_auc</span><span class=p>:</span> <span class=nb>float</span>                     <span class=c1># roc_auc: Ã¡rea bajo la curva ROC. 1.0 = perfecto.</span>
<a id=__codelineno-14-64 name=__codelineno-14-64 href=#__codelineno-14-64></a>
<a id=__codelineno-14-65 name=__codelineno-14-65 href=#__codelineno-14-65></a><span class=c1># Literal: solo valores especÃ­ficos permitidos</span>
<a id=__codelineno-14-66 name=__codelineno-14-66 href=#__codelineno-14-66></a><span class=n>ModelType</span> <span class=o>=</span> <span class=n>Literal</span><span class=p>[</span><span class=s2>&quot;random_forest&quot;</span><span class=p>,</span> <span class=s2>&quot;logistic&quot;</span><span class=p>,</span> <span class=s2>&quot;gradient_boosting&quot;</span><span class=p>]</span>  <span class=c1># Crea un &quot;tipo alias&quot; que solo acepta estos 3 strings.</span>
<a id=__codelineno-14-67 name=__codelineno-14-67 href=#__codelineno-14-67></a>
<a id=__codelineno-14-68 name=__codelineno-14-68 href=#__codelineno-14-68></a><span class=k>def</span><span class=w> </span><span class=nf>build_model</span><span class=p>(</span><span class=n>model_type</span><span class=p>:</span> <span class=n>ModelType</span><span class=p>,</span> <span class=n>seed</span><span class=p>:</span> <span class=nb>int</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>BaseEstimator</span><span class=p>:</span>  <span class=c1># model_type SOLO puede ser uno de los 3 valores.</span>
<a id=__codelineno-14-69 name=__codelineno-14-69 href=#__codelineno-14-69></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-14-70 name=__codelineno-14-70 href=#__codelineno-14-70></a><span class=sd>    mypy SABE que model_type solo puede ser estos 3 valores.</span>
<a id=__codelineno-14-71 name=__codelineno-14-71 href=#__codelineno-14-71></a><span class=sd>    Si escribes build_model(&quot;xgboost&quot;, 42), mypy darÃ¡ error.</span>
<a id=__codelineno-14-72 name=__codelineno-14-72 href=#__codelineno-14-72></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-14-73 name=__codelineno-14-73 href=#__codelineno-14-73></a>    <span class=k>if</span> <span class=n>model_type</span> <span class=o>==</span> <span class=s2>&quot;random_forest&quot;</span><span class=p>:</span>  <span class=c1># Compara string. Python permite esto aunque model_type sea Literal.</span>
<a id=__codelineno-14-74 name=__codelineno-14-74 href=#__codelineno-14-74></a>        <span class=k>return</span> <span class=n>RandomForestClassifier</span><span class=p>(</span><span class=n>random_state</span><span class=o>=</span><span class=n>seed</span><span class=p>)</span>  <span class=c1># random_state: semilla para reproducibilidad.</span>
<a id=__codelineno-14-75 name=__codelineno-14-75 href=#__codelineno-14-75></a>    <span class=k>elif</span> <span class=n>model_type</span> <span class=o>==</span> <span class=s2>&quot;logistic&quot;</span><span class=p>:</span>     <span class=c1># elif: &quot;else if&quot; - solo se evalÃºa si el if anterior fue False.</span>
<a id=__codelineno-14-76 name=__codelineno-14-76 href=#__codelineno-14-76></a>        <span class=k>return</span> <span class=n>LogisticRegression</span><span class=p>(</span><span class=n>random_state</span><span class=o>=</span><span class=n>seed</span><span class=p>)</span>      <span class=c1># LogisticRegression: modelo lineal para clasificaciÃ³n.</span>
<a id=__codelineno-14-77 name=__codelineno-14-77 href=#__codelineno-14-77></a>    <span class=k>else</span><span class=p>:</span>  <span class=c1># gradient_boosting         # else: se ejecuta si ningÃºn if/elif fue True.</span>
<a id=__codelineno-14-78 name=__codelineno-14-78 href=#__codelineno-14-78></a>        <span class=k>return</span> <span class=n>GradientBoostingClassifier</span><span class=p>(</span><span class=n>random_state</span><span class=o>=</span><span class=n>seed</span><span class=p>)</span>  <span class=c1># GradientBoosting: ensemble de Ã¡rboles secuenciales.</span>
</code></pre></div> <h3 id=configurar-mypy>Configurar mypy<a class=headerlink href=#configurar-mypy title="Permanent link">&para;</a></h3> <p>AÃ±ade esto a tu <code>pyproject.toml</code>:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=c1># pyproject.toml - ConfiguraciÃ³n de mypy</span>
<a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=k>[tool.mypy]</span>
<a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=n>python_version</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;3.11&quot;</span>
<a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=n>warn_return_any</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span>
<a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a><span class=n>warn_unused_ignores</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span>
<a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a><span class=n>disallow_untyped_defs</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span><span class=w>      </span><span class=c1># â† Fuerza tipos en todas las funciones</span>
<a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a><span class=n>ignore_missing_imports</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span><span class=w>     </span><span class=c1># â† Para librerÃ­as sin stubs</span>
<a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a>
<a id=__codelineno-15-9 name=__codelineno-15-9 href=#__codelineno-15-9></a><span class=c1># Ignorar librerÃ­as de ML que no tienen stubs completos</span>
<a id=__codelineno-15-10 name=__codelineno-15-10 href=#__codelineno-15-10></a><span class=k>[[tool.mypy.overrides]]</span>
<a id=__codelineno-15-11 name=__codelineno-15-11 href=#__codelineno-15-11></a><span class=n>module</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<a id=__codelineno-15-12 name=__codelineno-15-12 href=#__codelineno-15-12></a><span class=w>    </span><span class=s2>&quot;sklearn.*&quot;</span><span class=p>,</span>
<a id=__codelineno-15-13 name=__codelineno-15-13 href=#__codelineno-15-13></a><span class=w>    </span><span class=s2>&quot;pandas.*&quot;</span><span class=p>,</span><span class=w> </span>
<a id=__codelineno-15-14 name=__codelineno-15-14 href=#__codelineno-15-14></a><span class=w>    </span><span class=s2>&quot;numpy.*&quot;</span><span class=p>,</span>
<a id=__codelineno-15-15 name=__codelineno-15-15 href=#__codelineno-15-15></a><span class=w>    </span><span class=s2>&quot;mlflow.*&quot;</span><span class=p>,</span>
<a id=__codelineno-15-16 name=__codelineno-15-16 href=#__codelineno-15-16></a><span class=w>    </span><span class=s2>&quot;joblib.*&quot;</span><span class=p>,</span>
<a id=__codelineno-15-17 name=__codelineno-15-17 href=#__codelineno-15-17></a><span class=p>]</span>
<a id=__codelineno-15-18 name=__codelineno-15-18 href=#__codelineno-15-18></a><span class=n>ignore_missing_imports</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span>
</code></pre></div> <p>Ejecutar: <div class=highlight><pre><span></span><code><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a>mypy<span class=w> </span>src/<span class=w>  </span><span class=c1># Verifica tipos en todo el cÃ³digo</span>
</code></pre></div></p> <h3 id=mapa-mental-de-conceptos-type-hints>ğŸ§  Mapa Mental de Conceptos: Type Hints<a class=headerlink href=#mapa-mental-de-conceptos-type-hints title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a>                            â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
<a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a>                            â•‘           TYPE HINTS EN PYTHON        â•‘
<a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a>                            â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
<a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a>                                              â”‚
<a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a>              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
<a id=__codelineno-17-6 name=__codelineno-17-6 href=#__codelineno-17-6></a>              â–¼                               â–¼                               â–¼
<a id=__codelineno-17-7 name=__codelineno-17-7 href=#__codelineno-17-7></a>    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
<a id=__codelineno-17-8 name=__codelineno-17-8 href=#__codelineno-17-8></a>    â”‚  TIPOS BÃSICOS  â”‚             â”‚   TIPOS ML      â”‚             â”‚ TIPOS AVANZADOS â”‚
<a id=__codelineno-17-9 name=__codelineno-17-9 href=#__codelineno-17-9></a>    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<a id=__codelineno-17-10 name=__codelineno-17-10 href=#__codelineno-17-10></a>           â”‚                               â”‚                               â”‚
<a id=__codelineno-17-11 name=__codelineno-17-11 href=#__codelineno-17-11></a>    â”œâ”€ str, int, float              â”œâ”€ pd.DataFrame                  â”œâ”€ TypedDict
<a id=__codelineno-17-12 name=__codelineno-17-12 href=#__codelineno-17-12></a>    â”œâ”€ bool                         â”œâ”€ pd.Series                     â”œâ”€ Literal
<a id=__codelineno-17-13 name=__codelineno-17-13 href=#__codelineno-17-13></a>    â”œâ”€ List[T]                      â”œâ”€ NDArray[np.float64]           â”œâ”€ Protocol
<a id=__codelineno-17-14 name=__codelineno-17-14 href=#__codelineno-17-14></a>    â”œâ”€ Dict[K,V]                    â”œâ”€ BaseEstimator                 â”œâ”€ TypeVar
<a id=__codelineno-17-15 name=__codelineno-17-15 href=#__codelineno-17-15></a>    â”œâ”€ Tuple[T,...]                 â”œâ”€ Pipeline                      â””â”€ Generic
<a id=__codelineno-17-16 name=__codelineno-17-16 href=#__codelineno-17-16></a>    â”œâ”€ Optional[T]                  â””â”€ ArrayLike
<a id=__codelineno-17-17 name=__codelineno-17-17 href=#__codelineno-17-17></a>    â””â”€ Union[A,B]
</code></pre></div> <p><strong>TÃ©rminos clave que debes dominar:</strong></p> <table> <thead> <tr> <th>TÃ©rmino</th> <th>Significado</th> <th>Ejemplo</th> </tr> </thead> <tbody> <tr> <td><strong>Type hint</strong></td> <td>AnotaciÃ³n de tipo en firma de funciÃ³n</td> <td><code>def f(x: int) -&gt; str:</code></td> </tr> <tr> <td><strong>Generic</strong></td> <td>Tipo parametrizado</td> <td><code>List[str]</code>, <code>Dict[str, float]</code></td> </tr> <tr> <td><strong>Optional</strong></td> <td>Puede ser el tipo o None</td> <td><code>Optional[Path] = Union[Path, None]</code></td> </tr> <tr> <td><strong>Union</strong></td> <td>Varios tipos posibles</td> <td><code>Union[str, int]</code></td> </tr> <tr> <td><strong>Literal</strong></td> <td>Solo valores especÃ­ficos</td> <td><code>Literal["train", "eval"]</code></td> </tr> <tr> <td><strong>TypedDict</strong></td> <td>Dict con estructura fija</td> <td>MÃ©tricas con claves conocidas</td> </tr> <tr> <td><strong>mypy</strong></td> <td>Verificador estÃ¡tico de tipos</td> <td>Detecta errores antes de ejecutar</td> </tr> </tbody> </table> <hr> <h3 id=ejercicio-puente-type-hints-basicos>ğŸ’» Ejercicio Puente: Type Hints BÃ¡sicos<a class=headerlink href=#ejercicio-puente-type-hints-basicos title="Permanent link">&para;</a></h3> <blockquote> <p><strong>Meta</strong>: Antes de tipar cÃ³digo ML complejo, practica con funciones simples.</p> </blockquote> <p><strong>Ejercicio 1: FunciÃ³n Calculadora</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=c1># âŒ Sin tipos - Â¿QuÃ© recibe? Â¿QuÃ© retorna?</span>
<a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a><span class=k>def</span><span class=w> </span><span class=nf>calcular_promedio</span><span class=p>(</span><span class=n>numeros</span><span class=p>):</span>
<a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a>    <span class=k>return</span> <span class=nb>sum</span><span class=p>(</span><span class=n>numeros</span><span class=p>)</span> <span class=o>/</span> <span class=nb>len</span><span class=p>(</span><span class=n>numeros</span><span class=p>)</span>
<a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a>
<a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a><span class=c1># âœ… TU TAREA: AÃ±ade type hints a esta funciÃ³n</span>
<a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a><span class=c1># Pista: numeros es una lista de floats, retorna un float</span>
</code></pre></div></p> <p><strong>Ejercicio 2: FunciÃ³n con MÃºltiples Retornos</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=c1># âŒ Sin tipos</span>
<a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a><span class=k>def</span><span class=w> </span><span class=nf>dividir_dataset</span><span class=p>(</span><span class=n>datos</span><span class=p>,</span> <span class=n>porcentaje</span><span class=p>):</span>
<a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a>    <span class=n>punto_corte</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>datos</span><span class=p>)</span> <span class=o>*</span> <span class=n>porcentaje</span><span class=p>)</span>
<a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a>    <span class=k>return</span> <span class=n>datos</span><span class=p>[:</span><span class=n>punto_corte</span><span class=p>],</span> <span class=n>datos</span><span class=p>[</span><span class=n>punto_corte</span><span class=p>:]</span>
<a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a>
<a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a><span class=c1># âœ… TU TAREA: AÃ±ade type hints</span>
<a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a><span class=c1># Pista: datos es List[Any], porcentaje es float, retorna Tuple de dos listas</span>
</code></pre></div></p> <p><strong>Ejercicio 3: FunciÃ³n con ParÃ¡metro Opcional</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=c1># âŒ Sin tipos</span>
<a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a><span class=k>def</span><span class=w> </span><span class=nf>cargar_datos</span><span class=p>(</span><span class=n>ruta</span><span class=p>,</span> <span class=n>separador</span><span class=o>=</span><span class=s2>&quot;,&quot;</span><span class=p>):</span>
<a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a>    <span class=kn>import</span><span class=w> </span><span class=nn>pandas</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>pd</span>
<a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a>    <span class=k>return</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=n>ruta</span><span class=p>,</span> <span class=n>sep</span><span class=o>=</span><span class=n>separador</span><span class=p>)</span>
<a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a>
<a id=__codelineno-20-6 name=__codelineno-20-6 href=#__codelineno-20-6></a><span class=c1># âœ… TU TAREA: AÃ±ade type hints usando Path y Optional</span>
</code></pre></div></p> <details> <summary>ğŸ” Ver Soluciones</summary> <div class=highlight><pre><span></span><code><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=kn>from</span><span class=w> </span><span class=nn>typing</span><span class=w> </span><span class=kn>import</span> <span class=n>List</span><span class=p>,</span> <span class=n>Tuple</span><span class=p>,</span> <span class=n>Any</span><span class=p>,</span> <span class=n>Optional</span>
<a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pathlib</span><span class=w> </span><span class=kn>import</span> <span class=n>Path</span>
<a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a><span class=kn>import</span><span class=w> </span><span class=nn>pandas</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>pd</span>
<a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a>
<a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a><span class=c1># Ejercicio 1</span>
<a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a><span class=k>def</span><span class=w> </span><span class=nf>calcular_promedio</span><span class=p>(</span><span class=n>numeros</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>float</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=nb>float</span><span class=p>:</span>
<a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a>    <span class=k>return</span> <span class=nb>sum</span><span class=p>(</span><span class=n>numeros</span><span class=p>)</span> <span class=o>/</span> <span class=nb>len</span><span class=p>(</span><span class=n>numeros</span><span class=p>)</span>
<a id=__codelineno-21-8 name=__codelineno-21-8 href=#__codelineno-21-8></a>
<a id=__codelineno-21-9 name=__codelineno-21-9 href=#__codelineno-21-9></a><span class=c1># Ejercicio 2</span>
<a id=__codelineno-21-10 name=__codelineno-21-10 href=#__codelineno-21-10></a><span class=k>def</span><span class=w> </span><span class=nf>dividir_dataset</span><span class=p>(</span><span class=n>datos</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=n>Any</span><span class=p>],</span> <span class=n>porcentaje</span><span class=p>:</span> <span class=nb>float</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Tuple</span><span class=p>[</span><span class=n>List</span><span class=p>[</span><span class=n>Any</span><span class=p>],</span> <span class=n>List</span><span class=p>[</span><span class=n>Any</span><span class=p>]]:</span>
<a id=__codelineno-21-11 name=__codelineno-21-11 href=#__codelineno-21-11></a>    <span class=n>punto_corte</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>datos</span><span class=p>)</span> <span class=o>*</span> <span class=n>porcentaje</span><span class=p>)</span>
<a id=__codelineno-21-12 name=__codelineno-21-12 href=#__codelineno-21-12></a>    <span class=k>return</span> <span class=n>datos</span><span class=p>[:</span><span class=n>punto_corte</span><span class=p>],</span> <span class=n>datos</span><span class=p>[</span><span class=n>punto_corte</span><span class=p>:]</span>
<a id=__codelineno-21-13 name=__codelineno-21-13 href=#__codelineno-21-13></a>
<a id=__codelineno-21-14 name=__codelineno-21-14 href=#__codelineno-21-14></a><span class=c1># Ejercicio 3</span>
<a id=__codelineno-21-15 name=__codelineno-21-15 href=#__codelineno-21-15></a><span class=k>def</span><span class=w> </span><span class=nf>cargar_datos</span><span class=p>(</span><span class=n>ruta</span><span class=p>:</span> <span class=n>Path</span><span class=p>,</span> <span class=n>separador</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&quot;,&quot;</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>:</span>
<a id=__codelineno-21-16 name=__codelineno-21-16 href=#__codelineno-21-16></a>    <span class=k>return</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=n>ruta</span><span class=p>,</span> <span class=n>sep</span><span class=o>=</span><span class=n>separador</span><span class=p>)</span>
</code></pre></div> </details> <hr> <h3 id=practica-del-portafolio-type-hints-en-bankchurn>ğŸ› ï¸ PrÃ¡ctica del Portafolio: Type Hints en BankChurn<a class=headerlink href=#practica-del-portafolio-type-hints-en-bankchurn title="Permanent link">&para;</a></h3> <blockquote> <p><strong>Tarea</strong>: Aplicar type hints al cÃ³digo real del proyecto BankChurn-Predictor.</p> </blockquote> <p><strong>Paso 1: Identifica las funciones sin tipos</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=c1># Ejecuta mypy para ver quÃ© funciones necesitan tipos</span>
<a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a><span class=nb>cd</span><span class=w> </span>BankChurn-Predictor
<a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a>mypy<span class=w> </span>src/bankchurn/<span class=w> </span>--disallow-untyped-defs
</code></pre></div></p> <p><strong>Paso 2: Prioriza las funciones pÃºblicas</strong> - <code>src/bankchurn/training.py</code> â†’ funciones <code>fit</code>, <code>predict</code>, <code>evaluate</code> - <code>src/bankchurn/config.py</code> â†’ clase de configuraciÃ³n - <code>src/bankchurn/data.py</code> â†’ funciones de carga de datos</p> <p><strong>Paso 3: Aplica el patrÃ³n (pistas guiadas)</strong></p> <div class=highlight><pre><span></span><code><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=c1># En src/bankchurn/training.py</span>
<a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a><span class=c1># ANTES: def prepare_features(df, num_cols, cat_cols, target):</span>
<a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a><span class=c1># </span>
<a id=__codelineno-23-4 name=__codelineno-23-4 href=#__codelineno-23-4></a><span class=c1># DESPUÃ‰S: AÃ±ade estos tipos:</span>
<a id=__codelineno-23-5 name=__codelineno-23-5 href=#__codelineno-23-5></a><span class=c1># - df: Â¿QuÃ© estructura de datos es? â†’ pd.______</span>
<a id=__codelineno-23-6 name=__codelineno-23-6 href=#__codelineno-23-6></a><span class=c1># - num_cols, cat_cols: Â¿Listas de quÃ©? â†’ List[___]</span>
<a id=__codelineno-23-7 name=__codelineno-23-7 href=#__codelineno-23-7></a><span class=c1># - target: Â¿QuÃ© tipo simple? â†’ ___</span>
<a id=__codelineno-23-8 name=__codelineno-23-8 href=#__codelineno-23-8></a><span class=c1># - Retorno: Â¿QuÃ© devuelve? Tuple de (array, series, transformer)</span>
</code></pre></div> <p><strong>Paso 4: Verifica con mypy</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a>mypy<span class=w> </span>src/bankchurn/<span class=w> </span>--strict
<a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a><span class=c1># Objetivo: 0 errores en tus archivos</span>
</code></pre></div></p> <p><strong>âŒ NO hagas esto:</strong> - Copiar tipos de otro lado sin entenderlos - Usar <code>Any</code> para "resolver" errores de mypy - Ignorar warnings con <code># type: ignore</code> sin justificaciÃ³n</p> <p><strong>âœ… SÃ haz esto:</strong> - Consulta la documentaciÃ³n de los tipos que uses - Crea type aliases para tipos repetidos - Documenta por quÃ© un tipo es complejo si lo es</p> <hr> <h3 id=checkpoint-de-conocimiento-type-hints>âœ… Checkpoint de Conocimiento: Type Hints<a class=headerlink href=#checkpoint-de-conocimiento-type-hints title="Permanent link">&para;</a></h3> <p><strong>Pregunta 1</strong>: Â¿CuÃ¡l es la diferencia entre <code>List[str]</code> y <code>list</code>?</p> <p>A) No hay diferencia, son equivalentes<br> B) <code>List[str]</code> especifica que TODOS los elementos son strings<br> C) <code>list</code> solo funciona en Python 2<br> D) <code>List[str]</code> es mÃ¡s lento en ejecuciÃ³n </p> <p><strong>Pregunta 2</strong>: Â¿QuÃ© significa <code>Optional[Path]</code>?</p> <p>A) El parÃ¡metro es obligatorio y debe ser un Path<br> B) El parÃ¡metro puede ser un Path O puede ser None<br> C) El parÃ¡metro se ignora si no se proporciona<br> D) El parÃ¡metro debe tener un valor por defecto </p> <p><strong>Pregunta 3</strong>: Â¿Por quÃ© usamos <code>Literal["train", "eval"]</code> en vez de <code>str</code>?</p> <p>A) Es mÃ¡s rÃ¡pido en ejecuciÃ³n<br> B) mypy puede verificar que SOLO usemos esos valores exactos<br> C) Ocupa menos memoria<br> D) Es requerido por sklearn </p> <p><strong>ğŸ”§ Escenario de Debugging:</strong></p> <div class=highlight><pre><span></span><code><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=k>def</span><span class=w> </span><span class=nf>entrenar_modelo</span><span class=p>(</span><span class=n>X</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>y</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Pipeline</span><span class=p>:</span>
<a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a>    <span class=n>modelo</span> <span class=o>=</span> <span class=n>RandomForestClassifier</span><span class=p>()</span>
<a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a>    <span class=n>modelo</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=n>X</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span>
<a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a>    <span class=k>return</span> <span class=n>modelo</span>  <span class=c1># â† mypy dice: &quot;Incompatible return type&quot;</span>
</code></pre></div> <p><strong>Â¿CuÃ¡l es el problema y cÃ³mo lo solucionarÃ­as?</strong></p> <details> <summary>ğŸ” Ver Respuestas</summary> **Pregunta 1**: B) `List[str]` especifica que TODOS los elementos son strings. **Pregunta 2**: B) El parÃ¡metro puede ser un Path O puede ser None. **Pregunta 3**: B) mypy puede verificar que SOLO usemos esos valores exactos. **Escenario de Debugging**: - **Problema**: La funciÃ³n dice que retorna `Pipeline`, pero `RandomForestClassifier` no es un `Pipeline`. - **SoluciÃ³n**: Cambiar el tipo de retorno a `BaseEstimator`, o envolver el modelo en un Pipeline real. </details> <hr> <p><a id=12-pydantic-validation-automatica></a></p> <h2 id=12-pydantic-validacion-automatica>1.2 Pydantic: ValidaciÃ³n AutomÃ¡tica<a class=headerlink href=#12-pydantic-validacion-automatica title="Permanent link">&para;</a></h2> <h3 id=explicacion-teorica-el-guardia-de-seguridad>ğŸ“ ExplicaciÃ³n TeÃ³rica: El Guardia de Seguridad<a class=headerlink href=#explicacion-teorica-el-guardia-de-seguridad title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a>â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
<a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a>â•‘  ğŸ›¡ï¸ IMAGINA UN EDIFICIO DE OFICINAS:                                      â•‘
<a id=__codelineno-26-3 name=__codelineno-26-3 href=#__codelineno-26-3></a>â•‘                                                                           â•‘
<a id=__codelineno-26-4 name=__codelineno-26-4 href=#__codelineno-26-4></a>â•‘  SIN GUARDIA (cÃ³digo sin Pydantic):                                       â•‘
<a id=__codelineno-26-5 name=__codelineno-26-5 href=#__codelineno-26-5></a>â•‘  - Cualquiera entra con cualquier cosa                                    â•‘
<a id=__codelineno-26-6 name=__codelineno-26-6 href=#__codelineno-26-6></a>â•‘  - Descubres problemas CUANDO YA PASARON                                  â•‘
<a id=__codelineno-26-7 name=__codelineno-26-7 href=#__codelineno-26-7></a>â•‘  - &quot;Â¿Por quÃ© hay un test_size de 1.5?&quot; â†’ Error en producciÃ³n              â•‘
<a id=__codelineno-26-8 name=__codelineno-26-8 href=#__codelineno-26-8></a>â•‘                                                                           â•‘
<a id=__codelineno-26-9 name=__codelineno-26-9 href=#__codelineno-26-9></a>â•‘  CON GUARDIA (cÃ³digo con Pydantic):                                       â•‘
<a id=__codelineno-26-10 name=__codelineno-26-10 href=#__codelineno-26-10></a>â•‘  - Verifica credenciales EN LA ENTRADA                                    â•‘
<a id=__codelineno-26-11 name=__codelineno-26-11 href=#__codelineno-26-11></a>â•‘  - Problemas detectados ANTES de causar daÃ±o                              â•‘
<a id=__codelineno-26-12 name=__codelineno-26-12 href=#__codelineno-26-12></a>â•‘  - &quot;test_size debe ser entre 0 y 1&quot; â†’ Error inmediato y claro             â•‘
<a id=__codelineno-26-13 name=__codelineno-26-13 href=#__codelineno-26-13></a>â•‘                                                                           â•‘
<a id=__codelineno-26-14 name=__codelineno-26-14 href=#__codelineno-26-14></a>â•‘  PYDANTIC = El guardia de tu configuraciÃ³n                                â•‘
<a id=__codelineno-26-15 name=__codelineno-26-15 href=#__codelineno-26-15></a>â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
</code></pre></div> <h3 id=codigo-real-bankchurn-config-nivel-staff>CÃ³digo Real: BankChurn Config (Nivel Staff)<a class=headerlink href=#codigo-real-bankchurn-config-nivel-staff title="Permanent link">&para;</a></h3> <p>Este es el archivo <code>src/bankchurn/config.py</code> del portafolio:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=sd>&quot;&quot;&quot;Configuration management for BankChurn predictor.</span>
<a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a>
<a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a><span class=sd>Este mÃ³dulo demuestra Pydantic a nivel profesional:</span>
<a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a><span class=sd>- ValidaciÃ³n de rangos con Field</span>
<a id=__codelineno-27-5 name=__codelineno-27-5 href=#__codelineno-27-5></a><span class=sd>- Configuraciones anidadas</span>
<a id=__codelineno-27-6 name=__codelineno-27-6 href=#__codelineno-27-6></a><span class=sd>- Valores por defecto sensatos</span>
<a id=__codelineno-27-7 name=__codelineno-27-7 href=#__codelineno-27-7></a><span class=sd>- Carga desde YAML</span>
<a id=__codelineno-27-8 name=__codelineno-27-8 href=#__codelineno-27-8></a><span class=sd>&quot;&quot;&quot;</span>
<a id=__codelineno-27-9 name=__codelineno-27-9 href=#__codelineno-27-9></a>
<a id=__codelineno-27-10 name=__codelineno-27-10 href=#__codelineno-27-10></a><span class=kn>from</span><span class=w> </span><span class=nn>__future__</span><span class=w> </span><span class=kn>import</span> <span class=n>annotations</span>
<a id=__codelineno-27-11 name=__codelineno-27-11 href=#__codelineno-27-11></a>
<a id=__codelineno-27-12 name=__codelineno-27-12 href=#__codelineno-27-12></a><span class=kn>from</span><span class=w> </span><span class=nn>pathlib</span><span class=w> </span><span class=kn>import</span> <span class=n>Path</span>
<a id=__codelineno-27-13 name=__codelineno-27-13 href=#__codelineno-27-13></a><span class=kn>from</span><span class=w> </span><span class=nn>typing</span><span class=w> </span><span class=kn>import</span> <span class=n>Any</span><span class=p>,</span> <span class=n>List</span>
<a id=__codelineno-27-14 name=__codelineno-27-14 href=#__codelineno-27-14></a>
<a id=__codelineno-27-15 name=__codelineno-27-15 href=#__codelineno-27-15></a><span class=kn>import</span><span class=w> </span><span class=nn>yaml</span>
<a id=__codelineno-27-16 name=__codelineno-27-16 href=#__codelineno-27-16></a><span class=kn>from</span><span class=w> </span><span class=nn>pydantic</span><span class=w> </span><span class=kn>import</span> <span class=n>BaseModel</span><span class=p>,</span> <span class=n>Field</span>
<a id=__codelineno-27-17 name=__codelineno-27-17 href=#__codelineno-27-17></a>
<a id=__codelineno-27-18 name=__codelineno-27-18 href=#__codelineno-27-18></a>
<a id=__codelineno-27-19 name=__codelineno-27-19 href=#__codelineno-27-19></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-27-20 name=__codelineno-27-20 href=#__codelineno-27-20></a><span class=c1># CONFIGURACIONES ANIDADAS - Cada componente tiene su propia config</span>
<a id=__codelineno-27-21 name=__codelineno-27-21 href=#__codelineno-27-21></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-27-22 name=__codelineno-27-22 href=#__codelineno-27-22></a>
<a id=__codelineno-27-23 name=__codelineno-27-23 href=#__codelineno-27-23></a><span class=k>class</span><span class=w> </span><span class=nc>LogisticRegressionConfig</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
<a id=__codelineno-27-24 name=__codelineno-27-24 href=#__codelineno-27-24></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;HiperparÃ¡metros de Logistic Regression.&quot;&quot;&quot;</span>
<a id=__codelineno-27-25 name=__codelineno-27-25 href=#__codelineno-27-25></a>    <span class=n>C</span><span class=p>:</span> <span class=nb>float</span> <span class=o>=</span> <span class=mf>0.1</span>
<a id=__codelineno-27-26 name=__codelineno-27-26 href=#__codelineno-27-26></a>    <span class=n>class_weight</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&quot;balanced&quot;</span>
<a id=__codelineno-27-27 name=__codelineno-27-27 href=#__codelineno-27-27></a>    <span class=n>solver</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&quot;liblinear&quot;</span>
<a id=__codelineno-27-28 name=__codelineno-27-28 href=#__codelineno-27-28></a>    <span class=n>max_iter</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>1000</span>
<a id=__codelineno-27-29 name=__codelineno-27-29 href=#__codelineno-27-29></a>
<a id=__codelineno-27-30 name=__codelineno-27-30 href=#__codelineno-27-30></a>
<a id=__codelineno-27-31 name=__codelineno-27-31 href=#__codelineno-27-31></a><span class=k>class</span><span class=w> </span><span class=nc>RandomForestConfig</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
<a id=__codelineno-27-32 name=__codelineno-27-32 href=#__codelineno-27-32></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;HiperparÃ¡metros de Random Forest.&quot;&quot;&quot;</span>
<a id=__codelineno-27-33 name=__codelineno-27-33 href=#__codelineno-27-33></a>    <span class=n>n_estimators</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>100</span>
<a id=__codelineno-27-34 name=__codelineno-27-34 href=#__codelineno-27-34></a>    <span class=n>max_depth</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>10</span>
<a id=__codelineno-27-35 name=__codelineno-27-35 href=#__codelineno-27-35></a>    <span class=n>min_samples_split</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>10</span>
<a id=__codelineno-27-36 name=__codelineno-27-36 href=#__codelineno-27-36></a>    <span class=n>min_samples_leaf</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>5</span>
<a id=__codelineno-27-37 name=__codelineno-27-37 href=#__codelineno-27-37></a>    <span class=n>class_weight</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&quot;balanced_subsample&quot;</span>
<a id=__codelineno-27-38 name=__codelineno-27-38 href=#__codelineno-27-38></a>    <span class=n>n_jobs</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=o>-</span><span class=mi>1</span>
<a id=__codelineno-27-39 name=__codelineno-27-39 href=#__codelineno-27-39></a>
<a id=__codelineno-27-40 name=__codelineno-27-40 href=#__codelineno-27-40></a>
<a id=__codelineno-27-41 name=__codelineno-27-41 href=#__codelineno-27-41></a><span class=k>class</span><span class=w> </span><span class=nc>EnsembleConfig</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
<a id=__codelineno-27-42 name=__codelineno-27-42 href=#__codelineno-27-42></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;ConfiguraciÃ³n del ensemble.&quot;&quot;&quot;</span>
<a id=__codelineno-27-43 name=__codelineno-27-43 href=#__codelineno-27-43></a>    <span class=n>voting</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span><span class=s2>&quot;soft&quot;</span><span class=p>,</span> <span class=n>pattern</span><span class=o>=</span><span class=s2>&quot;^(hard|soft)$&quot;</span><span class=p>)</span>  <span class=c1># â† Solo permite &quot;hard&quot; o &quot;soft&quot;</span>
<a id=__codelineno-27-44 name=__codelineno-27-44 href=#__codelineno-27-44></a>    <span class=n>weights</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>float</span><span class=p>]</span> <span class=o>=</span> <span class=p>[</span><span class=mf>0.4</span><span class=p>,</span> <span class=mf>0.6</span><span class=p>]</span>
<a id=__codelineno-27-45 name=__codelineno-27-45 href=#__codelineno-27-45></a>
<a id=__codelineno-27-46 name=__codelineno-27-46 href=#__codelineno-27-46></a>
<a id=__codelineno-27-47 name=__codelineno-27-47 href=#__codelineno-27-47></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-27-48 name=__codelineno-27-48 href=#__codelineno-27-48></a><span class=c1># CONFIGURACIÃ“N PRINCIPAL - Agrupa todo con validaciÃ³n</span>
<a id=__codelineno-27-49 name=__codelineno-27-49 href=#__codelineno-27-49></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-27-50 name=__codelineno-27-50 href=#__codelineno-27-50></a>
<a id=__codelineno-27-51 name=__codelineno-27-51 href=#__codelineno-27-51></a><span class=k>class</span><span class=w> </span><span class=nc>ModelConfig</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
<a id=__codelineno-27-52 name=__codelineno-27-52 href=#__codelineno-27-52></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;ConfiguraciÃ³n de entrenamiento del modelo.&quot;&quot;&quot;</span>
<a id=__codelineno-27-53 name=__codelineno-27-53 href=#__codelineno-27-53></a>    <span class=nb>type</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&quot;ensemble&quot;</span>
<a id=__codelineno-27-54 name=__codelineno-27-54 href=#__codelineno-27-54></a>    <span class=n>test_size</span><span class=p>:</span> <span class=nb>float</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span><span class=mf>0.2</span><span class=p>,</span> <span class=n>ge</span><span class=o>=</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>le</span><span class=o>=</span><span class=mf>1.0</span><span class=p>)</span>   <span class=c1># â† VALIDACIÃ“N: entre 0 y 1</span>
<a id=__codelineno-27-55 name=__codelineno-27-55 href=#__codelineno-27-55></a>    <span class=n>random_state</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>42</span>
<a id=__codelineno-27-56 name=__codelineno-27-56 href=#__codelineno-27-56></a>    <span class=n>cv_folds</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span> <span class=n>ge</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span>                   <span class=c1># â† VALIDACIÃ“N: mÃ­nimo 2</span>
<a id=__codelineno-27-57 name=__codelineno-27-57 href=#__codelineno-27-57></a>    <span class=n>resampling_strategy</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&quot;none&quot;</span>
<a id=__codelineno-27-58 name=__codelineno-27-58 href=#__codelineno-27-58></a>
<a id=__codelineno-27-59 name=__codelineno-27-59 href=#__codelineno-27-59></a>    <span class=c1># Configuraciones de modelos especÃ­ficos (anidadas)</span>
<a id=__codelineno-27-60 name=__codelineno-27-60 href=#__codelineno-27-60></a>    <span class=n>ensemble</span><span class=p>:</span> <span class=n>EnsembleConfig</span> <span class=o>=</span> <span class=n>EnsembleConfig</span><span class=p>()</span>
<a id=__codelineno-27-61 name=__codelineno-27-61 href=#__codelineno-27-61></a>    <span class=n>logistic_regression</span><span class=p>:</span> <span class=n>LogisticRegressionConfig</span> <span class=o>=</span> <span class=n>LogisticRegressionConfig</span><span class=p>()</span>
<a id=__codelineno-27-62 name=__codelineno-27-62 href=#__codelineno-27-62></a>    <span class=n>random_forest</span><span class=p>:</span> <span class=n>RandomForestConfig</span> <span class=o>=</span> <span class=n>RandomForestConfig</span><span class=p>()</span>
<a id=__codelineno-27-63 name=__codelineno-27-63 href=#__codelineno-27-63></a>
<a id=__codelineno-27-64 name=__codelineno-27-64 href=#__codelineno-27-64></a>
<a id=__codelineno-27-65 name=__codelineno-27-65 href=#__codelineno-27-65></a><span class=k>class</span><span class=w> </span><span class=nc>DataConfig</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
<a id=__codelineno-27-66 name=__codelineno-27-66 href=#__codelineno-27-66></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;ConfiguraciÃ³n de datos.&quot;&quot;&quot;</span>
<a id=__codelineno-27-67 name=__codelineno-27-67 href=#__codelineno-27-67></a>    <span class=n>target_column</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&quot;Exited&quot;</span>
<a id=__codelineno-27-68 name=__codelineno-27-68 href=#__codelineno-27-68></a>    <span class=n>categorical_features</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-27-69 name=__codelineno-27-69 href=#__codelineno-27-69></a>    <span class=n>numerical_features</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-27-70 name=__codelineno-27-70 href=#__codelineno-27-70></a>    <span class=n>drop_columns</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=p>[]</span>
<a id=__codelineno-27-71 name=__codelineno-27-71 href=#__codelineno-27-71></a>
<a id=__codelineno-27-72 name=__codelineno-27-72 href=#__codelineno-27-72></a>
<a id=__codelineno-27-73 name=__codelineno-27-73 href=#__codelineno-27-73></a><span class=k>class</span><span class=w> </span><span class=nc>MLflowConfig</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
<a id=__codelineno-27-74 name=__codelineno-27-74 href=#__codelineno-27-74></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;ConfiguraciÃ³n de MLflow tracking.&quot;&quot;&quot;</span>
<a id=__codelineno-27-75 name=__codelineno-27-75 href=#__codelineno-27-75></a>    <span class=n>tracking_uri</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&quot;file:./mlruns&quot;</span>
<a id=__codelineno-27-76 name=__codelineno-27-76 href=#__codelineno-27-76></a>    <span class=n>experiment_name</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&quot;bankchurn&quot;</span>
<a id=__codelineno-27-77 name=__codelineno-27-77 href=#__codelineno-27-77></a>    <span class=n>enabled</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-27-78 name=__codelineno-27-78 href=#__codelineno-27-78></a>
<a id=__codelineno-27-79 name=__codelineno-27-79 href=#__codelineno-27-79></a>
<a id=__codelineno-27-80 name=__codelineno-27-80 href=#__codelineno-27-80></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-27-81 name=__codelineno-27-81 href=#__codelineno-27-81></a><span class=c1># CONFIGURACIÃ“N RAÃZ - El punto de entrada</span>
<a id=__codelineno-27-82 name=__codelineno-27-82 href=#__codelineno-27-82></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-27-83 name=__codelineno-27-83 href=#__codelineno-27-83></a>
<a id=__codelineno-27-84 name=__codelineno-27-84 href=#__codelineno-27-84></a><span class=k>class</span><span class=w> </span><span class=nc>BankChurnConfig</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
<a id=__codelineno-27-85 name=__codelineno-27-85 href=#__codelineno-27-85></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;ConfiguraciÃ³n completa de BankChurn.</span>
<a id=__codelineno-27-86 name=__codelineno-27-86 href=#__codelineno-27-86></a>
<a id=__codelineno-27-87 name=__codelineno-27-87 href=#__codelineno-27-87></a><span class=sd>    Uso:</span>
<a id=__codelineno-27-88 name=__codelineno-27-88 href=#__codelineno-27-88></a><span class=sd>        config = BankChurnConfig.from_yaml(&quot;configs/config.yaml&quot;)</span>
<a id=__codelineno-27-89 name=__codelineno-27-89 href=#__codelineno-27-89></a><span class=sd>        print(config.model.test_size)  # 0.2</span>
<a id=__codelineno-27-90 name=__codelineno-27-90 href=#__codelineno-27-90></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-27-91 name=__codelineno-27-91 href=#__codelineno-27-91></a>    <span class=n>model</span><span class=p>:</span> <span class=n>ModelConfig</span>
<a id=__codelineno-27-92 name=__codelineno-27-92 href=#__codelineno-27-92></a>    <span class=n>data</span><span class=p>:</span> <span class=n>DataConfig</span>
<a id=__codelineno-27-93 name=__codelineno-27-93 href=#__codelineno-27-93></a>    <span class=n>mlflow</span><span class=p>:</span> <span class=n>MLflowConfig</span>
<a id=__codelineno-27-94 name=__codelineno-27-94 href=#__codelineno-27-94></a>
<a id=__codelineno-27-95 name=__codelineno-27-95 href=#__codelineno-27-95></a>    <span class=nd>@classmethod</span>
<a id=__codelineno-27-96 name=__codelineno-27-96 href=#__codelineno-27-96></a>    <span class=k>def</span><span class=w> </span><span class=nf>from_yaml</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>config_path</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=n>Path</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>BankChurnConfig</span><span class=p>:</span>
<a id=__codelineno-27-97 name=__codelineno-27-97 href=#__codelineno-27-97></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Carga configuraciÃ³n desde archivo YAML.</span>
<a id=__codelineno-27-98 name=__codelineno-27-98 href=#__codelineno-27-98></a>
<a id=__codelineno-27-99 name=__codelineno-27-99 href=#__codelineno-27-99></a><span class=sd>        Parameters</span>
<a id=__codelineno-27-100 name=__codelineno-27-100 href=#__codelineno-27-100></a><span class=sd>        ----------</span>
<a id=__codelineno-27-101 name=__codelineno-27-101 href=#__codelineno-27-101></a><span class=sd>        config_path : str or Path</span>
<a id=__codelineno-27-102 name=__codelineno-27-102 href=#__codelineno-27-102></a><span class=sd>            Ruta al archivo YAML.</span>
<a id=__codelineno-27-103 name=__codelineno-27-103 href=#__codelineno-27-103></a>
<a id=__codelineno-27-104 name=__codelineno-27-104 href=#__codelineno-27-104></a><span class=sd>        Returns</span>
<a id=__codelineno-27-105 name=__codelineno-27-105 href=#__codelineno-27-105></a><span class=sd>        -------</span>
<a id=__codelineno-27-106 name=__codelineno-27-106 href=#__codelineno-27-106></a><span class=sd>        BankChurnConfig</span>
<a id=__codelineno-27-107 name=__codelineno-27-107 href=#__codelineno-27-107></a><span class=sd>            ConfiguraciÃ³n validada.</span>
<a id=__codelineno-27-108 name=__codelineno-27-108 href=#__codelineno-27-108></a>
<a id=__codelineno-27-109 name=__codelineno-27-109 href=#__codelineno-27-109></a><span class=sd>        Raises</span>
<a id=__codelineno-27-110 name=__codelineno-27-110 href=#__codelineno-27-110></a><span class=sd>        ------</span>
<a id=__codelineno-27-111 name=__codelineno-27-111 href=#__codelineno-27-111></a><span class=sd>        FileNotFoundError</span>
<a id=__codelineno-27-112 name=__codelineno-27-112 href=#__codelineno-27-112></a><span class=sd>            Si el archivo no existe.</span>
<a id=__codelineno-27-113 name=__codelineno-27-113 href=#__codelineno-27-113></a><span class=sd>        ValidationError</span>
<a id=__codelineno-27-114 name=__codelineno-27-114 href=#__codelineno-27-114></a><span class=sd>            Si la configuraciÃ³n es invÃ¡lida.</span>
<a id=__codelineno-27-115 name=__codelineno-27-115 href=#__codelineno-27-115></a><span class=sd>        &quot;&quot;&quot;</span>
<a id=__codelineno-27-116 name=__codelineno-27-116 href=#__codelineno-27-116></a>        <span class=n>config_path</span> <span class=o>=</span> <span class=n>Path</span><span class=p>(</span><span class=n>config_path</span><span class=p>)</span>
<a id=__codelineno-27-117 name=__codelineno-27-117 href=#__codelineno-27-117></a>
<a id=__codelineno-27-118 name=__codelineno-27-118 href=#__codelineno-27-118></a>        <span class=k>if</span> <span class=ow>not</span> <span class=n>config_path</span><span class=o>.</span><span class=n>exists</span><span class=p>():</span>
<a id=__codelineno-27-119 name=__codelineno-27-119 href=#__codelineno-27-119></a>            <span class=k>raise</span> <span class=ne>FileNotFoundError</span><span class=p>(</span><span class=sa>f</span><span class=s2>&quot;Config file not found: </span><span class=si>{</span><span class=n>config_path</span><span class=si>}</span><span class=s2>&quot;</span><span class=p>)</span>
<a id=__codelineno-27-120 name=__codelineno-27-120 href=#__codelineno-27-120></a>
<a id=__codelineno-27-121 name=__codelineno-27-121 href=#__codelineno-27-121></a>        <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>config_path</span><span class=p>,</span> <span class=s2>&quot;r&quot;</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
<a id=__codelineno-27-122 name=__codelineno-27-122 href=#__codelineno-27-122></a>            <span class=n>config_dict</span> <span class=o>=</span> <span class=n>yaml</span><span class=o>.</span><span class=n>safe_load</span><span class=p>(</span><span class=n>f</span><span class=p>)</span> <span class=ow>or</span> <span class=p>{}</span>
<a id=__codelineno-27-123 name=__codelineno-27-123 href=#__codelineno-27-123></a>
<a id=__codelineno-27-124 name=__codelineno-27-124 href=#__codelineno-27-124></a>        <span class=c1># Valores por defecto para secciones faltantes</span>
<a id=__codelineno-27-125 name=__codelineno-27-125 href=#__codelineno-27-125></a>        <span class=k>if</span> <span class=s2>&quot;model&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>config_dict</span><span class=p>:</span>
<a id=__codelineno-27-126 name=__codelineno-27-126 href=#__codelineno-27-126></a>            <span class=n>config_dict</span><span class=p>[</span><span class=s2>&quot;model&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>ModelConfig</span><span class=p>()</span><span class=o>.</span><span class=n>dict</span><span class=p>()</span>
<a id=__codelineno-27-127 name=__codelineno-27-127 href=#__codelineno-27-127></a>        <span class=k>if</span> <span class=s2>&quot;data&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>config_dict</span><span class=p>:</span>
<a id=__codelineno-27-128 name=__codelineno-27-128 href=#__codelineno-27-128></a>            <span class=n>config_dict</span><span class=p>[</span><span class=s2>&quot;data&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>DataConfig</span><span class=p>()</span><span class=o>.</span><span class=n>dict</span><span class=p>()</span>
<a id=__codelineno-27-129 name=__codelineno-27-129 href=#__codelineno-27-129></a>        <span class=k>if</span> <span class=s2>&quot;mlflow&quot;</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>config_dict</span><span class=p>:</span>
<a id=__codelineno-27-130 name=__codelineno-27-130 href=#__codelineno-27-130></a>            <span class=n>config_dict</span><span class=p>[</span><span class=s2>&quot;mlflow&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>MLflowConfig</span><span class=p>()</span><span class=o>.</span><span class=n>dict</span><span class=p>()</span>
<a id=__codelineno-27-131 name=__codelineno-27-131 href=#__codelineno-27-131></a>
<a id=__codelineno-27-132 name=__codelineno-27-132 href=#__codelineno-27-132></a>        <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span><span class=o>**</span><span class=n>config_dict</span><span class=p>)</span>  <span class=c1># â† Pydantic valida automÃ¡ticamente</span>
</code></pre></div> <h3 id=el-yaml-correspondiente>El YAML Correspondiente<a class=headerlink href=#el-yaml-correspondiente title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=c1># configs/config.yaml</span>
<a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a><span class=nt>model</span><span class=p>:</span>
<a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a><span class=w>  </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ensemble</span>
<a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a><span class=w>  </span><span class=nt>test_size</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">0.2</span><span class=w>         </span><span class=c1># Si pones 1.5, Pydantic darÃ¡ error</span>
<a id=__codelineno-28-5 name=__codelineno-28-5 href=#__codelineno-28-5></a><span class=w>  </span><span class=nt>random_state</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">42</span>
<a id=__codelineno-28-6 name=__codelineno-28-6 href=#__codelineno-28-6></a><span class=w>  </span><span class=nt>cv_folds</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">5</span><span class=w>            </span><span class=c1># Si pones 1, Pydantic darÃ¡ error</span>
<a id=__codelineno-28-7 name=__codelineno-28-7 href=#__codelineno-28-7></a><span class=w>  </span><span class=nt>resampling_strategy</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">none</span>
<a id=__codelineno-28-8 name=__codelineno-28-8 href=#__codelineno-28-8></a>
<a id=__codelineno-28-9 name=__codelineno-28-9 href=#__codelineno-28-9></a><span class=w>  </span><span class=nt>ensemble</span><span class=p>:</span>
<a id=__codelineno-28-10 name=__codelineno-28-10 href=#__codelineno-28-10></a><span class=w>    </span><span class=nt>voting</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">soft</span><span class=w>         </span><span class=c1># Si pones &quot;maybe&quot;, Pydantic darÃ¡ error</span>
<a id=__codelineno-28-11 name=__codelineno-28-11 href=#__codelineno-28-11></a><span class=w>    </span><span class=nt>weights</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=nv>0.4</span><span class="p p-Indicator">,</span><span class=w> </span><span class=nv>0.6</span><span class="p p-Indicator">]</span>
<a id=__codelineno-28-12 name=__codelineno-28-12 href=#__codelineno-28-12></a>
<a id=__codelineno-28-13 name=__codelineno-28-13 href=#__codelineno-28-13></a><span class=w>  </span><span class=nt>random_forest</span><span class=p>:</span>
<a id=__codelineno-28-14 name=__codelineno-28-14 href=#__codelineno-28-14></a><span class=w>    </span><span class=nt>n_estimators</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">200</span>
<a id=__codelineno-28-15 name=__codelineno-28-15 href=#__codelineno-28-15></a><span class=w>    </span><span class=nt>max_depth</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
<a id=__codelineno-28-16 name=__codelineno-28-16 href=#__codelineno-28-16></a>
<a id=__codelineno-28-17 name=__codelineno-28-17 href=#__codelineno-28-17></a><span class=nt>data</span><span class=p>:</span>
<a id=__codelineno-28-18 name=__codelineno-28-18 href=#__codelineno-28-18></a><span class=w>  </span><span class=nt>target_column</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Exited</span>
<a id=__codelineno-28-19 name=__codelineno-28-19 href=#__codelineno-28-19></a><span class=w>  </span><span class=nt>categorical_features</span><span class=p>:</span>
<a id=__codelineno-28-20 name=__codelineno-28-20 href=#__codelineno-28-20></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Geography</span>
<a id=__codelineno-28-21 name=__codelineno-28-21 href=#__codelineno-28-21></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Gender</span>
<a id=__codelineno-28-22 name=__codelineno-28-22 href=#__codelineno-28-22></a><span class=w>  </span><span class=nt>numerical_features</span><span class=p>:</span>
<a id=__codelineno-28-23 name=__codelineno-28-23 href=#__codelineno-28-23></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">CreditScore</span>
<a id=__codelineno-28-24 name=__codelineno-28-24 href=#__codelineno-28-24></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Age</span>
<a id=__codelineno-28-25 name=__codelineno-28-25 href=#__codelineno-28-25></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Balance</span>
<a id=__codelineno-28-26 name=__codelineno-28-26 href=#__codelineno-28-26></a><span class=w>  </span><span class=nt>drop_columns</span><span class=p>:</span>
<a id=__codelineno-28-27 name=__codelineno-28-27 href=#__codelineno-28-27></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">RowNumber</span>
<a id=__codelineno-28-28 name=__codelineno-28-28 href=#__codelineno-28-28></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">CustomerId</span>
<a id=__codelineno-28-29 name=__codelineno-28-29 href=#__codelineno-28-29></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Surname</span>
<a id=__codelineno-28-30 name=__codelineno-28-30 href=#__codelineno-28-30></a>
<a id=__codelineno-28-31 name=__codelineno-28-31 href=#__codelineno-28-31></a><span class=nt>mlflow</span><span class=p>:</span>
<a id=__codelineno-28-32 name=__codelineno-28-32 href=#__codelineno-28-32></a><span class=w>  </span><span class=nt>tracking_uri</span><span class=p>:</span><span class=w> </span><span class=s>&quot;file:./mlruns&quot;</span>
<a id=__codelineno-28-33 name=__codelineno-28-33 href=#__codelineno-28-33></a><span class=w>  </span><span class=nt>experiment_name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">bankchurn</span>
<a id=__codelineno-28-34 name=__codelineno-28-34 href=#__codelineno-28-34></a><span class=w>  </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div> <h3 id=ejemplo-de-error-de-validacion>Ejemplo de Error de ValidaciÃ³n<a class=headerlink href=#ejemplo-de-error-de-validacion title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a><span class=c1># âŒ Esto FALLA inmediatamente con un error claro</span>
<a id=__codelineno-29-2 name=__codelineno-29-2 href=#__codelineno-29-2></a>
<a id=__codelineno-29-3 name=__codelineno-29-3 href=#__codelineno-29-3></a><span class=n>config_dict</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-29-4 name=__codelineno-29-4 href=#__codelineno-29-4></a>    <span class=s2>&quot;model&quot;</span><span class=p>:</span> <span class=p>{</span>
<a id=__codelineno-29-5 name=__codelineno-29-5 href=#__codelineno-29-5></a>        <span class=s2>&quot;test_size&quot;</span><span class=p>:</span> <span class=mf>1.5</span><span class=p>,</span>  <span class=c1># â† Error: debe ser &lt;= 1.0</span>
<a id=__codelineno-29-6 name=__codelineno-29-6 href=#__codelineno-29-6></a>        <span class=s2>&quot;cv_folds&quot;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>     <span class=c1># â† Error: debe ser &gt;= 2</span>
<a id=__codelineno-29-7 name=__codelineno-29-7 href=#__codelineno-29-7></a>    <span class=p>},</span>
<a id=__codelineno-29-8 name=__codelineno-29-8 href=#__codelineno-29-8></a>    <span class=s2>&quot;data&quot;</span><span class=p>:</span> <span class=p>{},</span>
<a id=__codelineno-29-9 name=__codelineno-29-9 href=#__codelineno-29-9></a>    <span class=s2>&quot;mlflow&quot;</span><span class=p>:</span> <span class=p>{}</span>
<a id=__codelineno-29-10 name=__codelineno-29-10 href=#__codelineno-29-10></a><span class=p>}</span>
<a id=__codelineno-29-11 name=__codelineno-29-11 href=#__codelineno-29-11></a>
<a id=__codelineno-29-12 name=__codelineno-29-12 href=#__codelineno-29-12></a><span class=k>try</span><span class=p>:</span>
<a id=__codelineno-29-13 name=__codelineno-29-13 href=#__codelineno-29-13></a>    <span class=n>config</span> <span class=o>=</span> <span class=n>BankChurnConfig</span><span class=p>(</span><span class=o>**</span><span class=n>config_dict</span><span class=p>)</span>
<a id=__codelineno-29-14 name=__codelineno-29-14 href=#__codelineno-29-14></a><span class=k>except</span> <span class=n>ValidationError</span> <span class=k>as</span> <span class=n>e</span><span class=p>:</span>
<a id=__codelineno-29-15 name=__codelineno-29-15 href=#__codelineno-29-15></a>    <span class=nb>print</span><span class=p>(</span><span class=n>e</span><span class=p>)</span>
<a id=__codelineno-29-16 name=__codelineno-29-16 href=#__codelineno-29-16></a>    <span class=c1># Output:</span>
<a id=__codelineno-29-17 name=__codelineno-29-17 href=#__codelineno-29-17></a>    <span class=c1># 2 validation errors for BankChurnConfig</span>
<a id=__codelineno-29-18 name=__codelineno-29-18 href=#__codelineno-29-18></a>    <span class=c1># model -&gt; test_size</span>
<a id=__codelineno-29-19 name=__codelineno-29-19 href=#__codelineno-29-19></a>    <span class=c1>#   ensure this value is less than or equal to 1.0 (type=value_error.number.not_le)</span>
<a id=__codelineno-29-20 name=__codelineno-29-20 href=#__codelineno-29-20></a>    <span class=c1># model -&gt; cv_folds</span>
<a id=__codelineno-29-21 name=__codelineno-29-21 href=#__codelineno-29-21></a>    <span class=c1>#   ensure this value is greater than or equal to 2 (type=value_error.number.not_ge)</span>
</code></pre></div> <h3 id=mapa-mental-de-conceptos-pydantic>ğŸ§  Mapa Mental de Conceptos: Pydantic<a class=headerlink href=#mapa-mental-de-conceptos-pydantic title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a>                         â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
<a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a>                         â•‘      PYDANTIC: VALIDACIÃ“N DE DATOS     â•‘
<a id=__codelineno-30-3 name=__codelineno-30-3 href=#__codelineno-30-3></a>                         â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
<a id=__codelineno-30-4 name=__codelineno-30-4 href=#__codelineno-30-4></a>                                           â”‚
<a id=__codelineno-30-5 name=__codelineno-30-5 href=#__codelineno-30-5></a>           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
<a id=__codelineno-30-6 name=__codelineno-30-6 href=#__codelineno-30-6></a>           â–¼                               â–¼                               â–¼
<a id=__codelineno-30-7 name=__codelineno-30-7 href=#__codelineno-30-7></a> â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
<a id=__codelineno-30-8 name=__codelineno-30-8 href=#__codelineno-30-8></a> â”‚   BaseModel      â”‚            â”‚     Field()      â”‚           â”‚   Validadores    â”‚
<a id=__codelineno-30-9 name=__codelineno-30-9 href=#__codelineno-30-9></a> â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<a id=__codelineno-30-10 name=__codelineno-30-10 href=#__codelineno-30-10></a>        â”‚                               â”‚                              â”‚
<a id=__codelineno-30-11 name=__codelineno-30-11 href=#__codelineno-30-11></a> â”œâ”€ Herencia                     â”œâ”€ ge, le (rangos)             â”œâ”€ @validator
<a id=__codelineno-30-12 name=__codelineno-30-12 href=#__codelineno-30-12></a> â”œâ”€ Anidamiento                  â”œâ”€ min_length                  â”œâ”€ @field_validator
<a id=__codelineno-30-13 name=__codelineno-30-13 href=#__codelineno-30-13></a> â”œâ”€ .model_dump()                â”œâ”€ pattern (regex)             â”œâ”€ @model_validator
<a id=__codelineno-30-14 name=__codelineno-30-14 href=#__codelineno-30-14></a> â”œâ”€ .model_validate()            â”œâ”€ default                     â””â”€ ValidationError
<a id=__codelineno-30-15 name=__codelineno-30-15 href=#__codelineno-30-15></a> â””â”€ from_yaml()                  â””â”€ description
</code></pre></div> <p><strong>TÃ©rminos clave que debes dominar:</strong></p> <table> <thead> <tr> <th>TÃ©rmino</th> <th>Significado</th> <th>Ejemplo</th> </tr> </thead> <tbody> <tr> <td><strong>BaseModel</strong></td> <td>Clase base para modelos Pydantic</td> <td><code>class Config(BaseModel):</code></td> </tr> <tr> <td><strong>Field</strong></td> <td>Define restricciones en campos</td> <td><code>Field(ge=0, le=1.0)</code></td> </tr> <tr> <td><strong>ValidationError</strong></td> <td>ExcepciÃ³n cuando datos invÃ¡lidos</td> <td>Mensaje claro con campo y razÃ³n</td> </tr> <tr> <td><strong>Anidamiento</strong></td> <td>Modelos dentro de modelos</td> <td><code>ModelConfig</code> dentro de <code>BankChurnConfig</code></td> </tr> <tr> <td><strong>CoerciÃ³n</strong></td> <td>ConversiÃ³n automÃ¡tica de tipos</td> <td><code>"42"</code> â†’ <code>42</code> si el campo es <code>int</code></td> </tr> <tr> <td><strong>Literal</strong></td> <td>Solo valores especÃ­ficos</td> <td><code>Literal["soft", "hard"]</code></td> </tr> </tbody> </table> <hr> <h3 id=ejercicio-puente-validacion-con-pydantic>ğŸ’» Ejercicio Puente: ValidaciÃ³n con Pydantic<a class=headerlink href=#ejercicio-puente-validacion-con-pydantic title="Permanent link">&para;</a></h3> <blockquote> <p><strong>Meta</strong>: Antes de validar configs ML complejas, practica con modelos simples.</p> </blockquote> <p><strong>Ejercicio 1: Config de Usuario BÃ¡sica</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pydantic</span><span class=w> </span><span class=kn>import</span> <span class=n>BaseModel</span><span class=p>,</span> <span class=n>Field</span>
<a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a>
<a id=__codelineno-31-3 name=__codelineno-31-3 href=#__codelineno-31-3></a><span class=c1># âœ… TU TAREA: Crea un modelo UserConfig con:</span>
<a id=__codelineno-31-4 name=__codelineno-31-4 href=#__codelineno-31-4></a><span class=c1># - username: str (mÃ­nimo 3 caracteres)</span>
<a id=__codelineno-31-5 name=__codelineno-31-5 href=#__codelineno-31-5></a><span class=c1># - age: int (entre 18 y 120)</span>
<a id=__codelineno-31-6 name=__codelineno-31-6 href=#__codelineno-31-6></a><span class=c1># - email: str (debe contener &quot;@&quot;)</span>
<a id=__codelineno-31-7 name=__codelineno-31-7 href=#__codelineno-31-7></a><span class=c1># - is_active: bool (default True)</span>
<a id=__codelineno-31-8 name=__codelineno-31-8 href=#__codelineno-31-8></a>
<a id=__codelineno-31-9 name=__codelineno-31-9 href=#__codelineno-31-9></a><span class=k>class</span><span class=w> </span><span class=nc>UserConfig</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
<a id=__codelineno-31-10 name=__codelineno-31-10 href=#__codelineno-31-10></a>    <span class=c1># ... tu cÃ³digo aquÃ­</span>
<a id=__codelineno-31-11 name=__codelineno-31-11 href=#__codelineno-31-11></a>    <span class=k>pass</span>
</code></pre></div></p> <p><strong>Ejercicio 2: Config Anidada</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a><span class=c1># âœ… TU TAREA: Crea dos modelos:</span>
<a id=__codelineno-32-2 name=__codelineno-32-2 href=#__codelineno-32-2></a><span class=c1># 1. DatabaseConfig con: host (str), port (int entre 1-65535), name (str)</span>
<a id=__codelineno-32-3 name=__codelineno-32-3 href=#__codelineno-32-3></a><span class=c1># 2. AppConfig que contenga: app_name (str), database (DatabaseConfig)</span>
<a id=__codelineno-32-4 name=__codelineno-32-4 href=#__codelineno-32-4></a>
<a id=__codelineno-32-5 name=__codelineno-32-5 href=#__codelineno-32-5></a><span class=k>class</span><span class=w> </span><span class=nc>DatabaseConfig</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
<a id=__codelineno-32-6 name=__codelineno-32-6 href=#__codelineno-32-6></a>    <span class=k>pass</span>
<a id=__codelineno-32-7 name=__codelineno-32-7 href=#__codelineno-32-7></a>
<a id=__codelineno-32-8 name=__codelineno-32-8 href=#__codelineno-32-8></a><span class=k>class</span><span class=w> </span><span class=nc>AppConfig</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
<a id=__codelineno-32-9 name=__codelineno-32-9 href=#__codelineno-32-9></a>    <span class=k>pass</span>
</code></pre></div></p> <p><strong>Ejercicio 3: Validador Personalizado</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pydantic</span><span class=w> </span><span class=kn>import</span> <span class=n>BaseModel</span><span class=p>,</span> <span class=n>field_validator</span>
<a id=__codelineno-33-2 name=__codelineno-33-2 href=#__codelineno-33-2></a>
<a id=__codelineno-33-3 name=__codelineno-33-3 href=#__codelineno-33-3></a><span class=c1># âœ… TU TAREA: Crea PasswordConfig donde:</span>
<a id=__codelineno-33-4 name=__codelineno-33-4 href=#__codelineno-33-4></a><span class=c1># - password debe tener al menos 8 caracteres</span>
<a id=__codelineno-33-5 name=__codelineno-33-5 href=#__codelineno-33-5></a><span class=c1># - password debe contener al menos un nÃºmero</span>
<a id=__codelineno-33-6 name=__codelineno-33-6 href=#__codelineno-33-6></a><span class=c1># Pista: usa @field_validator</span>
<a id=__codelineno-33-7 name=__codelineno-33-7 href=#__codelineno-33-7></a>
<a id=__codelineno-33-8 name=__codelineno-33-8 href=#__codelineno-33-8></a><span class=k>class</span><span class=w> </span><span class=nc>PasswordConfig</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
<a id=__codelineno-33-9 name=__codelineno-33-9 href=#__codelineno-33-9></a>    <span class=n>password</span><span class=p>:</span> <span class=nb>str</span>
<a id=__codelineno-33-10 name=__codelineno-33-10 href=#__codelineno-33-10></a>
<a id=__codelineno-33-11 name=__codelineno-33-11 href=#__codelineno-33-11></a>    <span class=c1># ... tu validador aquÃ­</span>
</code></pre></div></p> <details> <summary>ğŸ” Ver Soluciones</summary> <div class=highlight><pre><span></span><code><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pydantic</span><span class=w> </span><span class=kn>import</span> <span class=n>BaseModel</span><span class=p>,</span> <span class=n>Field</span><span class=p>,</span> <span class=n>field_validator</span>
<a id=__codelineno-34-2 name=__codelineno-34-2 href=#__codelineno-34-2></a><span class=kn>from</span><span class=w> </span><span class=nn>typing</span><span class=w> </span><span class=kn>import</span> <span class=n>Literal</span>
<a id=__codelineno-34-3 name=__codelineno-34-3 href=#__codelineno-34-3></a><span class=kn>import</span><span class=w> </span><span class=nn>re</span>
<a id=__codelineno-34-4 name=__codelineno-34-4 href=#__codelineno-34-4></a>
<a id=__codelineno-34-5 name=__codelineno-34-5 href=#__codelineno-34-5></a><span class=c1># Ejercicio 1</span>
<a id=__codelineno-34-6 name=__codelineno-34-6 href=#__codelineno-34-6></a><span class=k>class</span><span class=w> </span><span class=nc>UserConfig</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
<a id=__codelineno-34-7 name=__codelineno-34-7 href=#__codelineno-34-7></a>    <span class=n>username</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span><span class=o>...</span><span class=p>,</span> <span class=n>min_length</span><span class=o>=</span><span class=mi>3</span><span class=p>)</span>
<a id=__codelineno-34-8 name=__codelineno-34-8 href=#__codelineno-34-8></a>    <span class=n>age</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span><span class=o>...</span><span class=p>,</span> <span class=n>ge</span><span class=o>=</span><span class=mi>18</span><span class=p>,</span> <span class=n>le</span><span class=o>=</span><span class=mi>120</span><span class=p>)</span>
<a id=__codelineno-34-9 name=__codelineno-34-9 href=#__codelineno-34-9></a>    <span class=n>email</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span><span class=o>...</span><span class=p>,</span> <span class=n>pattern</span><span class=o>=</span><span class=sa>r</span><span class=s2>&quot;.*@.*&quot;</span><span class=p>)</span>
<a id=__codelineno-34-10 name=__codelineno-34-10 href=#__codelineno-34-10></a>    <span class=n>is_active</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-34-11 name=__codelineno-34-11 href=#__codelineno-34-11></a>
<a id=__codelineno-34-12 name=__codelineno-34-12 href=#__codelineno-34-12></a><span class=c1># Ejercicio 2</span>
<a id=__codelineno-34-13 name=__codelineno-34-13 href=#__codelineno-34-13></a><span class=k>class</span><span class=w> </span><span class=nc>DatabaseConfig</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
<a id=__codelineno-34-14 name=__codelineno-34-14 href=#__codelineno-34-14></a>    <span class=n>host</span><span class=p>:</span> <span class=nb>str</span>
<a id=__codelineno-34-15 name=__codelineno-34-15 href=#__codelineno-34-15></a>    <span class=n>port</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span><span class=o>...</span><span class=p>,</span> <span class=n>ge</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>le</span><span class=o>=</span><span class=mi>65535</span><span class=p>)</span>
<a id=__codelineno-34-16 name=__codelineno-34-16 href=#__codelineno-34-16></a>    <span class=n>name</span><span class=p>:</span> <span class=nb>str</span>
<a id=__codelineno-34-17 name=__codelineno-34-17 href=#__codelineno-34-17></a>
<a id=__codelineno-34-18 name=__codelineno-34-18 href=#__codelineno-34-18></a><span class=k>class</span><span class=w> </span><span class=nc>AppConfig</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
<a id=__codelineno-34-19 name=__codelineno-34-19 href=#__codelineno-34-19></a>    <span class=n>app_name</span><span class=p>:</span> <span class=nb>str</span>
<a id=__codelineno-34-20 name=__codelineno-34-20 href=#__codelineno-34-20></a>    <span class=n>database</span><span class=p>:</span> <span class=n>DatabaseConfig</span>
<a id=__codelineno-34-21 name=__codelineno-34-21 href=#__codelineno-34-21></a>
<a id=__codelineno-34-22 name=__codelineno-34-22 href=#__codelineno-34-22></a><span class=c1># Ejercicio 3</span>
<a id=__codelineno-34-23 name=__codelineno-34-23 href=#__codelineno-34-23></a><span class=k>class</span><span class=w> </span><span class=nc>PasswordConfig</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
<a id=__codelineno-34-24 name=__codelineno-34-24 href=#__codelineno-34-24></a>    <span class=n>password</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span><span class=o>...</span><span class=p>,</span> <span class=n>min_length</span><span class=o>=</span><span class=mi>8</span><span class=p>)</span>
<a id=__codelineno-34-25 name=__codelineno-34-25 href=#__codelineno-34-25></a>
<a id=__codelineno-34-26 name=__codelineno-34-26 href=#__codelineno-34-26></a>    <span class=nd>@field_validator</span><span class=p>(</span><span class=s2>&quot;password&quot;</span><span class=p>)</span>
<a id=__codelineno-34-27 name=__codelineno-34-27 href=#__codelineno-34-27></a>    <span class=nd>@classmethod</span>
<a id=__codelineno-34-28 name=__codelineno-34-28 href=#__codelineno-34-28></a>    <span class=k>def</span><span class=w> </span><span class=nf>must_contain_number</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>v</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>str</span><span class=p>:</span>
<a id=__codelineno-34-29 name=__codelineno-34-29 href=#__codelineno-34-29></a>        <span class=k>if</span> <span class=ow>not</span> <span class=n>re</span><span class=o>.</span><span class=n>search</span><span class=p>(</span><span class=sa>r</span><span class=s2>&quot;\d&quot;</span><span class=p>,</span> <span class=n>v</span><span class=p>):</span>
<a id=__codelineno-34-30 name=__codelineno-34-30 href=#__codelineno-34-30></a>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Password debe contener al menos un nÃºmero&quot;</span><span class=p>)</span>
<a id=__codelineno-34-31 name=__codelineno-34-31 href=#__codelineno-34-31></a>        <span class=k>return</span> <span class=n>v</span>
</code></pre></div> </details> <hr> <h3 id=practica-del-portafolio-config-pydantic-en-bankchurn>ğŸ› ï¸ PrÃ¡ctica del Portafolio: Config Pydantic en BankChurn<a class=headerlink href=#practica-del-portafolio-config-pydantic-en-bankchurn title="Permanent link">&para;</a></h3> <blockquote> <p><strong>Tarea</strong>: Implementar configuraciÃ³n validada con Pydantic en BankChurn-Predictor.</p> </blockquote> <p><strong>Paso 1: Identifica quÃ© necesita validaciÃ³n</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a><span class=c1># Revisa el archivo de configuraciÃ³n actual</span>
<a id=__codelineno-35-2 name=__codelineno-35-2 href=#__codelineno-35-2></a>cat<span class=w> </span>BankChurn-Predictor/configs/config.yaml
</code></pre></div></p> <p>TÃ­picamente necesitas validar: - <code>test_size</code>: debe estar entre 0.0 y 1.0 - <code>cv_folds</code>: debe ser &gt;= 2 - <code>random_state</code>: debe ser entero positivo - <code>model_type</code>: solo valores permitidos</p> <p><strong>Paso 2: Crea la estructura anidada (pistas guiadas)</strong></p> <div class=highlight><pre><span></span><code><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a><span class=c1># src/bankchurn/config.py</span>
<a id=__codelineno-36-2 name=__codelineno-36-2 href=#__codelineno-36-2></a>
<a id=__codelineno-36-3 name=__codelineno-36-3 href=#__codelineno-36-3></a><span class=kn>from</span><span class=w> </span><span class=nn>pydantic</span><span class=w> </span><span class=kn>import</span> <span class=n>BaseModel</span><span class=p>,</span> <span class=n>Field</span>
<a id=__codelineno-36-4 name=__codelineno-36-4 href=#__codelineno-36-4></a><span class=kn>from</span><span class=w> </span><span class=nn>typing</span><span class=w> </span><span class=kn>import</span> <span class=n>List</span><span class=p>,</span> <span class=n>Literal</span>
<a id=__codelineno-36-5 name=__codelineno-36-5 href=#__codelineno-36-5></a>
<a id=__codelineno-36-6 name=__codelineno-36-6 href=#__codelineno-36-6></a><span class=k>class</span><span class=w> </span><span class=nc>ModelConfig</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
<a id=__codelineno-36-7 name=__codelineno-36-7 href=#__codelineno-36-7></a>    <span class=c1># test_size: Â¿QuÃ© restricciones necesita? â†’ Field(..., ge=___, le=___)</span>
<a id=__codelineno-36-8 name=__codelineno-36-8 href=#__codelineno-36-8></a>    <span class=c1># cv_folds: Â¿CuÃ¡l es el mÃ­nimo vÃ¡lido? â†’ Field(..., ge=___)</span>
<a id=__codelineno-36-9 name=__codelineno-36-9 href=#__codelineno-36-9></a>    <span class=c1># model_type: Â¿QuÃ© valores son vÃ¡lidos? â†’ Literal[&quot;___&quot;, &quot;___&quot;, &quot;___&quot;]</span>
<a id=__codelineno-36-10 name=__codelineno-36-10 href=#__codelineno-36-10></a>    <span class=k>pass</span>
<a id=__codelineno-36-11 name=__codelineno-36-11 href=#__codelineno-36-11></a>
<a id=__codelineno-36-12 name=__codelineno-36-12 href=#__codelineno-36-12></a><span class=k>class</span><span class=w> </span><span class=nc>DataConfig</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
<a id=__codelineno-36-13 name=__codelineno-36-13 href=#__codelineno-36-13></a>    <span class=c1># target_column: str simple</span>
<a id=__codelineno-36-14 name=__codelineno-36-14 href=#__codelineno-36-14></a>    <span class=c1># categorical_features: Â¿Lista de quÃ©?</span>
<a id=__codelineno-36-15 name=__codelineno-36-15 href=#__codelineno-36-15></a>    <span class=c1># numerical_features: Â¿Lista de quÃ©?</span>
<a id=__codelineno-36-16 name=__codelineno-36-16 href=#__codelineno-36-16></a>    <span class=k>pass</span>
<a id=__codelineno-36-17 name=__codelineno-36-17 href=#__codelineno-36-17></a>
<a id=__codelineno-36-18 name=__codelineno-36-18 href=#__codelineno-36-18></a><span class=k>class</span><span class=w> </span><span class=nc>BankChurnConfig</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
<a id=__codelineno-36-19 name=__codelineno-36-19 href=#__codelineno-36-19></a>    <span class=n>model</span><span class=p>:</span> <span class=n>ModelConfig</span>
<a id=__codelineno-36-20 name=__codelineno-36-20 href=#__codelineno-36-20></a>    <span class=n>data</span><span class=p>:</span> <span class=n>DataConfig</span>
<a id=__codelineno-36-21 name=__codelineno-36-21 href=#__codelineno-36-21></a>
<a id=__codelineno-36-22 name=__codelineno-36-22 href=#__codelineno-36-22></a>    <span class=nd>@classmethod</span>
<a id=__codelineno-36-23 name=__codelineno-36-23 href=#__codelineno-36-23></a>    <span class=k>def</span><span class=w> </span><span class=nf>from_yaml</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>path</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=s2>&quot;BankChurnConfig&quot;</span><span class=p>:</span>
<a id=__codelineno-36-24 name=__codelineno-36-24 href=#__codelineno-36-24></a>        <span class=c1># Â¿CÃ³mo cargas y validas un YAML?</span>
<a id=__codelineno-36-25 name=__codelineno-36-25 href=#__codelineno-36-25></a>        <span class=k>pass</span>
</code></pre></div> <p><strong>Paso 3: Prueba con datos invÃ¡lidos</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a><span class=c1># Test que DEBE fallar</span>
<a id=__codelineno-37-2 name=__codelineno-37-2 href=#__codelineno-37-2></a><span class=n>config_dict</span> <span class=o>=</span> <span class=p>{</span>
<a id=__codelineno-37-3 name=__codelineno-37-3 href=#__codelineno-37-3></a>    <span class=s2>&quot;model&quot;</span><span class=p>:</span> <span class=p>{</span><span class=s2>&quot;test_size&quot;</span><span class=p>:</span> <span class=mf>1.5</span><span class=p>,</span> <span class=s2>&quot;cv_folds&quot;</span><span class=p>:</span> <span class=mi>1</span><span class=p>},</span>
<a id=__codelineno-37-4 name=__codelineno-37-4 href=#__codelineno-37-4></a>    <span class=s2>&quot;data&quot;</span><span class=p>:</span> <span class=p>{</span><span class=s2>&quot;target_column&quot;</span><span class=p>:</span> <span class=s2>&quot;Exited&quot;</span><span class=p>}</span>
<a id=__codelineno-37-5 name=__codelineno-37-5 href=#__codelineno-37-5></a><span class=p>}</span>
<a id=__codelineno-37-6 name=__codelineno-37-6 href=#__codelineno-37-6></a><span class=c1># Â¿QuÃ© error esperas ver?</span>
</code></pre></div></p> <p><strong>âŒ NO hagas esto:</strong> - Validar "despuÃ©s" de usar los datos - Atrapar <code>ValidationError</code> y continuar con defaults - Hardcodear valores que deberÃ­an venir del YAML</p> <p><strong>âœ… SÃ haz esto:</strong> - Fallar rÃ¡pido si la config es invÃ¡lida - Documentar cada restricciÃ³n con <code>description=</code> - Crear tests para configs vÃ¡lidas E invÃ¡lidas</p> <hr> <h3 id=checkpoint-de-conocimiento-pydantic>âœ… Checkpoint de Conocimiento: Pydantic<a class=headerlink href=#checkpoint-de-conocimiento-pydantic title="Permanent link">&para;</a></h3> <p><strong>Pregunta 1</strong>: Â¿CuÃ¡l es la ventaja de <code>Field(ge=0, le=1)</code> sobre validar manualmente?</p> <p>A) Es mÃ¡s rÃ¡pido en ejecuciÃ³n<br> B) El error se detecta AL CARGAR la config, no despuÃ©s<br> C) Ocupa menos memoria<br> D) Es requerido por FastAPI </p> <p><strong>Pregunta 2</strong>: Si tienes <code>ModelConfig</code> anidado dentro de <code>BankChurnConfig</code>, Â¿quÃ© pasa si <code>ModelConfig</code> tiene un campo invÃ¡lido?</p> <p>A) Solo <code>ModelConfig</code> falla, <code>BankChurnConfig</code> se crea parcialmente<br> B) Toda la validaciÃ³n falla con error claro indicando el campo anidado<br> C) Se ignora el error y se usa un default<br> D) Python crashea sin mensaje Ãºtil </p> <p><strong>Pregunta 3</strong>: Â¿Por quÃ© usar <code>Literal["random_forest", "logistic"]</code> en vez de <code>str</code>?</p> <p>A) Es mÃ¡s rÃ¡pido<br> B) Si escribes <code>"random_forrest"</code> (typo), Pydantic te avisa inmediatamente<br> C) Es requerido por sklearn<br> D) Ocupa menos memoria </p> <p><strong>ğŸ”§ Escenario de Debugging:</strong></p> <div class=highlight><pre><span></span><code><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a><span class=k>class</span><span class=w> </span><span class=nc>TrainingConfig</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
<a id=__codelineno-38-2 name=__codelineno-38-2 href=#__codelineno-38-2></a>    <span class=n>epochs</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span><span class=mi>10</span><span class=p>,</span> <span class=n>ge</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-38-3 name=__codelineno-38-3 href=#__codelineno-38-3></a>    <span class=n>learning_rate</span><span class=p>:</span> <span class=nb>float</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span><span class=mf>0.001</span><span class=p>,</span> <span class=n>ge</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-38-4 name=__codelineno-38-4 href=#__codelineno-38-4></a>    <span class=n>batch_size</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>32</span>
<a id=__codelineno-38-5 name=__codelineno-38-5 href=#__codelineno-38-5></a>
<a id=__codelineno-38-6 name=__codelineno-38-6 href=#__codelineno-38-6></a><span class=n>config</span> <span class=o>=</span> <span class=n>TrainingConfig</span><span class=p>(</span><span class=n>epochs</span><span class=o>=</span><span class=s2>&quot;cinco&quot;</span><span class=p>,</span> <span class=n>learning_rate</span><span class=o>=-</span><span class=mf>0.01</span><span class=p>)</span>
<a id=__codelineno-38-7 name=__codelineno-38-7 href=#__codelineno-38-7></a><span class=c1># â† Â¿QuÃ© errores verÃ¡s y en quÃ© orden?</span>
</code></pre></div> <details> <summary>ğŸ” Ver Respuestas</summary> **Pregunta 1**: B) El error se detecta AL CARGAR la config, no despuÃ©s. Esto evita que el error aparezca en medio del entrenamiento. **Pregunta 2**: B) Toda la validaciÃ³n falla con error claro indicando el campo anidado. Pydantic muestra la ruta completa: `model -> test_size`. **Pregunta 3**: B) Si escribes `"random_forrest"` (typo), Pydantic te avisa inmediatamente. Esto previene errores silenciosos. **Escenario de Debugging**: Pydantic mostrarÃ¡ **2 errores**: 1. `epochs`: Input should be a valid integer, unable to parse string as an integer 2. `learning_rate`: Input should be greater than or equal to 0 Ambos errores se reportan juntos, no uno a la vez. </details> <hr> <p><a id=13-src-layout-estructura-profesional></a></p> <h2 id=13-src-layout-estructura-profesional>1.3 src/ Layout: Estructura Profesional<a class=headerlink href=#13-src-layout-estructura-profesional title="Permanent link">&para;</a></h2> <h3 id=explicacion-teorica-la-casa-organizada>ğŸ“ ExplicaciÃ³n TeÃ³rica: La Casa Organizada<a class=headerlink href=#explicacion-teorica-la-casa-organizada title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a>â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
<a id=__codelineno-39-2 name=__codelineno-39-2 href=#__codelineno-39-2></a>â•‘  ğŸ  IMAGINA ORGANIZAR UNA CASA:                                           â•‘
<a id=__codelineno-39-3 name=__codelineno-39-3 href=#__codelineno-39-3></a>â•‘                                                                           â•‘
<a id=__codelineno-39-4 name=__codelineno-39-4 href=#__codelineno-39-4></a>â•‘  CASA DESORDENADA (cÃ³digo en raÃ­z):                                       â•‘
<a id=__codelineno-39-5 name=__codelineno-39-5 href=#__codelineno-39-5></a>â•‘  - Todo en el living: ropa, comida, herramientas                          â•‘
<a id=__codelineno-39-6 name=__codelineno-39-6 href=#__codelineno-39-6></a>â•‘  - Imposible encontrar algo                                               â•‘
<a id=__codelineno-39-7 name=__codelineno-39-7 href=#__codelineno-39-7></a>â•‘  - Invitas a alguien: &quot;perdÃ³n por el desorden&quot;                            â•‘
<a id=__codelineno-39-8 name=__codelineno-39-8 href=#__codelineno-39-8></a>â•‘                                                                           â•‘
<a id=__codelineno-39-9 name=__codelineno-39-9 href=#__codelineno-39-9></a>â•‘  CASA ORGANIZADA (src/ layout):                                           â•‘
<a id=__codelineno-39-10 name=__codelineno-39-10 href=#__codelineno-39-10></a>â•‘  - Cocina para cocinar, baÃ±o para baÃ±o, closet para ropa                  â•‘
<a id=__codelineno-39-11 name=__codelineno-39-11 href=#__codelineno-39-11></a>â•‘  - Cada cosa en su lugar                                                  â•‘
<a id=__codelineno-39-12 name=__codelineno-39-12 href=#__codelineno-39-12></a>â•‘  - Invitas a alguien: &quot;bienvenido, siÃ©ntate&quot;                              â•‘
<a id=__codelineno-39-13 name=__codelineno-39-13 href=#__codelineno-39-13></a>â•‘                                                                           â•‘
<a id=__codelineno-39-14 name=__codelineno-39-14 href=#__codelineno-39-14></a>â•‘  src/ layout = OrganizaciÃ³n profesional de cÃ³digo                         â•‘
<a id=__codelineno-39-15 name=__codelineno-39-15 href=#__codelineno-39-15></a>â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
</code></pre></div> <h3 id=estructura-del-portafolio>Estructura del Portafolio<a class=headerlink href=#estructura-del-portafolio title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-40-1 name=__codelineno-40-1 href=#__codelineno-40-1></a>BankChurn-Predictor/
<a id=__codelineno-40-2 name=__codelineno-40-2 href=#__codelineno-40-2></a>â”œâ”€â”€ src/                          # â† TODO el cÃ³digo fuente aquÃ­
<a id=__codelineno-40-3 name=__codelineno-40-3 href=#__codelineno-40-3></a>â”‚   â”œâ”€â”€ __init__.py               # Hace src/ un paquete
<a id=__codelineno-40-4 name=__codelineno-40-4 href=#__codelineno-40-4></a>â”‚   â””â”€â”€ bankchurn/                # â† El paquete principal
<a id=__codelineno-40-5 name=__codelineno-40-5 href=#__codelineno-40-5></a>â”‚       â”œâ”€â”€ __init__.py           # Exporta la API pÃºblica
<a id=__codelineno-40-6 name=__codelineno-40-6 href=#__codelineno-40-6></a>â”‚       â”œâ”€â”€ config.py             # ConfiguraciÃ³n Pydantic
<a id=__codelineno-40-7 name=__codelineno-40-7 href=#__codelineno-40-7></a>â”‚       â”œâ”€â”€ training.py           # Pipeline de entrenamiento
<a id=__codelineno-40-8 name=__codelineno-40-8 href=#__codelineno-40-8></a>â”‚       â”œâ”€â”€ evaluation.py         # MÃ©tricas y evaluaciÃ³n
<a id=__codelineno-40-9 name=__codelineno-40-9 href=#__codelineno-40-9></a>â”‚       â”œâ”€â”€ prediction.py         # Inferencia
<a id=__codelineno-40-10 name=__codelineno-40-10 href=#__codelineno-40-10></a>â”‚       â”œâ”€â”€ models.py             # Custom classifiers
<a id=__codelineno-40-11 name=__codelineno-40-11 href=#__codelineno-40-11></a>â”‚       â””â”€â”€ cli.py                # Interfaz de lÃ­nea de comandos
<a id=__codelineno-40-12 name=__codelineno-40-12 href=#__codelineno-40-12></a>â”‚
<a id=__codelineno-40-13 name=__codelineno-40-13 href=#__codelineno-40-13></a>â”œâ”€â”€ app/                          # â† Aplicaciones (no es un paquete)
<a id=__codelineno-40-14 name=__codelineno-40-14 href=#__codelineno-40-14></a>â”‚   â””â”€â”€ fastapi_app.py            # API REST
<a id=__codelineno-40-15 name=__codelineno-40-15 href=#__codelineno-40-15></a>â”‚
<a id=__codelineno-40-16 name=__codelineno-40-16 href=#__codelineno-40-16></a>â”œâ”€â”€ tests/                        # â† Tests (espejo de src/)
<a id=__codelineno-40-17 name=__codelineno-40-17 href=#__codelineno-40-17></a>â”‚   â”œâ”€â”€ __init__.py
<a id=__codelineno-40-18 name=__codelineno-40-18 href=#__codelineno-40-18></a>â”‚   â”œâ”€â”€ conftest.py               # Fixtures compartidas
<a id=__codelineno-40-19 name=__codelineno-40-19 href=#__codelineno-40-19></a>â”‚   â”œâ”€â”€ test_config.py            # Tests para config.py
<a id=__codelineno-40-20 name=__codelineno-40-20 href=#__codelineno-40-20></a>â”‚   â”œâ”€â”€ test_training.py          # Tests para training.py
<a id=__codelineno-40-21 name=__codelineno-40-21 href=#__codelineno-40-21></a>â”‚   â””â”€â”€ ...
<a id=__codelineno-40-22 name=__codelineno-40-22 href=#__codelineno-40-22></a>â”‚
<a id=__codelineno-40-23 name=__codelineno-40-23 href=#__codelineno-40-23></a>â”œâ”€â”€ configs/                      # â† ConfiguraciÃ³n externa
<a id=__codelineno-40-24 name=__codelineno-40-24 href=#__codelineno-40-24></a>â”‚   â””â”€â”€ config.yaml
<a id=__codelineno-40-25 name=__codelineno-40-25 href=#__codelineno-40-25></a>â”‚
<a id=__codelineno-40-26 name=__codelineno-40-26 href=#__codelineno-40-26></a>â”œâ”€â”€ data/                         # â† Datos (gitignored)
<a id=__codelineno-40-27 name=__codelineno-40-27 href=#__codelineno-40-27></a>â”‚   â””â”€â”€ raw/
<a id=__codelineno-40-28 name=__codelineno-40-28 href=#__codelineno-40-28></a>â”‚       â””â”€â”€ Churn_Modelling.csv
<a id=__codelineno-40-29 name=__codelineno-40-29 href=#__codelineno-40-29></a>â”‚
<a id=__codelineno-40-30 name=__codelineno-40-30 href=#__codelineno-40-30></a>â”œâ”€â”€ artifacts/                    # â† Artefactos generados (gitignored)
<a id=__codelineno-40-31 name=__codelineno-40-31 href=#__codelineno-40-31></a>â”‚   â”œâ”€â”€ model.joblib
<a id=__codelineno-40-32 name=__codelineno-40-32 href=#__codelineno-40-32></a>â”‚   â””â”€â”€ training_results.json
<a id=__codelineno-40-33 name=__codelineno-40-33 href=#__codelineno-40-33></a>â”‚
<a id=__codelineno-40-34 name=__codelineno-40-34 href=#__codelineno-40-34></a>â”œâ”€â”€ pyproject.toml                # â† Metadata del proyecto
<a id=__codelineno-40-35 name=__codelineno-40-35 href=#__codelineno-40-35></a>â”œâ”€â”€ Makefile                      # â† Comandos comunes
<a id=__codelineno-40-36 name=__codelineno-40-36 href=#__codelineno-40-36></a>â”œâ”€â”€ Dockerfile                    # â† ContainerizaciÃ³n
<a id=__codelineno-40-37 name=__codelineno-40-37 href=#__codelineno-40-37></a>â””â”€â”€ README.md                     # â† DocumentaciÃ³n
</code></pre></div> <h3 id=por-que-src-y-no-codigo-en-la-raiz>Â¿Por quÃ© src/ y no cÃ³digo en la raÃ­z?<a class=headerlink href=#por-que-src-y-no-codigo-en-la-raiz title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-41-1 name=__codelineno-41-1 href=#__codelineno-41-1></a><span class=c1># âŒ PROBLEMA: Sin src/, Python puede importar cÃ³digo no instalado</span>
<a id=__codelineno-41-2 name=__codelineno-41-2 href=#__codelineno-41-2></a><span class=c1># Esto causa el famoso &quot;funciona en mi mÃ¡quina pero no en CI&quot;</span>
<a id=__codelineno-41-3 name=__codelineno-41-3 href=#__codelineno-41-3></a>
<a id=__codelineno-41-4 name=__codelineno-41-4 href=#__codelineno-41-4></a><span class=c1># Estructura plana (problemÃ¡tica):</span>
<a id=__codelineno-41-5 name=__codelineno-41-5 href=#__codelineno-41-5></a><span class=c1># myproject/</span>
<a id=__codelineno-41-6 name=__codelineno-41-6 href=#__codelineno-41-6></a><span class=c1># â”œâ”€â”€ mymodule.py</span>
<a id=__codelineno-41-7 name=__codelineno-41-7 href=#__codelineno-41-7></a><span class=c1># â””â”€â”€ tests/</span>
<a id=__codelineno-41-8 name=__codelineno-41-8 href=#__codelineno-41-8></a><span class=c1>#     â””â”€â”€ test_mymodule.py</span>
<a id=__codelineno-41-9 name=__codelineno-41-9 href=#__codelineno-41-9></a>
<a id=__codelineno-41-10 name=__codelineno-41-10 href=#__codelineno-41-10></a><span class=c1># En test_mymodule.py:</span>
<a id=__codelineno-41-11 name=__codelineno-41-11 href=#__codelineno-41-11></a><span class=kn>import</span><span class=w> </span><span class=nn>mymodule</span>  <span class=c1># â† Â¿De dÃ³nde viene? Â¿Del directorio actual? Â¿De pip?</span>
<a id=__codelineno-41-12 name=__codelineno-41-12 href=#__codelineno-41-12></a>
<a id=__codelineno-41-13 name=__codelineno-41-13 href=#__codelineno-41-13></a><span class=c1># âœ… SOLUCIÃ“N: Con src/, el cÃ³digo DEBE estar instalado para importar</span>
<a id=__codelineno-41-14 name=__codelineno-41-14 href=#__codelineno-41-14></a><span class=c1># myproject/</span>
<a id=__codelineno-41-15 name=__codelineno-41-15 href=#__codelineno-41-15></a><span class=c1># â”œâ”€â”€ src/</span>
<a id=__codelineno-41-16 name=__codelineno-41-16 href=#__codelineno-41-16></a><span class=c1># â”‚   â””â”€â”€ mymodule/</span>
<a id=__codelineno-41-17 name=__codelineno-41-17 href=#__codelineno-41-17></a><span class=c1># â”‚       â””â”€â”€ __init__.py</span>
<a id=__codelineno-41-18 name=__codelineno-41-18 href=#__codelineno-41-18></a><span class=c1># â””â”€â”€ tests/</span>
<a id=__codelineno-41-19 name=__codelineno-41-19 href=#__codelineno-41-19></a><span class=c1>#     â””â”€â”€ test_mymodule.py</span>
<a id=__codelineno-41-20 name=__codelineno-41-20 href=#__codelineno-41-20></a>
<a id=__codelineno-41-21 name=__codelineno-41-21 href=#__codelineno-41-21></a><span class=c1># En test_mymodule.py:</span>
<a id=__codelineno-41-22 name=__codelineno-41-22 href=#__codelineno-41-22></a><span class=kn>from</span><span class=w> </span><span class=nn>mymodule</span><span class=w> </span><span class=kn>import</span> <span class=n>something</span>  <span class=c1># â† Solo funciona si `pip install -e .`</span>
</code></pre></div> <h3 id=pyprojecttoml-el-corazon-del-proyecto>pyproject.toml: El CorazÃ³n del Proyecto<a class=headerlink href=#pyprojecttoml-el-corazon-del-proyecto title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-42-1 name=__codelineno-42-1 href=#__codelineno-42-1></a><span class=c1># pyproject.toml - ConfiguraciÃ³n completa del proyecto</span>
<a id=__codelineno-42-2 name=__codelineno-42-2 href=#__codelineno-42-2></a><span class=k>[build-system]</span>
<a id=__codelineno-42-3 name=__codelineno-42-3 href=#__codelineno-42-3></a><span class=n>requires</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;setuptools&gt;=61.0&quot;</span><span class=p>]</span>
<a id=__codelineno-42-4 name=__codelineno-42-4 href=#__codelineno-42-4></a><span class=n>build-backend</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;setuptools.build_meta&quot;</span>
<a id=__codelineno-42-5 name=__codelineno-42-5 href=#__codelineno-42-5></a>
<a id=__codelineno-42-6 name=__codelineno-42-6 href=#__codelineno-42-6></a><span class=k>[project]</span>
<a id=__codelineno-42-7 name=__codelineno-42-7 href=#__codelineno-42-7></a><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;bankchurn&quot;</span>
<a id=__codelineno-42-8 name=__codelineno-42-8 href=#__codelineno-42-8></a><span class=n>version</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;1.0.0&quot;</span>
<a id=__codelineno-42-9 name=__codelineno-42-9 href=#__codelineno-42-9></a><span class=n>description</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;Bank Customer Churn Prediction System&quot;</span>
<a id=__codelineno-42-10 name=__codelineno-42-10 href=#__codelineno-42-10></a><span class=n>authors</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<a id=__codelineno-42-11 name=__codelineno-42-11 href=#__codelineno-42-11></a><span class=w>    </span><span class=p>{</span><span class=n>name</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=s2>&quot;Daniel Duque&quot;</span><span class=p>,</span><span class=w> </span><span class=n>email</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=s2>&quot;duque@example.com&quot;</span><span class=p>}</span>
<a id=__codelineno-42-12 name=__codelineno-42-12 href=#__codelineno-42-12></a><span class=p>]</span>
<a id=__codelineno-42-13 name=__codelineno-42-13 href=#__codelineno-42-13></a><span class=n>readme</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;README.md&quot;</span>
<a id=__codelineno-42-14 name=__codelineno-42-14 href=#__codelineno-42-14></a><span class=n>requires-python</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;&gt;=3.10&quot;</span>
<a id=__codelineno-42-15 name=__codelineno-42-15 href=#__codelineno-42-15></a><span class=n>license</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>{</span><span class=n>text</span><span class=w> </span><span class=p>=</span><span class=w> </span><span class=s2>&quot;MIT&quot;</span><span class=p>}</span>
<a id=__codelineno-42-16 name=__codelineno-42-16 href=#__codelineno-42-16></a>
<a id=__codelineno-42-17 name=__codelineno-42-17 href=#__codelineno-42-17></a><span class=n>dependencies</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<a id=__codelineno-42-18 name=__codelineno-42-18 href=#__codelineno-42-18></a><span class=w>    </span><span class=s2>&quot;pandas&gt;=2.0.0&quot;</span><span class=p>,</span>
<a id=__codelineno-42-19 name=__codelineno-42-19 href=#__codelineno-42-19></a><span class=w>    </span><span class=s2>&quot;scikit-learn&gt;=1.3.0&quot;</span><span class=p>,</span>
<a id=__codelineno-42-20 name=__codelineno-42-20 href=#__codelineno-42-20></a><span class=w>    </span><span class=s2>&quot;pydantic&gt;=2.0.0&quot;</span><span class=p>,</span>
<a id=__codelineno-42-21 name=__codelineno-42-21 href=#__codelineno-42-21></a><span class=w>    </span><span class=s2>&quot;pyyaml&gt;=6.0&quot;</span><span class=p>,</span>
<a id=__codelineno-42-22 name=__codelineno-42-22 href=#__codelineno-42-22></a><span class=w>    </span><span class=s2>&quot;mlflow&gt;=2.9.0&quot;</span><span class=p>,</span>
<a id=__codelineno-42-23 name=__codelineno-42-23 href=#__codelineno-42-23></a><span class=w>    </span><span class=s2>&quot;fastapi&gt;=0.104.0&quot;</span><span class=p>,</span>
<a id=__codelineno-42-24 name=__codelineno-42-24 href=#__codelineno-42-24></a><span class=w>    </span><span class=s2>&quot;uvicorn&gt;=0.24.0&quot;</span><span class=p>,</span>
<a id=__codelineno-42-25 name=__codelineno-42-25 href=#__codelineno-42-25></a><span class=p>]</span>
<a id=__codelineno-42-26 name=__codelineno-42-26 href=#__codelineno-42-26></a>
<a id=__codelineno-42-27 name=__codelineno-42-27 href=#__codelineno-42-27></a><span class=k>[project.optional-dependencies]</span>
<a id=__codelineno-42-28 name=__codelineno-42-28 href=#__codelineno-42-28></a><span class=n>dev</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<a id=__codelineno-42-29 name=__codelineno-42-29 href=#__codelineno-42-29></a><span class=w>    </span><span class=s2>&quot;pytest&gt;=7.4.0&quot;</span><span class=p>,</span>
<a id=__codelineno-42-30 name=__codelineno-42-30 href=#__codelineno-42-30></a><span class=w>    </span><span class=s2>&quot;pytest-cov&gt;=4.1.0&quot;</span><span class=p>,</span>
<a id=__codelineno-42-31 name=__codelineno-42-31 href=#__codelineno-42-31></a><span class=w>    </span><span class=s2>&quot;black&gt;=23.0.0&quot;</span><span class=p>,</span>
<a id=__codelineno-42-32 name=__codelineno-42-32 href=#__codelineno-42-32></a><span class=w>    </span><span class=s2>&quot;mypy&gt;=1.7.0&quot;</span><span class=p>,</span>
<a id=__codelineno-42-33 name=__codelineno-42-33 href=#__codelineno-42-33></a><span class=w>    </span><span class=s2>&quot;ruff&gt;=0.1.0&quot;</span><span class=p>,</span>
<a id=__codelineno-42-34 name=__codelineno-42-34 href=#__codelineno-42-34></a><span class=p>]</span>
<a id=__codelineno-42-35 name=__codelineno-42-35 href=#__codelineno-42-35></a>
<a id=__codelineno-42-36 name=__codelineno-42-36 href=#__codelineno-42-36></a><span class=k>[project.scripts]</span>
<a id=__codelineno-42-37 name=__codelineno-42-37 href=#__codelineno-42-37></a><span class=n>bankchurn</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;bankchurn.cli:main&quot;</span><span class=w>  </span><span class=c1># â† Comando CLI</span>
<a id=__codelineno-42-38 name=__codelineno-42-38 href=#__codelineno-42-38></a>
<a id=__codelineno-42-39 name=__codelineno-42-39 href=#__codelineno-42-39></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-42-40 name=__codelineno-42-40 href=#__codelineno-42-40></a><span class=c1># HERRAMIENTAS</span>
<a id=__codelineno-42-41 name=__codelineno-42-41 href=#__codelineno-42-41></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-42-42 name=__codelineno-42-42 href=#__codelineno-42-42></a>
<a id=__codelineno-42-43 name=__codelineno-42-43 href=#__codelineno-42-43></a><span class=k>[tool.setuptools.packages.find]</span>
<a id=__codelineno-42-44 name=__codelineno-42-44 href=#__codelineno-42-44></a><span class=n>where</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;src&quot;</span><span class=p>]</span><span class=w>  </span><span class=c1># â† Busca paquetes en src/</span>
<a id=__codelineno-42-45 name=__codelineno-42-45 href=#__codelineno-42-45></a>
<a id=__codelineno-42-46 name=__codelineno-42-46 href=#__codelineno-42-46></a><span class=k>[tool.pytest.ini_options]</span>
<a id=__codelineno-42-47 name=__codelineno-42-47 href=#__codelineno-42-47></a><span class=n>testpaths</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;tests&quot;</span><span class=p>]</span>
<a id=__codelineno-42-48 name=__codelineno-42-48 href=#__codelineno-42-48></a><span class=n>python_files</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;test_*.py&quot;</span><span class=p>]</span>
<a id=__codelineno-42-49 name=__codelineno-42-49 href=#__codelineno-42-49></a><span class=n>addopts</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;-v --cov=src/bankchurn --cov-report=term-missing&quot;</span>
<a id=__codelineno-42-50 name=__codelineno-42-50 href=#__codelineno-42-50></a>
<a id=__codelineno-42-51 name=__codelineno-42-51 href=#__codelineno-42-51></a><span class=k>[tool.coverage.run]</span>
<a id=__codelineno-42-52 name=__codelineno-42-52 href=#__codelineno-42-52></a><span class=n>source</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;src&quot;</span><span class=p>]</span>
<a id=__codelineno-42-53 name=__codelineno-42-53 href=#__codelineno-42-53></a><span class=n>omit</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;tests/*&quot;</span><span class=p>]</span>
<a id=__codelineno-42-54 name=__codelineno-42-54 href=#__codelineno-42-54></a>
<a id=__codelineno-42-55 name=__codelineno-42-55 href=#__codelineno-42-55></a><span class=k>[tool.coverage.report]</span>
<a id=__codelineno-42-56 name=__codelineno-42-56 href=#__codelineno-42-56></a><span class=n>fail_under</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>79</span><span class=w>  </span><span class=c1># â† Coverage mÃ­nimo para pasar CI</span>
<a id=__codelineno-42-57 name=__codelineno-42-57 href=#__codelineno-42-57></a>
<a id=__codelineno-42-58 name=__codelineno-42-58 href=#__codelineno-42-58></a><span class=k>[tool.black]</span>
<a id=__codelineno-42-59 name=__codelineno-42-59 href=#__codelineno-42-59></a><span class=n>line-length</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mi>100</span>
<a id=__codelineno-42-60 name=__codelineno-42-60 href=#__codelineno-42-60></a><span class=n>target-version</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;py311&quot;</span><span class=p>]</span>
<a id=__codelineno-42-61 name=__codelineno-42-61 href=#__codelineno-42-61></a>
<a id=__codelineno-42-62 name=__codelineno-42-62 href=#__codelineno-42-62></a><span class=k>[tool.mypy]</span>
<a id=__codelineno-42-63 name=__codelineno-42-63 href=#__codelineno-42-63></a><span class=n>python_version</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;3.11&quot;</span>
<a id=__codelineno-42-64 name=__codelineno-42-64 href=#__codelineno-42-64></a><span class=n>warn_return_any</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span>
<a id=__codelineno-42-65 name=__codelineno-42-65 href=#__codelineno-42-65></a><span class=n>disallow_untyped_defs</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span>
<a id=__codelineno-42-66 name=__codelineno-42-66 href=#__codelineno-42-66></a><span class=n>ignore_missing_imports</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span>
</code></pre></div> <h3 id=instalacion-en-modo-editable>InstalaciÃ³n en Modo Editable<a class=headerlink href=#instalacion-en-modo-editable title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-43-1 name=__codelineno-43-1 href=#__codelineno-43-1></a><span class=c1># Instalar el paquete en modo editable (para desarrollo)</span>
<a id=__codelineno-43-2 name=__codelineno-43-2 href=#__codelineno-43-2></a>pip<span class=w> </span>install<span class=w> </span>-e<span class=w> </span>.
<a id=__codelineno-43-3 name=__codelineno-43-3 href=#__codelineno-43-3></a>
<a id=__codelineno-43-4 name=__codelineno-43-4 href=#__codelineno-43-4></a><span class=c1># Ahora puedes importar desde cualquier lugar</span>
<a id=__codelineno-43-5 name=__codelineno-43-5 href=#__codelineno-43-5></a>python<span class=w> </span>-c<span class=w> </span><span class=s2>&quot;from bankchurn.config import BankChurnConfig; print(&#39;âœ… Funciona!&#39;)&quot;</span>
<a id=__codelineno-43-6 name=__codelineno-43-6 href=#__codelineno-43-6></a>
<a id=__codelineno-43-7 name=__codelineno-43-7 href=#__codelineno-43-7></a><span class=c1># Y los tests tambiÃ©n funcionan</span>
<a id=__codelineno-43-8 name=__codelineno-43-8 href=#__codelineno-43-8></a>pytest<span class=w> </span>tests/
</code></pre></div> <h3 id=mapa-mental-de-conceptos-src-layout>ğŸ§  Mapa Mental de Conceptos: src/ Layout<a class=headerlink href=#mapa-mental-de-conceptos-src-layout title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-44-1 name=__codelineno-44-1 href=#__codelineno-44-1></a>                        â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
<a id=__codelineno-44-2 name=__codelineno-44-2 href=#__codelineno-44-2></a>                        â•‘    ESTRUCTURA PROFESIONAL DE PROYECTO   â•‘
<a id=__codelineno-44-3 name=__codelineno-44-3 href=#__codelineno-44-3></a>                        â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
<a id=__codelineno-44-4 name=__codelineno-44-4 href=#__codelineno-44-4></a>                                          â”‚
<a id=__codelineno-44-5 name=__codelineno-44-5 href=#__codelineno-44-5></a>          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
<a id=__codelineno-44-6 name=__codelineno-44-6 href=#__codelineno-44-6></a>          â–¼                               â–¼                               â–¼
<a id=__codelineno-44-7 name=__codelineno-44-7 href=#__codelineno-44-7></a>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
<a id=__codelineno-44-8 name=__codelineno-44-8 href=#__codelineno-44-8></a>â”‚   src/ layout    â”‚             â”‚  pyproject.toml  â”‚           â”‚   InstalaciÃ³n    â”‚
<a id=__codelineno-44-9 name=__codelineno-44-9 href=#__codelineno-44-9></a>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<a id=__codelineno-44-10 name=__codelineno-44-10 href=#__codelineno-44-10></a>       â”‚                               â”‚                              â”‚
<a id=__codelineno-44-11 name=__codelineno-44-11 href=#__codelineno-44-11></a>â”œâ”€ src/&lt;paquete&gt;/               â”œâ”€ [project]                    â”œâ”€ pip install -e .
<a id=__codelineno-44-12 name=__codelineno-44-12 href=#__codelineno-44-12></a>â”œâ”€ tests/                       â”œâ”€ dependencies                 â”œâ”€ modo editable
<a id=__codelineno-44-13 name=__codelineno-44-13 href=#__codelineno-44-13></a>â”œâ”€ configs/                     â”œâ”€ [project.scripts]            â”œâ”€ importable
<a id=__codelineno-44-14 name=__codelineno-44-14 href=#__codelineno-44-14></a>â”œâ”€ data/                        â”œâ”€ [tool.pytest]                â””â”€ reproducible
<a id=__codelineno-44-15 name=__codelineno-44-15 href=#__codelineno-44-15></a>â””â”€ artifacts/                   â””â”€ [tool.mypy]
</code></pre></div> <p><strong>TÃ©rminos clave que debes dominar:</strong></p> <table> <thead> <tr> <th>TÃ©rmino</th> <th>Significado</th> <th>Ejemplo</th> </tr> </thead> <tbody> <tr> <td><strong>src/ layout</strong></td> <td>CÃ³digo fuente en carpeta <code>src/</code></td> <td><code>src/bankchurn/training.py</code></td> </tr> <tr> <td><strong>pyproject.toml</strong></td> <td>Archivo de configuraciÃ³n del proyecto</td> <td>Define nombre, deps, herramientas</td> </tr> <tr> <td><strong>Modo editable</strong></td> <td>Instalar paquete para desarrollo</td> <td><code>pip install -e .</code></td> </tr> <tr> <td><strong><strong>init</strong>.py</strong></td> <td>Marca una carpeta como paquete Python</td> <td>Permite imports</td> </tr> <tr> <td><strong>Paquete</strong></td> <td>CÃ³digo distribuible e importable</td> <td><code>from bankchurn import ...</code></td> </tr> <tr> <td><strong>Makefile</strong></td> <td>Comandos comunes automatizados</td> <td><code>make train</code>, <code>make test</code></td> </tr> </tbody> </table> <hr> <h3 id=ejercicio-puente-crear-estructura-basica>ğŸ’» Ejercicio Puente: Crear Estructura BÃ¡sica<a class=headerlink href=#ejercicio-puente-crear-estructura-basica title="Permanent link">&para;</a></h3> <blockquote> <p><strong>Meta</strong>: Antes de estructurar un proyecto ML completo, practica con uno simple.</p> </blockquote> <p><strong>Ejercicio 1: Crear estructura mÃ­nima</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-45-1 name=__codelineno-45-1 href=#__codelineno-45-1></a><span class=c1># TU TAREA: Crea esta estructura desde cero</span>
<a id=__codelineno-45-2 name=__codelineno-45-2 href=#__codelineno-45-2></a><span class=c1># mylib/</span>
<a id=__codelineno-45-3 name=__codelineno-45-3 href=#__codelineno-45-3></a><span class=c1># â”œâ”€â”€ src/</span>
<a id=__codelineno-45-4 name=__codelineno-45-4 href=#__codelineno-45-4></a><span class=c1># â”‚   â””â”€â”€ mylib/</span>
<a id=__codelineno-45-5 name=__codelineno-45-5 href=#__codelineno-45-5></a><span class=c1># â”‚       â”œâ”€â”€ __init__.py</span>
<a id=__codelineno-45-6 name=__codelineno-45-6 href=#__codelineno-45-6></a><span class=c1># â”‚       â””â”€â”€ calculator.py   # funciÃ³n add(a, b) -&gt; int</span>
<a id=__codelineno-45-7 name=__codelineno-45-7 href=#__codelineno-45-7></a><span class=c1># â”œâ”€â”€ tests/</span>
<a id=__codelineno-45-8 name=__codelineno-45-8 href=#__codelineno-45-8></a><span class=c1># â”‚   â””â”€â”€ test_calculator.py</span>
<a id=__codelineno-45-9 name=__codelineno-45-9 href=#__codelineno-45-9></a><span class=c1># â””â”€â”€ pyproject.toml</span>
<a id=__codelineno-45-10 name=__codelineno-45-10 href=#__codelineno-45-10></a>
<a id=__codelineno-45-11 name=__codelineno-45-11 href=#__codelineno-45-11></a><span class=c1># Pista 1: Inicia con estos comandos</span>
<a id=__codelineno-45-12 name=__codelineno-45-12 href=#__codelineno-45-12></a>mkdir<span class=w> </span>-p<span class=w> </span>mylib/src/mylib<span class=w> </span>mylib/tests
<a id=__codelineno-45-13 name=__codelineno-45-13 href=#__codelineno-45-13></a>touch<span class=w> </span>mylib/src/mylib/__init__.py
</code></pre></div></p> <p><strong>Ejercicio 2: Escribir pyproject.toml mÃ­nimo</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-46-1 name=__codelineno-46-1 href=#__codelineno-46-1></a><span class=c1># TU TAREA: Completa este pyproject.toml</span>
<a id=__codelineno-46-2 name=__codelineno-46-2 href=#__codelineno-46-2></a><span class=k>[build-system]</span>
<a id=__codelineno-46-3 name=__codelineno-46-3 href=#__codelineno-46-3></a><span class=n>requires</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;setuptools&gt;=61.0&quot;</span><span class=p>]</span>
<a id=__codelineno-46-4 name=__codelineno-46-4 href=#__codelineno-46-4></a><span class=n>build-backend</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;setuptools.build_meta&quot;</span>
<a id=__codelineno-46-5 name=__codelineno-46-5 href=#__codelineno-46-5></a>
<a id=__codelineno-46-6 name=__codelineno-46-6 href=#__codelineno-46-6></a><span class=k>[project]</span>
<a id=__codelineno-46-7 name=__codelineno-46-7 href=#__codelineno-46-7></a><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;mylib&quot;</span>
<a id=__codelineno-46-8 name=__codelineno-46-8 href=#__codelineno-46-8></a><span class=n>version</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;0.1.0&quot;</span>
<a id=__codelineno-46-9 name=__codelineno-46-9 href=#__codelineno-46-9></a><span class=c1># Â¿QuÃ© mÃ¡s necesitas para que funcione?</span>
<a id=__codelineno-46-10 name=__codelineno-46-10 href=#__codelineno-46-10></a>
<a id=__codelineno-46-11 name=__codelineno-46-11 href=#__codelineno-46-11></a><span class=k>[tool.setuptools.packages.find]</span>
<a id=__codelineno-46-12 name=__codelineno-46-12 href=#__codelineno-46-12></a><span class=c1># Â¿DÃ³nde busca los paquetes?</span>
</code></pre></div></p> <p><strong>Ejercicio 3: Verificar instalaciÃ³n</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-47-1 name=__codelineno-47-1 href=#__codelineno-47-1></a><span class=c1># TU TAREA: DespuÃ©s de crear la estructura</span>
<a id=__codelineno-47-2 name=__codelineno-47-2 href=#__codelineno-47-2></a><span class=nb>cd</span><span class=w> </span>mylib
<a id=__codelineno-47-3 name=__codelineno-47-3 href=#__codelineno-47-3></a>pip<span class=w> </span>install<span class=w> </span>-e<span class=w> </span>.
<a id=__codelineno-47-4 name=__codelineno-47-4 href=#__codelineno-47-4></a>python<span class=w> </span>-c<span class=w> </span><span class=s2>&quot;from mylib.calculator import add; print(add(2, 3))&quot;</span>
<a id=__codelineno-47-5 name=__codelineno-47-5 href=#__codelineno-47-5></a><span class=c1># Â¿QuÃ© deberÃ­as ver? Â¿QuÃ© error obtienes si algo estÃ¡ mal?</span>
</code></pre></div></p> <details> <summary>ğŸ” Ver Soluciones</summary> <div class=highlight><pre><span></span><code><a id=__codelineno-48-1 name=__codelineno-48-1 href=#__codelineno-48-1></a><span class=c1># Crear estructura</span>
<a id=__codelineno-48-2 name=__codelineno-48-2 href=#__codelineno-48-2></a>mkdir<span class=w> </span>-p<span class=w> </span>mylib/src/mylib<span class=w> </span>mylib/tests
<a id=__codelineno-48-3 name=__codelineno-48-3 href=#__codelineno-48-3></a>touch<span class=w> </span>mylib/src/mylib/__init__.py
<a id=__codelineno-48-4 name=__codelineno-48-4 href=#__codelineno-48-4></a>
<a id=__codelineno-48-5 name=__codelineno-48-5 href=#__codelineno-48-5></a><span class=c1># calculator.py</span>
<a id=__codelineno-48-6 name=__codelineno-48-6 href=#__codelineno-48-6></a>cat<span class=w> </span>&gt;<span class=w> </span>mylib/src/mylib/calculator.py<span class=w> </span><span class=s>&lt;&lt; &#39;EOF&#39;</span>
<a id=__codelineno-48-7 name=__codelineno-48-7 href=#__codelineno-48-7></a><span class=s>def add(a: int, b: int) -&gt; int:</span>
<a id=__codelineno-48-8 name=__codelineno-48-8 href=#__codelineno-48-8></a><span class=s>    &quot;&quot;&quot;Suma dos enteros.&quot;&quot;&quot;</span>
<a id=__codelineno-48-9 name=__codelineno-48-9 href=#__codelineno-48-9></a><span class=s>    return a + b</span>
<a id=__codelineno-48-10 name=__codelineno-48-10 href=#__codelineno-48-10></a><span class=s>EOF</span>
<a id=__codelineno-48-11 name=__codelineno-48-11 href=#__codelineno-48-11></a>
<a id=__codelineno-48-12 name=__codelineno-48-12 href=#__codelineno-48-12></a><span class=c1># test_calculator.py</span>
<a id=__codelineno-48-13 name=__codelineno-48-13 href=#__codelineno-48-13></a>cat<span class=w> </span>&gt;<span class=w> </span>mylib/tests/test_calculator.py<span class=w> </span><span class=s>&lt;&lt; &#39;EOF&#39;</span>
<a id=__codelineno-48-14 name=__codelineno-48-14 href=#__codelineno-48-14></a><span class=s>from mylib.calculator import add</span>
<a id=__codelineno-48-15 name=__codelineno-48-15 href=#__codelineno-48-15></a>
<a id=__codelineno-48-16 name=__codelineno-48-16 href=#__codelineno-48-16></a><span class=s>def test_add():</span>
<a id=__codelineno-48-17 name=__codelineno-48-17 href=#__codelineno-48-17></a><span class=s>    assert add(2, 3) == 5</span>
<a id=__codelineno-48-18 name=__codelineno-48-18 href=#__codelineno-48-18></a><span class=s>EOF</span>
<a id=__codelineno-48-19 name=__codelineno-48-19 href=#__codelineno-48-19></a>
<a id=__codelineno-48-20 name=__codelineno-48-20 href=#__codelineno-48-20></a><span class=c1># pyproject.toml completo</span>
<a id=__codelineno-48-21 name=__codelineno-48-21 href=#__codelineno-48-21></a>cat<span class=w> </span>&gt;<span class=w> </span>mylib/pyproject.toml<span class=w> </span><span class=s>&lt;&lt; &#39;EOF&#39;</span>
<a id=__codelineno-48-22 name=__codelineno-48-22 href=#__codelineno-48-22></a><span class=s>[build-system]</span>
<a id=__codelineno-48-23 name=__codelineno-48-23 href=#__codelineno-48-23></a><span class=s>requires = [&quot;setuptools&gt;=61.0&quot;]</span>
<a id=__codelineno-48-24 name=__codelineno-48-24 href=#__codelineno-48-24></a><span class=s>build-backend = &quot;setuptools.build_meta&quot;</span>
<a id=__codelineno-48-25 name=__codelineno-48-25 href=#__codelineno-48-25></a>
<a id=__codelineno-48-26 name=__codelineno-48-26 href=#__codelineno-48-26></a><span class=s>[project]</span>
<a id=__codelineno-48-27 name=__codelineno-48-27 href=#__codelineno-48-27></a><span class=s>name = &quot;mylib&quot;</span>
<a id=__codelineno-48-28 name=__codelineno-48-28 href=#__codelineno-48-28></a><span class=s>version = &quot;0.1.0&quot;</span>
<a id=__codelineno-48-29 name=__codelineno-48-29 href=#__codelineno-48-29></a><span class=s>requires-python = &quot;&gt;=3.10&quot;</span>
<a id=__codelineno-48-30 name=__codelineno-48-30 href=#__codelineno-48-30></a>
<a id=__codelineno-48-31 name=__codelineno-48-31 href=#__codelineno-48-31></a><span class=s>[tool.setuptools.packages.find]</span>
<a id=__codelineno-48-32 name=__codelineno-48-32 href=#__codelineno-48-32></a><span class=s>where = [&quot;src&quot;]</span>
<a id=__codelineno-48-33 name=__codelineno-48-33 href=#__codelineno-48-33></a><span class=s>EOF</span>
<a id=__codelineno-48-34 name=__codelineno-48-34 href=#__codelineno-48-34></a>
<a id=__codelineno-48-35 name=__codelineno-48-35 href=#__codelineno-48-35></a><span class=c1># Verificar</span>
<a id=__codelineno-48-36 name=__codelineno-48-36 href=#__codelineno-48-36></a><span class=nb>cd</span><span class=w> </span>mylib
<a id=__codelineno-48-37 name=__codelineno-48-37 href=#__codelineno-48-37></a>pip<span class=w> </span>install<span class=w> </span>-e<span class=w> </span>.
<a id=__codelineno-48-38 name=__codelineno-48-38 href=#__codelineno-48-38></a>python<span class=w> </span>-c<span class=w> </span><span class=s2>&quot;from mylib.calculator import add; print(add(2, 3))&quot;</span><span class=w>  </span><span class=c1># Output: 5</span>
<a id=__codelineno-48-39 name=__codelineno-48-39 href=#__codelineno-48-39></a>pytest<span class=w> </span>tests/<span class=w>  </span><span class=c1># Debe pasar</span>
</code></pre></div> </details> <hr> <h3 id=practica-del-portafolio-estructura-de-bankchurn>ğŸ› ï¸ PrÃ¡ctica del Portafolio: Estructura de BankChurn<a class=headerlink href=#practica-del-portafolio-estructura-de-bankchurn title="Permanent link">&para;</a></h3> <blockquote> <p><strong>Tarea</strong>: Verificar y entender la estructura del proyecto BankChurn-Predictor.</p> </blockquote> <p><strong>Paso 1: Explora la estructura existente</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-49-1 name=__codelineno-49-1 href=#__codelineno-49-1></a><span class=nb>cd</span><span class=w> </span>BankChurn-Predictor
<a id=__codelineno-49-2 name=__codelineno-49-2 href=#__codelineno-49-2></a>tree<span class=w> </span>-L<span class=w> </span><span class=m>3</span><span class=w> </span>--dirsfirst
<a id=__codelineno-49-3 name=__codelineno-49-3 href=#__codelineno-49-3></a><span class=c1># O si no tienes tree:</span>
<a id=__codelineno-49-4 name=__codelineno-49-4 href=#__codelineno-49-4></a>find<span class=w> </span>.<span class=w> </span>-type<span class=w> </span>d<span class=w> </span>-name<span class=w> </span><span class=s2>&quot;__pycache__&quot;</span><span class=w> </span>-prune<span class=w> </span>-o<span class=w> </span>-print<span class=w> </span><span class=p>|</span><span class=w> </span>head<span class=w> </span>-40
</code></pre></div></p> <p><strong>Paso 2: Verifica los puntos clave (checklist)</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-50-1 name=__codelineno-50-1 href=#__codelineno-50-1></a>[ ] Â¿Existe src/bankchurn/__init__.py?
<a id=__codelineno-50-2 name=__codelineno-50-2 href=#__codelineno-50-2></a>[ ] Â¿Existe pyproject.toml en la raÃ­z?
<a id=__codelineno-50-3 name=__codelineno-50-3 href=#__codelineno-50-3></a>[ ] Â¿El pyproject.toml tiene [tool.setuptools.packages.find] where = [&quot;src&quot;]?
<a id=__codelineno-50-4 name=__codelineno-50-4 href=#__codelineno-50-4></a>[ ] Â¿Puedes ejecutar: pip install -e . sin errores?
<a id=__codelineno-50-5 name=__codelineno-50-5 href=#__codelineno-50-5></a>[ ] Â¿Puedes ejecutar: python -c &quot;from bankchurn.config import BankChurnConfig&quot;?
</code></pre></div></p> <p><strong>Paso 3: Si algo falla, diagnostica (pistas guiadas)</strong></p> <div class=highlight><pre><span></span><code><a id=__codelineno-51-1 name=__codelineno-51-1 href=#__codelineno-51-1></a><span class=c1># Error: &quot;No module named &#39;bankchurn&#39;&quot;</span>
<a id=__codelineno-51-2 name=__codelineno-51-2 href=#__codelineno-51-2></a><span class=c1># DiagnÃ³stico: Â¿Instalaste en modo editable?</span>
<a id=__codelineno-51-3 name=__codelineno-51-3 href=#__codelineno-51-3></a>pip<span class=w> </span>list<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>bankchurn
<a id=__codelineno-51-4 name=__codelineno-51-4 href=#__codelineno-51-4></a><span class=c1># Si no aparece â†’ pip install -e .</span>
<a id=__codelineno-51-5 name=__codelineno-51-5 href=#__codelineno-51-5></a>
<a id=__codelineno-51-6 name=__codelineno-51-6 href=#__codelineno-51-6></a><span class=c1># Error: &quot;ModuleNotFoundError&quot; en CI pero no local</span>
<a id=__codelineno-51-7 name=__codelineno-51-7 href=#__codelineno-51-7></a><span class=c1># DiagnÃ³stico: Â¿Tu pyproject.toml tiene where = [&quot;src&quot;]?</span>
<a id=__codelineno-51-8 name=__codelineno-51-8 href=#__codelineno-51-8></a>grep<span class=w> </span>-A2<span class=w> </span><span class=s2>&quot;packages.find&quot;</span><span class=w> </span>pyproject.toml
</code></pre></div> <p><strong>âŒ NO hagas esto:</strong> - Poner cÃ³digo Python en la raÃ­z del proyecto - Hacer imports relativos desde scripts sueltos - Modificar PYTHONPATH manualmente</p> <p><strong>âœ… SÃ haz esto:</strong> - Todo cÃ³digo en <code>src/&lt;paquete&gt;/</code> - Instalar siempre con <code>pip install -e .</code> - Tests que importen el paquete como lo harÃ­a un usuario</p> <hr> <h3 id=checkpoint-de-conocimiento-src-layout>âœ… Checkpoint de Conocimiento: src/ Layout<a class=headerlink href=#checkpoint-de-conocimiento-src-layout title="Permanent link">&para;</a></h3> <p><strong>Pregunta 1</strong>: Â¿Por quÃ© ponemos el cÃ³digo en <code>src/</code> en vez de en la raÃ­z?</p> <p>A) Es mÃ¡s rÃ¡pido de ejecutar<br> B) Fuerza que el cÃ³digo estÃ© INSTALADO para poder importarlo<br> C) Ocupa menos espacio en disco<br> D) Es requerido por GitHub </p> <p><strong>Pregunta 2</strong>: Â¿QuÃ© hace <code>pip install -e .</code>?</p> <p>A) Instala el paquete en modo producciÃ³n<br> B) Instala el paquete de forma que los cambios se reflejen sin reinstalar<br> C) Elimina el paquete existente<br> D) Crea un archivo ejecutable </p> <p><strong>Pregunta 3</strong>: Â¿CuÃ¡l es el propÃ³sito principal de <code>pyproject.toml</code>?</p> <p>A) Almacenar datos del modelo<br> B) Definir metadata, dependencias y configuraciÃ³n de herramientas<br> C) Guardar logs de ejecuciÃ³n<br> D) Contener los tests </p> <p><strong>ğŸ”§ Escenario de Debugging:</strong></p> <div class=highlight><pre><span></span><code><a id=__codelineno-52-1 name=__codelineno-52-1 href=#__codelineno-52-1></a>SituaciÃ³n: Tu cÃ³digo funciona perfecto en local.
<a id=__codelineno-52-2 name=__codelineno-52-2 href=#__codelineno-52-2></a>En GitHub Actions ves:
<a id=__codelineno-52-3 name=__codelineno-52-3 href=#__codelineno-52-3></a>  ModuleNotFoundError: No module named &#39;bankchurn&#39;
<a id=__codelineno-52-4 name=__codelineno-52-4 href=#__codelineno-52-4></a>
<a id=__codelineno-52-5 name=__codelineno-52-5 href=#__codelineno-52-5></a>El workflow de CI tiene:
<a id=__codelineno-52-6 name=__codelineno-52-6 href=#__codelineno-52-6></a>  - name: Install
<a id=__codelineno-52-7 name=__codelineno-52-7 href=#__codelineno-52-7></a>    run: pip install -r requirements.txt
</code></pre></div> <p><strong>Â¿CuÃ¡l es el problema y cÃ³mo lo solucionarÃ­as?</strong></p> <details> <summary>ğŸ” Ver Respuestas</summary> **Pregunta 1**: B) Fuerza que el cÃ³digo estÃ© INSTALADO para poder importarlo. Esto evita el problema "funciona en mi mÃ¡quina". **Pregunta 2**: B) Instala el paquete de forma que los cambios se reflejen sin reinstalar. El `-e` significa "editable". **Pregunta 3**: B) Definir metadata, dependencias y configuraciÃ³n de herramientas. Es el estÃ¡ndar moderno de Python. **Escenario de Debugging**: - **Problema**: El CI solo instala dependencias de `requirements.txt`, pero NO instala TU paquete. - **SoluciÃ³n**: Cambiar el workflow: <div class=highlight><pre><span></span><code><a id=__codelineno-53-1 name=__codelineno-53-1 href=#__codelineno-53-1></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Install</span>
<a id=__codelineno-53-2 name=__codelineno-53-2 href=#__codelineno-53-2></a><span class=w>  </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">pip install -e &quot;.[dev]&quot;</span>
</code></pre></div> Esto instala tu paquete Y las dependencias de desarrollo. </details> <hr> <p><a id=14-principios-solid-para-ml></a></p> <h2 id=14-principios-solid-para-ml>1.4 Principios SOLID para ML<a class=headerlink href=#14-principios-solid-para-ml title="Permanent link">&para;</a></h2> <h3 id=explicacion-teorica-un-modulo-una-tarea>ğŸ“ ExplicaciÃ³n TeÃ³rica: Un MÃ³dulo, Una Tarea<a class=headerlink href=#explicacion-teorica-un-modulo-una-tarea title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-54-1 name=__codelineno-54-1 href=#__codelineno-54-1></a><span class=c1># âŒ ANTES: Un archivo hace TODO</span>
<a id=__codelineno-54-2 name=__codelineno-54-2 href=#__codelineno-54-2></a><span class=c1># training.py (500 lÃ­neas)</span>
<a id=__codelineno-54-3 name=__codelineno-54-3 href=#__codelineno-54-3></a><span class=k>def</span><span class=w> </span><span class=nf>train_model</span><span class=p>(</span><span class=n>data_path</span><span class=p>,</span> <span class=n>config_path</span><span class=p>,</span> <span class=n>output_path</span><span class=p>):</span>
<a id=__codelineno-54-4 name=__codelineno-54-4 href=#__codelineno-54-4></a>    <span class=c1># Carga datos (lÃ­neas 1-50)</span>
<a id=__codelineno-54-5 name=__codelineno-54-5 href=#__codelineno-54-5></a>    <span class=c1># Limpia datos (lÃ­neas 51-100)</span>
<a id=__codelineno-54-6 name=__codelineno-54-6 href=#__codelineno-54-6></a>    <span class=c1># Feature engineering (lÃ­neas 101-200)</span>
<a id=__codelineno-54-7 name=__codelineno-54-7 href=#__codelineno-54-7></a>    <span class=c1># Entrena modelo (lÃ­neas 201-300)</span>
<a id=__codelineno-54-8 name=__codelineno-54-8 href=#__codelineno-54-8></a>    <span class=c1># EvalÃºa modelo (lÃ­neas 301-400)</span>
<a id=__codelineno-54-9 name=__codelineno-54-9 href=#__codelineno-54-9></a>    <span class=c1># Guarda artefactos (lÃ­neas 401-450)</span>
<a id=__codelineno-54-10 name=__codelineno-54-10 href=#__codelineno-54-10></a>    <span class=c1># Loguea a MLflow (lÃ­neas 451-500)</span>
<a id=__codelineno-54-11 name=__codelineno-54-11 href=#__codelineno-54-11></a>    <span class=k>pass</span>
<a id=__codelineno-54-12 name=__codelineno-54-12 href=#__codelineno-54-12></a>
<a id=__codelineno-54-13 name=__codelineno-54-13 href=#__codelineno-54-13></a><span class=c1># âœ… DESPUÃ‰S: Cada archivo tiene UNA responsabilidad</span>
<a id=__codelineno-54-14 name=__codelineno-54-14 href=#__codelineno-54-14></a><span class=c1># src/bankchurn/</span>
<a id=__codelineno-54-15 name=__codelineno-54-15 href=#__codelineno-54-15></a><span class=c1># â”œâ”€â”€ data.py         â†’ Solo carga y valida datos</span>
<a id=__codelineno-54-16 name=__codelineno-54-16 href=#__codelineno-54-16></a><span class=c1># â”œâ”€â”€ features.py     â†’ Solo feature engineering</span>
<a id=__codelineno-54-17 name=__codelineno-54-17 href=#__codelineno-54-17></a><span class=c1># â”œâ”€â”€ training.py     â†’ Solo entrenamiento</span>
<a id=__codelineno-54-18 name=__codelineno-54-18 href=#__codelineno-54-18></a><span class=c1># â”œâ”€â”€ evaluation.py   â†’ Solo mÃ©tricas</span>
<a id=__codelineno-54-19 name=__codelineno-54-19 href=#__codelineno-54-19></a><span class=c1># â””â”€â”€ prediction.py   â†’ Solo inferencia</span>
</code></pre></div> <h3 id=codigo-real-del-portafolio>CÃ³digo Real del Portafolio<a class=headerlink href=#codigo-real-del-portafolio title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-55-1 name=__codelineno-55-1 href=#__codelineno-55-1></a><span class=c1># src/bankchurn/training.py - SOLO se encarga de entrenar</span>
<a id=__codelineno-55-2 name=__codelineno-55-2 href=#__codelineno-55-2></a><span class=k>class</span><span class=w> </span><span class=nc>ChurnTrainer</span><span class=p>:</span>
<a id=__codelineno-55-3 name=__codelineno-55-3 href=#__codelineno-55-3></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Training pipeline - Single Responsibility.&quot;&quot;&quot;</span>
<a id=__codelineno-55-4 name=__codelineno-55-4 href=#__codelineno-55-4></a>
<a id=__codelineno-55-5 name=__codelineno-55-5 href=#__codelineno-55-5></a>    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>config</span><span class=p>:</span> <span class=n>BankChurnConfig</span><span class=p>):</span>
<a id=__codelineno-55-6 name=__codelineno-55-6 href=#__codelineno-55-6></a>        <span class=bp>self</span><span class=o>.</span><span class=n>config</span> <span class=o>=</span> <span class=n>config</span>
<a id=__codelineno-55-7 name=__codelineno-55-7 href=#__codelineno-55-7></a>
<a id=__codelineno-55-8 name=__codelineno-55-8 href=#__codelineno-55-8></a>    <span class=k>def</span><span class=w> </span><span class=nf>load_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>path</span><span class=p>:</span> <span class=n>Path</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>:</span>
<a id=__codelineno-55-9 name=__codelineno-55-9 href=#__codelineno-55-9></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Delega a mÃ³dulo de datos.&quot;&quot;&quot;</span>
<a id=__codelineno-55-10 name=__codelineno-55-10 href=#__codelineno-55-10></a>        <span class=k>pass</span>
<a id=__codelineno-55-11 name=__codelineno-55-11 href=#__codelineno-55-11></a>
<a id=__codelineno-55-12 name=__codelineno-55-12 href=#__codelineno-55-12></a>    <span class=k>def</span><span class=w> </span><span class=nf>prepare_features</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>df</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Tuple</span><span class=p>[</span><span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>]:</span>
<a id=__codelineno-55-13 name=__codelineno-55-13 href=#__codelineno-55-13></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Prepara X e y.&quot;&quot;&quot;</span>
<a id=__codelineno-55-14 name=__codelineno-55-14 href=#__codelineno-55-14></a>        <span class=k>pass</span>
<a id=__codelineno-55-15 name=__codelineno-55-15 href=#__codelineno-55-15></a>
<a id=__codelineno-55-16 name=__codelineno-55-16 href=#__codelineno-55-16></a>    <span class=k>def</span><span class=w> </span><span class=nf>build_pipeline</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Pipeline</span><span class=p>:</span>
<a id=__codelineno-55-17 name=__codelineno-55-17 href=#__codelineno-55-17></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Construye el pipeline sklearn.&quot;&quot;&quot;</span>
<a id=__codelineno-55-18 name=__codelineno-55-18 href=#__codelineno-55-18></a>        <span class=k>pass</span>
<a id=__codelineno-55-19 name=__codelineno-55-19 href=#__codelineno-55-19></a>
<a id=__codelineno-55-20 name=__codelineno-55-20 href=#__codelineno-55-20></a>    <span class=k>def</span><span class=w> </span><span class=nf>fit</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>X</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>y</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-55-21 name=__codelineno-55-21 href=#__codelineno-55-21></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Entrena el modelo.&quot;&quot;&quot;</span>
<a id=__codelineno-55-22 name=__codelineno-55-22 href=#__codelineno-55-22></a>        <span class=k>pass</span>
<a id=__codelineno-55-23 name=__codelineno-55-23 href=#__codelineno-55-23></a>
<a id=__codelineno-55-24 name=__codelineno-55-24 href=#__codelineno-55-24></a>    <span class=k>def</span><span class=w> </span><span class=nf>cross_validate</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>X</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>y</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>float</span><span class=p>]:</span>
<a id=__codelineno-55-25 name=__codelineno-55-25 href=#__codelineno-55-25></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Valida con CV.&quot;&quot;&quot;</span>
<a id=__codelineno-55-26 name=__codelineno-55-26 href=#__codelineno-55-26></a>        <span class=k>pass</span>
<a id=__codelineno-55-27 name=__codelineno-55-27 href=#__codelineno-55-27></a>
<a id=__codelineno-55-28 name=__codelineno-55-28 href=#__codelineno-55-28></a><span class=c1># src/bankchurn/evaluation.py - SOLO se encarga de evaluar</span>
<a id=__codelineno-55-29 name=__codelineno-55-29 href=#__codelineno-55-29></a><span class=k>def</span><span class=w> </span><span class=nf>evaluate_model</span><span class=p>(</span>
<a id=__codelineno-55-30 name=__codelineno-55-30 href=#__codelineno-55-30></a>    <span class=n>model</span><span class=p>:</span> <span class=n>Pipeline</span><span class=p>,</span>
<a id=__codelineno-55-31 name=__codelineno-55-31 href=#__codelineno-55-31></a>    <span class=n>X_test</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span>
<a id=__codelineno-55-32 name=__codelineno-55-32 href=#__codelineno-55-32></a>    <span class=n>y_test</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span>
<a id=__codelineno-55-33 name=__codelineno-55-33 href=#__codelineno-55-33></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>float</span><span class=p>]:</span>
<a id=__codelineno-55-34 name=__codelineno-55-34 href=#__codelineno-55-34></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Calcula mÃ©tricas - Single Responsibility.&quot;&quot;&quot;</span>
<a id=__codelineno-55-35 name=__codelineno-55-35 href=#__codelineno-55-35></a>    <span class=n>y_pred</span> <span class=o>=</span> <span class=n>model</span><span class=o>.</span><span class=n>predict</span><span class=p>(</span><span class=n>X_test</span><span class=p>)</span>
<a id=__codelineno-55-36 name=__codelineno-55-36 href=#__codelineno-55-36></a>    <span class=n>y_proba</span> <span class=o>=</span> <span class=n>model</span><span class=o>.</span><span class=n>predict_proba</span><span class=p>(</span><span class=n>X_test</span><span class=p>)[:,</span> <span class=mi>1</span><span class=p>]</span>
<a id=__codelineno-55-37 name=__codelineno-55-37 href=#__codelineno-55-37></a>
<a id=__codelineno-55-38 name=__codelineno-55-38 href=#__codelineno-55-38></a>    <span class=k>return</span> <span class=p>{</span>
<a id=__codelineno-55-39 name=__codelineno-55-39 href=#__codelineno-55-39></a>        <span class=s2>&quot;accuracy&quot;</span><span class=p>:</span> <span class=n>accuracy_score</span><span class=p>(</span><span class=n>y_test</span><span class=p>,</span> <span class=n>y_pred</span><span class=p>),</span>
<a id=__codelineno-55-40 name=__codelineno-55-40 href=#__codelineno-55-40></a>        <span class=s2>&quot;precision&quot;</span><span class=p>:</span> <span class=n>precision_score</span><span class=p>(</span><span class=n>y_test</span><span class=p>,</span> <span class=n>y_pred</span><span class=p>),</span>
<a id=__codelineno-55-41 name=__codelineno-55-41 href=#__codelineno-55-41></a>        <span class=s2>&quot;recall&quot;</span><span class=p>:</span> <span class=n>recall_score</span><span class=p>(</span><span class=n>y_test</span><span class=p>,</span> <span class=n>y_pred</span><span class=p>),</span>
<a id=__codelineno-55-42 name=__codelineno-55-42 href=#__codelineno-55-42></a>        <span class=s2>&quot;f1&quot;</span><span class=p>:</span> <span class=n>f1_score</span><span class=p>(</span><span class=n>y_test</span><span class=p>,</span> <span class=n>y_pred</span><span class=p>),</span>
<a id=__codelineno-55-43 name=__codelineno-55-43 href=#__codelineno-55-43></a>        <span class=s2>&quot;roc_auc&quot;</span><span class=p>:</span> <span class=n>roc_auc_score</span><span class=p>(</span><span class=n>y_test</span><span class=p>,</span> <span class=n>y_proba</span><span class=p>),</span>
<a id=__codelineno-55-44 name=__codelineno-55-44 href=#__codelineno-55-44></a>    <span class=p>}</span>
</code></pre></div> <h3 id=mapa-mental-de-conceptos-solid>ğŸ§  Mapa Mental de Conceptos: SOLID<a class=headerlink href=#mapa-mental-de-conceptos-solid title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-56-1 name=__codelineno-56-1 href=#__codelineno-56-1></a>                   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
<a id=__codelineno-56-2 name=__codelineno-56-2 href=#__codelineno-56-2></a>                   â•‘    PRINCIPIOS SOLID PARA ML          â•‘
<a id=__codelineno-56-3 name=__codelineno-56-3 href=#__codelineno-56-3></a>                   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
<a id=__codelineno-56-4 name=__codelineno-56-4 href=#__codelineno-56-4></a>                                           â”‚
<a id=__codelineno-56-5 name=__codelineno-56-5 href=#__codelineno-56-5></a>     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
<a id=__codelineno-56-6 name=__codelineno-56-6 href=#__codelineno-56-6></a>     â–¼              â–¼              â–¼               â–¼              â–¼
<a id=__codelineno-56-7 name=__codelineno-56-7 href=#__codelineno-56-7></a>â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
<a id=__codelineno-56-8 name=__codelineno-56-8 href=#__codelineno-56-8></a>â”‚    S    â”‚    â”‚    O    â”‚    â”‚    L    â”‚     â”‚    I    â”‚    â”‚    D    â”‚
<a id=__codelineno-56-9 name=__codelineno-56-9 href=#__codelineno-56-9></a>â”‚ Single  â”‚    â”‚  Open   â”‚    â”‚ Liskov  â”‚     â”‚Interfaceâ”‚    â”‚  Dep.   â”‚
<a id=__codelineno-56-10 name=__codelineno-56-10 href=#__codelineno-56-10></a>â”‚ Respons â”‚    â”‚ Closed  â”‚    â”‚  Subst  â”‚     â”‚  Segr   â”‚    â”‚  Inv    â”‚
<a id=__codelineno-56-11 name=__codelineno-56-11 href=#__codelineno-56-11></a>â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<a id=__codelineno-56-12 name=__codelineno-56-12 href=#__codelineno-56-12></a>     â”‚              â”‚              â”‚               â”‚              â”‚
<a id=__codelineno-56-13 name=__codelineno-56-13 href=#__codelineno-56-13></a>Una clase      Extender sin   Subclases       Interfaces      Depender de
<a id=__codelineno-56-14 name=__codelineno-56-14 href=#__codelineno-56-14></a>una tarea      modificar      sustituibles    pequeÃ±as        abstracciones
</code></pre></div> <p><strong>TÃ©rminos clave que debes dominar:</strong></p> <table> <thead> <tr> <th>Principio</th> <th>Significado en ML</th> <th>Ejemplo</th> </tr> </thead> <tbody> <tr> <td><strong>S - Single Responsibility</strong></td> <td>Un mÃ³dulo = una tarea</td> <td><code>data.py</code>, <code>training.py</code>, <code>evaluation.py</code> separados</td> </tr> <tr> <td><strong>O - Open/Closed</strong></td> <td>Extensible sin modificar</td> <td>AÃ±adir modelo nuevo sin tocar Trainer</td> </tr> <tr> <td><strong>L - Liskov Substitution</strong></td> <td>Subclases intercambiables</td> <td><code>ChurnTrainer</code> funciona donde esperes <code>BaseTrainer</code></td> </tr> <tr> <td><strong>I - Interface Segregation</strong></td> <td>Interfaces pequeÃ±as y especÃ­ficas</td> <td>No forzar mÃ©todos que no se usan</td> </tr> <tr> <td><strong>D - Dependency Inversion</strong></td> <td>Depender de abstracciones</td> <td>Inyectar modelo, no hardcodear</td> </tr> </tbody> </table> <hr> <h3 id=ejercicio-puente-aplicar-single-responsibility>ğŸ’» Ejercicio Puente: Aplicar Single Responsibility<a class=headerlink href=#ejercicio-puente-aplicar-single-responsibility title="Permanent link">&para;</a></h3> <blockquote> <p><strong>Meta</strong>: Antes de refactorizar cÃ³digo ML complejo, practica separando responsabilidades simples.</p> </blockquote> <p><strong>Ejercicio 1: Separar funciones mezcladas</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-57-1 name=__codelineno-57-1 href=#__codelineno-57-1></a><span class=c1># âŒ ANTES: Una funciÃ³n hace TODO</span>
<a id=__codelineno-57-2 name=__codelineno-57-2 href=#__codelineno-57-2></a><span class=k>def</span><span class=w> </span><span class=nf>process_and_train</span><span class=p>(</span><span class=n>data_path</span><span class=p>,</span> <span class=n>output_path</span><span class=p>):</span>
<a id=__codelineno-57-3 name=__codelineno-57-3 href=#__codelineno-57-3></a>    <span class=c1># Carga datos</span>
<a id=__codelineno-57-4 name=__codelineno-57-4 href=#__codelineno-57-4></a>    <span class=n>df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=n>data_path</span><span class=p>)</span>
<a id=__codelineno-57-5 name=__codelineno-57-5 href=#__codelineno-57-5></a>    <span class=c1># Limpia</span>
<a id=__codelineno-57-6 name=__codelineno-57-6 href=#__codelineno-57-6></a>    <span class=n>df</span> <span class=o>=</span> <span class=n>df</span><span class=o>.</span><span class=n>dropna</span><span class=p>()</span>
<a id=__codelineno-57-7 name=__codelineno-57-7 href=#__codelineno-57-7></a>    <span class=c1># Entrena</span>
<a id=__codelineno-57-8 name=__codelineno-57-8 href=#__codelineno-57-8></a>    <span class=n>model</span> <span class=o>=</span> <span class=n>RandomForestClassifier</span><span class=p>()</span>
<a id=__codelineno-57-9 name=__codelineno-57-9 href=#__codelineno-57-9></a>    <span class=n>X</span><span class=p>,</span> <span class=n>y</span> <span class=o>=</span> <span class=n>df</span><span class=o>.</span><span class=n>drop</span><span class=p>(</span><span class=s2>&quot;target&quot;</span><span class=p>,</span> <span class=n>axis</span><span class=o>=</span><span class=mi>1</span><span class=p>),</span> <span class=n>df</span><span class=p>[</span><span class=s2>&quot;target&quot;</span><span class=p>]</span>
<a id=__codelineno-57-10 name=__codelineno-57-10 href=#__codelineno-57-10></a>    <span class=n>model</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=n>X</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span>
<a id=__codelineno-57-11 name=__codelineno-57-11 href=#__codelineno-57-11></a>    <span class=c1># Guarda</span>
<a id=__codelineno-57-12 name=__codelineno-57-12 href=#__codelineno-57-12></a>    <span class=n>joblib</span><span class=o>.</span><span class=n>dump</span><span class=p>(</span><span class=n>model</span><span class=p>,</span> <span class=n>output_path</span><span class=p>)</span>
<a id=__codelineno-57-13 name=__codelineno-57-13 href=#__codelineno-57-13></a>    <span class=k>return</span> <span class=n>model</span>
<a id=__codelineno-57-14 name=__codelineno-57-14 href=#__codelineno-57-14></a>
<a id=__codelineno-57-15 name=__codelineno-57-15 href=#__codelineno-57-15></a><span class=c1># âœ… TU TAREA: Separa en 3 funciones con responsabilidad Ãºnica</span>
<a id=__codelineno-57-16 name=__codelineno-57-16 href=#__codelineno-57-16></a><span class=c1># 1. load_data(path) -&gt; DataFrame</span>
<a id=__codelineno-57-17 name=__codelineno-57-17 href=#__codelineno-57-17></a><span class=c1># 2. train_model(X, y) -&gt; modelo</span>
<a id=__codelineno-57-18 name=__codelineno-57-18 href=#__codelineno-57-18></a><span class=c1># 3. save_model(model, path) -&gt; None</span>
</code></pre></div></p> <p><strong>Ejercicio 2: Identificar violaciones</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-58-1 name=__codelineno-58-1 href=#__codelineno-58-1></a><span class=c1># Â¿QuÃ© principio SOLID viola este cÃ³digo?</span>
<a id=__codelineno-58-2 name=__codelineno-58-2 href=#__codelineno-58-2></a><span class=k>class</span><span class=w> </span><span class=nc>DataProcessor</span><span class=p>:</span>
<a id=__codelineno-58-3 name=__codelineno-58-3 href=#__codelineno-58-3></a>    <span class=k>def</span><span class=w> </span><span class=nf>load_csv</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>path</span><span class=p>):</span> <span class=o>...</span>
<a id=__codelineno-58-4 name=__codelineno-58-4 href=#__codelineno-58-4></a>    <span class=k>def</span><span class=w> </span><span class=nf>load_json</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>path</span><span class=p>):</span> <span class=o>...</span>
<a id=__codelineno-58-5 name=__codelineno-58-5 href=#__codelineno-58-5></a>    <span class=k>def</span><span class=w> </span><span class=nf>clean_data</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>df</span><span class=p>):</span> <span class=o>...</span>
<a id=__codelineno-58-6 name=__codelineno-58-6 href=#__codelineno-58-6></a>    <span class=k>def</span><span class=w> </span><span class=nf>train_model</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>X</span><span class=p>,</span> <span class=n>y</span><span class=p>):</span> <span class=o>...</span>
<a id=__codelineno-58-7 name=__codelineno-58-7 href=#__codelineno-58-7></a>    <span class=k>def</span><span class=w> </span><span class=nf>evaluate_model</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>model</span><span class=p>,</span> <span class=n>X</span><span class=p>,</span> <span class=n>y</span><span class=p>):</span> <span class=o>...</span>
<a id=__codelineno-58-8 name=__codelineno-58-8 href=#__codelineno-58-8></a>    <span class=k>def</span><span class=w> </span><span class=nf>save_to_database</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span> <span class=o>...</span>
<a id=__codelineno-58-9 name=__codelineno-58-9 href=#__codelineno-58-9></a>    <span class=k>def</span><span class=w> </span><span class=nf>send_email_report</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>metrics</span><span class=p>):</span> <span class=o>...</span>
<a id=__codelineno-58-10 name=__codelineno-58-10 href=#__codelineno-58-10></a>
<a id=__codelineno-58-11 name=__codelineno-58-11 href=#__codelineno-58-11></a><span class=c1># TU TAREA: Â¿CuÃ¡ntas responsabilidades tiene? Â¿CÃ³mo lo separarÃ­as?</span>
</code></pre></div></p> <details> <summary>ğŸ” Ver Soluciones</summary> <div class=highlight><pre><span></span><code><a id=__codelineno-59-1 name=__codelineno-59-1 href=#__codelineno-59-1></a><span class=c1># Ejercicio 1: Funciones separadas</span>
<a id=__codelineno-59-2 name=__codelineno-59-2 href=#__codelineno-59-2></a><span class=k>def</span><span class=w> </span><span class=nf>load_data</span><span class=p>(</span><span class=n>path</span><span class=p>:</span> <span class=n>Path</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>:</span>
<a id=__codelineno-59-3 name=__codelineno-59-3 href=#__codelineno-59-3></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Solo carga y limpia datos.&quot;&quot;&quot;</span>
<a id=__codelineno-59-4 name=__codelineno-59-4 href=#__codelineno-59-4></a>    <span class=n>df</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
<a id=__codelineno-59-5 name=__codelineno-59-5 href=#__codelineno-59-5></a>    <span class=k>return</span> <span class=n>df</span><span class=o>.</span><span class=n>dropna</span><span class=p>()</span>
<a id=__codelineno-59-6 name=__codelineno-59-6 href=#__codelineno-59-6></a>
<a id=__codelineno-59-7 name=__codelineno-59-7 href=#__codelineno-59-7></a><span class=k>def</span><span class=w> </span><span class=nf>train_model</span><span class=p>(</span><span class=n>X</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>y</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>BaseEstimator</span><span class=p>:</span>
<a id=__codelineno-59-8 name=__codelineno-59-8 href=#__codelineno-59-8></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Solo entrena el modelo.&quot;&quot;&quot;</span>
<a id=__codelineno-59-9 name=__codelineno-59-9 href=#__codelineno-59-9></a>    <span class=n>model</span> <span class=o>=</span> <span class=n>RandomForestClassifier</span><span class=p>()</span>
<a id=__codelineno-59-10 name=__codelineno-59-10 href=#__codelineno-59-10></a>    <span class=n>model</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=n>X</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span>
<a id=__codelineno-59-11 name=__codelineno-59-11 href=#__codelineno-59-11></a>    <span class=k>return</span> <span class=n>model</span>
<a id=__codelineno-59-12 name=__codelineno-59-12 href=#__codelineno-59-12></a>
<a id=__codelineno-59-13 name=__codelineno-59-13 href=#__codelineno-59-13></a><span class=k>def</span><span class=w> </span><span class=nf>save_model</span><span class=p>(</span><span class=n>model</span><span class=p>:</span> <span class=n>BaseEstimator</span><span class=p>,</span> <span class=n>path</span><span class=p>:</span> <span class=n>Path</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-59-14 name=__codelineno-59-14 href=#__codelineno-59-14></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Solo guarda el modelo.&quot;&quot;&quot;</span>
<a id=__codelineno-59-15 name=__codelineno-59-15 href=#__codelineno-59-15></a>    <span class=n>joblib</span><span class=o>.</span><span class=n>dump</span><span class=p>(</span><span class=n>model</span><span class=p>,</span> <span class=n>path</span><span class=p>)</span>
<a id=__codelineno-59-16 name=__codelineno-59-16 href=#__codelineno-59-16></a>
<a id=__codelineno-59-17 name=__codelineno-59-17 href=#__codelineno-59-17></a><span class=c1># Ejercicio 2: Viola Single Responsibility</span>
<a id=__codelineno-59-18 name=__codelineno-59-18 href=#__codelineno-59-18></a><span class=c1># Tiene 4+ responsabilidades:</span>
<a id=__codelineno-59-19 name=__codelineno-59-19 href=#__codelineno-59-19></a><span class=c1># 1. Carga de datos (load_csv, load_json)</span>
<a id=__codelineno-59-20 name=__codelineno-59-20 href=#__codelineno-59-20></a><span class=c1># 2. Limpieza (clean_data)</span>
<a id=__codelineno-59-21 name=__codelineno-59-21 href=#__codelineno-59-21></a><span class=c1># 3. ML (train_model, evaluate_model)</span>
<a id=__codelineno-59-22 name=__codelineno-59-22 href=#__codelineno-59-22></a><span class=c1># 4. Persistencia (save_to_database)</span>
<a id=__codelineno-59-23 name=__codelineno-59-23 href=#__codelineno-59-23></a><span class=c1># 5. Notificaciones (send_email_report)</span>
<a id=__codelineno-59-24 name=__codelineno-59-24 href=#__codelineno-59-24></a>
<a id=__codelineno-59-25 name=__codelineno-59-25 href=#__codelineno-59-25></a><span class=c1># SeparaciÃ³n correcta:</span>
<a id=__codelineno-59-26 name=__codelineno-59-26 href=#__codelineno-59-26></a><span class=k>class</span><span class=w> </span><span class=nc>DataLoader</span><span class=p>:</span> <span class=o>...</span>      <span class=c1># Solo cargar</span>
<a id=__codelineno-59-27 name=__codelineno-59-27 href=#__codelineno-59-27></a><span class=k>class</span><span class=w> </span><span class=nc>DataCleaner</span><span class=p>:</span> <span class=o>...</span>     <span class=c1># Solo limpiar</span>
<a id=__codelineno-59-28 name=__codelineno-59-28 href=#__codelineno-59-28></a><span class=k>class</span><span class=w> </span><span class=nc>ModelTrainer</span><span class=p>:</span> <span class=o>...</span>    <span class=c1># Solo entrenar/evaluar</span>
<a id=__codelineno-59-29 name=__codelineno-59-29 href=#__codelineno-59-29></a><span class=k>class</span><span class=w> </span><span class=nc>DatabaseWriter</span><span class=p>:</span> <span class=o>...</span>  <span class=c1># Solo persistir</span>
<a id=__codelineno-59-30 name=__codelineno-59-30 href=#__codelineno-59-30></a><span class=k>class</span><span class=w> </span><span class=nc>EmailNotifier</span><span class=p>:</span> <span class=o>...</span>   <span class=c1># Solo notificar</span>
</code></pre></div> </details> <hr> <h3 id=practica-del-portafolio-solid-en-bankchurn>ğŸ› ï¸ PrÃ¡ctica del Portafolio: SOLID en BankChurn<a class=headerlink href=#practica-del-portafolio-solid-en-bankchurn title="Permanent link">&para;</a></h3> <blockquote> <p><strong>Tarea</strong>: Verificar que el cÃ³digo de BankChurn-Predictor sigue principios SOLID.</p> </blockquote> <p><strong>Paso 1: Analiza la estructura actual</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-60-1 name=__codelineno-60-1 href=#__codelineno-60-1></a>ls<span class=w> </span>-la<span class=w> </span>BankChurn-Predictor/src/bankchurn/
<a id=__codelineno-60-2 name=__codelineno-60-2 href=#__codelineno-60-2></a><span class=c1># Â¿Cada archivo tiene UNA responsabilidad?</span>
</code></pre></div></p> <p><strong>Paso 2: Verifica Single Responsibility (pistas guiadas)</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-61-1 name=__codelineno-61-1 href=#__codelineno-61-1></a>Archivo           | Â¿Responsabilidad Ãºnica?
<a id=__codelineno-61-2 name=__codelineno-61-2 href=#__codelineno-61-2></a>â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
<a id=__codelineno-61-3 name=__codelineno-61-3 href=#__codelineno-61-3></a>config.py         | âœ… Solo configuraciÃ³n
<a id=__codelineno-61-4 name=__codelineno-61-4 href=#__codelineno-61-4></a>data.py           | Â¿Solo carga datos?
<a id=__codelineno-61-5 name=__codelineno-61-5 href=#__codelineno-61-5></a>training.py       | Â¿Solo entrena? Â¿O tambiÃ©n evalÃºa?
<a id=__codelineno-61-6 name=__codelineno-61-6 href=#__codelineno-61-6></a>evaluation.py     | Â¿Solo mÃ©tricas?
<a id=__codelineno-61-7 name=__codelineno-61-7 href=#__codelineno-61-7></a>prediction.py     | Â¿Solo inferencia?
</code></pre></div></p> <p><strong>Paso 3: Si encuentras violaciones, propÃ³n refactor</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-62-1 name=__codelineno-62-1 href=#__codelineno-62-1></a><span class=c1># Ejemplo de violaciÃ³n comÃºn:</span>
<a id=__codelineno-62-2 name=__codelineno-62-2 href=#__codelineno-62-2></a><span class=c1># training.py que tambiÃ©n guarda artefactos y loguea a MLflow</span>
<a id=__codelineno-62-3 name=__codelineno-62-3 href=#__codelineno-62-3></a>
<a id=__codelineno-62-4 name=__codelineno-62-4 href=#__codelineno-62-4></a><span class=c1># Pregunta: Â¿CÃ³mo separarÃ­as estas responsabilidades?</span>
<a id=__codelineno-62-5 name=__codelineno-62-5 href=#__codelineno-62-5></a><span class=c1># Pista: Considera un archivo artifacts.py y tracking.py</span>
</code></pre></div></p> <p><strong>âŒ NO hagas esto:</strong> - Crear archivos de 1 lÃ­nea solo "por seguir SOLID" - Abstraer prematuramente (YAGNI) - Ignorar la cohesiÃ³n lÃ³gica</p> <p><strong>âœ… SÃ haz esto:</strong> - Archivos de 50-300 lÃ­neas con propÃ³sito claro - Nombres que reflejen la responsabilidad - Poder describir cada mÃ³dulo en UNA frase</p> <hr> <h3 id=checkpoint-de-conocimiento-solid>âœ… Checkpoint de Conocimiento: SOLID<a class=headerlink href=#checkpoint-de-conocimiento-solid title="Permanent link">&para;</a></h3> <p><strong>Pregunta 1</strong>: Â¿QuÃ© significa "Single Responsibility" en el contexto de ML?</p> <p>A) Cada funciÃ³n debe tener solo 1 lÃ­nea<br> B) Cada mÃ³dulo debe tener UNA razÃ³n para cambiar<br> C) Solo una persona puede modificar el cÃ³digo<br> D) Cada clase debe heredar de una sola clase base </p> <p><strong>Pregunta 2</strong>: Si quieres aÃ±adir un nuevo modelo (XGBoost) a tu pipeline, Â¿quÃ© principio te ayuda a hacerlo sin modificar cÃ³digo existente?</p> <p>A) Single Responsibility<br> B) Open/Closed<br> C) Liskov Substitution<br> D) Interface Segregation </p> <p><strong>Pregunta 3</strong>: Â¿Por quÃ© separamos <code>data.py</code>, <code>training.py</code> y <code>evaluation.py</code>?</p> <p>A) Para tener mÃ¡s archivos en el proyecto<br> B) Porque cada uno tiene UNA responsabilidad y cambia por razones diferentes<br> C) Porque Python lo requiere<br> D) Para que el cÃ³digo sea mÃ¡s lento </p> <p><strong>ğŸ”§ Escenario de Debugging:</strong></p> <div class=highlight><pre><span></span><code><a id=__codelineno-63-1 name=__codelineno-63-1 href=#__codelineno-63-1></a><span class=c1># Tu compaÃ±ero escribiÃ³ este cÃ³digo:</span>
<a id=__codelineno-63-2 name=__codelineno-63-2 href=#__codelineno-63-2></a><span class=k>class</span><span class=w> </span><span class=nc>MLPipeline</span><span class=p>:</span>
<a id=__codelineno-63-3 name=__codelineno-63-3 href=#__codelineno-63-3></a>    <span class=k>def</span><span class=w> </span><span class=nf>run</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data_path</span><span class=p>,</span> <span class=n>config_path</span><span class=p>,</span> <span class=n>model_path</span><span class=p>,</span> <span class=n>metrics_path</span><span class=p>,</span> 
<a id=__codelineno-63-4 name=__codelineno-63-4 href=#__codelineno-63-4></a>            <span class=n>mlflow_uri</span><span class=p>,</span> <span class=n>slack_webhook</span><span class=p>,</span> <span class=n>email_list</span><span class=p>,</span> <span class=n>s3_bucket</span><span class=p>):</span>
<a id=__codelineno-63-5 name=__codelineno-63-5 href=#__codelineno-63-5></a>        <span class=c1># 500 lÃ­neas de cÃ³digo que hacen TODO</span>
<a id=__codelineno-63-6 name=__codelineno-63-6 href=#__codelineno-63-6></a>        <span class=o>...</span>
</code></pre></div> <p><strong>Â¿QuÃ© problemas ves? Â¿CÃ³mo lo refactorizarÃ­as siguiendo SOLID?</strong></p> <details> <summary>ï¿½ï¿½ Ver Respuestas</summary> **Pregunta 1**: B) Cada mÃ³dulo debe tener UNA razÃ³n para cambiar. Si cambian las mÃ©tricas, solo tocas `evaluation.py`. **Pregunta 2**: B) Open/Closed. El sistema estÃ¡ abierto a extensiÃ³n (nuevo modelo) pero cerrado a modificaciÃ³n (no tocas el Trainer existente). **Pregunta 3**: B) Porque cada uno tiene UNA responsabilidad y cambia por razones diferentes. **Escenario de Debugging**: **Problemas:** 1. Viola Single Responsibility (hace TODO) 2. Viola Interface Segregation (parÃ¡metros que no siempre se usan) 3. 500 lÃ­neas = imposible de testear **Refactor:** <div class=highlight><pre><span></span><code><a id=__codelineno-64-1 name=__codelineno-64-1 href=#__codelineno-64-1></a><span class=k>class</span><span class=w> </span><span class=nc>DataLoader</span><span class=p>:</span> <span class=o>...</span>
<a id=__codelineno-64-2 name=__codelineno-64-2 href=#__codelineno-64-2></a><span class=k>class</span><span class=w> </span><span class=nc>FeatureEngineer</span><span class=p>:</span> <span class=o>...</span>
<a id=__codelineno-64-3 name=__codelineno-64-3 href=#__codelineno-64-3></a><span class=k>class</span><span class=w> </span><span class=nc>ModelTrainer</span><span class=p>:</span> <span class=o>...</span>
<a id=__codelineno-64-4 name=__codelineno-64-4 href=#__codelineno-64-4></a><span class=k>class</span><span class=w> </span><span class=nc>MetricsCalculator</span><span class=p>:</span> <span class=o>...</span>
<a id=__codelineno-64-5 name=__codelineno-64-5 href=#__codelineno-64-5></a><span class=k>class</span><span class=w> </span><span class=nc>MLflowTracker</span><span class=p>:</span> <span class=o>...</span>
<a id=__codelineno-64-6 name=__codelineno-64-6 href=#__codelineno-64-6></a><span class=k>class</span><span class=w> </span><span class=nc>SlackNotifier</span><span class=p>:</span> <span class=o>...</span>
<a id=__codelineno-64-7 name=__codelineno-64-7 href=#__codelineno-64-7></a><span class=k>class</span><span class=w> </span><span class=nc>S3Uploader</span><span class=p>:</span> <span class=o>...</span>
<a id=__codelineno-64-8 name=__codelineno-64-8 href=#__codelineno-64-8></a>
<a id=__codelineno-64-9 name=__codelineno-64-9 href=#__codelineno-64-9></a><span class=c1># Orquestador ligero que usa los componentes</span>
<a id=__codelineno-64-10 name=__codelineno-64-10 href=#__codelineno-64-10></a><span class=k>class</span><span class=w> </span><span class=nc>Pipeline</span><span class=p>:</span>
<a id=__codelineno-64-11 name=__codelineno-64-11 href=#__codelineno-64-11></a>    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>loader</span><span class=p>,</span> <span class=n>trainer</span><span class=p>,</span> <span class=n>tracker</span><span class=p>,</span> <span class=o>...</span><span class=p>):</span>
<a id=__codelineno-64-12 name=__codelineno-64-12 href=#__codelineno-64-12></a>        <span class=bp>self</span><span class=o>.</span><span class=n>loader</span> <span class=o>=</span> <span class=n>loader</span>
<a id=__codelineno-64-13 name=__codelineno-64-13 href=#__codelineno-64-13></a>        <span class=o>...</span>
</code></pre></div> </details> <hr> <p><a id=15-oop-para-ml></a></p> <h2 id=15-oop-para-ml-protocolos-y-clases-abstractas>1.5 OOP para ML: Protocolos y Clases Abstractas<a class=headerlink href=#15-oop-para-ml-protocolos-y-clases-abstractas title="Permanent link">&para;</a></h2> <blockquote> <p><strong>CRÃTICO</strong>: Sin entender OOP profesional, NO podrÃ¡s leer el cÃ³digo del Portafolio.</p> </blockquote> <h3 id=el-problema-codigo-no-intercambiable>El Problema: CÃ³digo No Intercambiable<a class=headerlink href=#el-problema-codigo-no-intercambiable title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-65-1 name=__codelineno-65-1 href=#__codelineno-65-1></a><span class=c1># âŒ CÃ“DIGO JUNIOR: Cada trainer tiene API diferente</span>
<a id=__codelineno-65-2 name=__codelineno-65-2 href=#__codelineno-65-2></a><span class=k>class</span><span class=w> </span><span class=nc>TrainerA</span><span class=p>:</span>
<a id=__codelineno-65-3 name=__codelineno-65-3 href=#__codelineno-65-3></a>    <span class=k>def</span><span class=w> </span><span class=nf>entrenar</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>X</span><span class=p>,</span> <span class=n>y</span><span class=p>):</span> <span class=o>...</span>  <span class=c1># espaÃ±ol</span>
<a id=__codelineno-65-4 name=__codelineno-65-4 href=#__codelineno-65-4></a>    <span class=k>def</span><span class=w> </span><span class=nf>predecir</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>X</span><span class=p>):</span> <span class=o>...</span>
<a id=__codelineno-65-5 name=__codelineno-65-5 href=#__codelineno-65-5></a>
<a id=__codelineno-65-6 name=__codelineno-65-6 href=#__codelineno-65-6></a><span class=k>class</span><span class=w> </span><span class=nc>TrainerB</span><span class=p>:</span>
<a id=__codelineno-65-7 name=__codelineno-65-7 href=#__codelineno-65-7></a>    <span class=k>def</span><span class=w> </span><span class=nf>fit_model</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>features</span><span class=p>,</span> <span class=n>labels</span><span class=p>):</span> <span class=o>...</span>  <span class=c1># nombres diferentes</span>
<a id=__codelineno-65-8 name=__codelineno-65-8 href=#__codelineno-65-8></a>    <span class=k>def</span><span class=w> </span><span class=nf>get_predictions</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>features</span><span class=p>):</span> <span class=o>...</span>
<a id=__codelineno-65-9 name=__codelineno-65-9 href=#__codelineno-65-9></a>
<a id=__codelineno-65-10 name=__codelineno-65-10 href=#__codelineno-65-10></a><span class=c1># Â¿CÃ³mo escribo cÃ³digo genÃ©rico que funcione con ambos?</span>
<a id=__codelineno-65-11 name=__codelineno-65-11 href=#__codelineno-65-11></a><span class=c1># Imposible sin reescribir todo.</span>
</code></pre></div> <h3 id=la-solucion-protocol-y-abc>La SoluciÃ³n: Protocol y ABC<a class=headerlink href=#la-solucion-protocol-y-abc title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-66-1 name=__codelineno-66-1 href=#__codelineno-66-1></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-66-2 name=__codelineno-66-2 href=#__codelineno-66-2></a><span class=c1># PROTOCOL: Duck Typing verificable por mypy (para sklearn y librerÃ­as externas)</span>
<a id=__codelineno-66-3 name=__codelineno-66-3 href=#__codelineno-66-3></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-66-4 name=__codelineno-66-4 href=#__codelineno-66-4></a><span class=kn>from</span><span class=w> </span><span class=nn>typing</span><span class=w> </span><span class=kn>import</span> <span class=n>Protocol</span><span class=p>,</span> <span class=n>runtime_checkable</span>
<a id=__codelineno-66-5 name=__codelineno-66-5 href=#__codelineno-66-5></a><span class=kn>from</span><span class=w> </span><span class=nn>numpy.typing</span><span class=w> </span><span class=kn>import</span> <span class=n>ArrayLike</span>
<a id=__codelineno-66-6 name=__codelineno-66-6 href=#__codelineno-66-6></a>
<a id=__codelineno-66-7 name=__codelineno-66-7 href=#__codelineno-66-7></a><span class=nd>@runtime_checkable</span>
<a id=__codelineno-66-8 name=__codelineno-66-8 href=#__codelineno-66-8></a><span class=k>class</span><span class=w> </span><span class=nc>Predictor</span><span class=p>(</span><span class=n>Protocol</span><span class=p>):</span>
<a id=__codelineno-66-9 name=__codelineno-66-9 href=#__codelineno-66-9></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Si tiene fit() y predict() con estas firmas, ES un Predictor.&quot;&quot;&quot;</span>
<a id=__codelineno-66-10 name=__codelineno-66-10 href=#__codelineno-66-10></a>
<a id=__codelineno-66-11 name=__codelineno-66-11 href=#__codelineno-66-11></a>    <span class=k>def</span><span class=w> </span><span class=nf>fit</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>X</span><span class=p>:</span> <span class=n>ArrayLike</span><span class=p>,</span> <span class=n>y</span><span class=p>:</span> <span class=n>ArrayLike</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=s2>&quot;Predictor&quot;</span><span class=p>:</span> <span class=o>...</span>
<a id=__codelineno-66-12 name=__codelineno-66-12 href=#__codelineno-66-12></a>    <span class=k>def</span><span class=w> </span><span class=nf>predict</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>X</span><span class=p>:</span> <span class=n>ArrayLike</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>ArrayLike</span><span class=p>:</span> <span class=o>...</span>
<a id=__codelineno-66-13 name=__codelineno-66-13 href=#__codelineno-66-13></a>
<a id=__codelineno-66-14 name=__codelineno-66-14 href=#__codelineno-66-14></a><span class=c1># sklearn cumple automÃ¡ticamente sin modificar nada:</span>
<a id=__codelineno-66-15 name=__codelineno-66-15 href=#__codelineno-66-15></a><span class=kn>from</span><span class=w> </span><span class=nn>sklearn.ensemble</span><span class=w> </span><span class=kn>import</span> <span class=n>RandomForestClassifier</span>
<a id=__codelineno-66-16 name=__codelineno-66-16 href=#__codelineno-66-16></a><span class=k>assert</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>RandomForestClassifier</span><span class=p>(),</span> <span class=n>Predictor</span><span class=p>)</span>  <span class=c1># True!</span>
<a id=__codelineno-66-17 name=__codelineno-66-17 href=#__codelineno-66-17></a>
<a id=__codelineno-66-18 name=__codelineno-66-18 href=#__codelineno-66-18></a>
<a id=__codelineno-66-19 name=__codelineno-66-19 href=#__codelineno-66-19></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-66-20 name=__codelineno-66-20 href=#__codelineno-66-20></a><span class=c1># ABC: Contrato que OBLIGA implementaciÃ³n (para TUS clases)</span>
<a id=__codelineno-66-21 name=__codelineno-66-21 href=#__codelineno-66-21></a><span class=c1># â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•</span>
<a id=__codelineno-66-22 name=__codelineno-66-22 href=#__codelineno-66-22></a><span class=kn>from</span><span class=w> </span><span class=nn>abc</span><span class=w> </span><span class=kn>import</span> <span class=n>ABC</span><span class=p>,</span> <span class=n>abstractmethod</span>
<a id=__codelineno-66-23 name=__codelineno-66-23 href=#__codelineno-66-23></a><span class=kn>import</span><span class=w> </span><span class=nn>pandas</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>pd</span>
<a id=__codelineno-66-24 name=__codelineno-66-24 href=#__codelineno-66-24></a>
<a id=__codelineno-66-25 name=__codelineno-66-25 href=#__codelineno-66-25></a><span class=k>class</span><span class=w> </span><span class=nc>BaseTrainer</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
<a id=__codelineno-66-26 name=__codelineno-66-26 href=#__codelineno-66-26></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Clase base para todos los trainers del portafolio.</span>
<a id=__codelineno-66-27 name=__codelineno-66-27 href=#__codelineno-66-27></a>
<a id=__codelineno-66-28 name=__codelineno-66-28 href=#__codelineno-66-28></a><span class=sd>    BankChurn, CarVision y TelecomAI DEBEN implementar estos mÃ©todos.</span>
<a id=__codelineno-66-29 name=__codelineno-66-29 href=#__codelineno-66-29></a><span class=sd>    Si no lo hacen, Python da error al instanciar.</span>
<a id=__codelineno-66-30 name=__codelineno-66-30 href=#__codelineno-66-30></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-66-31 name=__codelineno-66-31 href=#__codelineno-66-31></a>
<a id=__codelineno-66-32 name=__codelineno-66-32 href=#__codelineno-66-32></a>    <span class=nd>@abstractmethod</span>
<a id=__codelineno-66-33 name=__codelineno-66-33 href=#__codelineno-66-33></a>    <span class=k>def</span><span class=w> </span><span class=nf>fit</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>X</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>y</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=s2>&quot;BaseTrainer&quot;</span><span class=p>:</span>
<a id=__codelineno-66-34 name=__codelineno-66-34 href=#__codelineno-66-34></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Entrena el modelo.&quot;&quot;&quot;</span>
<a id=__codelineno-66-35 name=__codelineno-66-35 href=#__codelineno-66-35></a>        <span class=k>pass</span>
<a id=__codelineno-66-36 name=__codelineno-66-36 href=#__codelineno-66-36></a>
<a id=__codelineno-66-37 name=__codelineno-66-37 href=#__codelineno-66-37></a>    <span class=nd>@abstractmethod</span>
<a id=__codelineno-66-38 name=__codelineno-66-38 href=#__codelineno-66-38></a>    <span class=k>def</span><span class=w> </span><span class=nf>predict</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>X</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>:</span>
<a id=__codelineno-66-39 name=__codelineno-66-39 href=#__codelineno-66-39></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Genera predicciones.&quot;&quot;&quot;</span>
<a id=__codelineno-66-40 name=__codelineno-66-40 href=#__codelineno-66-40></a>        <span class=k>pass</span>
<a id=__codelineno-66-41 name=__codelineno-66-41 href=#__codelineno-66-41></a>
<a id=__codelineno-66-42 name=__codelineno-66-42 href=#__codelineno-66-42></a>    <span class=nd>@abstractmethod</span>
<a id=__codelineno-66-43 name=__codelineno-66-43 href=#__codelineno-66-43></a>    <span class=k>def</span><span class=w> </span><span class=nf>evaluate</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>X</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>y</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>float</span><span class=p>]:</span>
<a id=__codelineno-66-44 name=__codelineno-66-44 href=#__codelineno-66-44></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;EvalÃºa el modelo.&quot;&quot;&quot;</span>
<a id=__codelineno-66-45 name=__codelineno-66-45 href=#__codelineno-66-45></a>        <span class=k>pass</span>
<a id=__codelineno-66-46 name=__codelineno-66-46 href=#__codelineno-66-46></a>
<a id=__codelineno-66-47 name=__codelineno-66-47 href=#__codelineno-66-47></a>    <span class=c1># MÃ©todo concreto que usa los abstractos</span>
<a id=__codelineno-66-48 name=__codelineno-66-48 href=#__codelineno-66-48></a>    <span class=k>def</span><span class=w> </span><span class=nf>fit_and_evaluate</span><span class=p>(</span>
<a id=__codelineno-66-49 name=__codelineno-66-49 href=#__codelineno-66-49></a>        <span class=bp>self</span><span class=p>,</span> 
<a id=__codelineno-66-50 name=__codelineno-66-50 href=#__codelineno-66-50></a>        <span class=n>X_train</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>y_train</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>,</span>
<a id=__codelineno-66-51 name=__codelineno-66-51 href=#__codelineno-66-51></a>        <span class=n>X_test</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>y_test</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span>
<a id=__codelineno-66-52 name=__codelineno-66-52 href=#__codelineno-66-52></a>    <span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>float</span><span class=p>]:</span>
<a id=__codelineno-66-53 name=__codelineno-66-53 href=#__codelineno-66-53></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;Entrena y evalÃºa en un paso.&quot;&quot;&quot;</span>
<a id=__codelineno-66-54 name=__codelineno-66-54 href=#__codelineno-66-54></a>        <span class=bp>self</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=n>X_train</span><span class=p>,</span> <span class=n>y_train</span><span class=p>)</span>
<a id=__codelineno-66-55 name=__codelineno-66-55 href=#__codelineno-66-55></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>evaluate</span><span class=p>(</span><span class=n>X_test</span><span class=p>,</span> <span class=n>y_test</span><span class=p>)</span>
<a id=__codelineno-66-56 name=__codelineno-66-56 href=#__codelineno-66-56></a>
<a id=__codelineno-66-57 name=__codelineno-66-57 href=#__codelineno-66-57></a>
<a id=__codelineno-66-58 name=__codelineno-66-58 href=#__codelineno-66-58></a><span class=c1># ImplementaciÃ³n concreta:</span>
<a id=__codelineno-66-59 name=__codelineno-66-59 href=#__codelineno-66-59></a><span class=k>class</span><span class=w> </span><span class=nc>ChurnTrainer</span><span class=p>(</span><span class=n>BaseTrainer</span><span class=p>):</span>
<a id=__codelineno-66-60 name=__codelineno-66-60 href=#__codelineno-66-60></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Trainer de BankChurn - DEBE implementar fit, predict, evaluate.&quot;&quot;&quot;</span>
<a id=__codelineno-66-61 name=__codelineno-66-61 href=#__codelineno-66-61></a>
<a id=__codelineno-66-62 name=__codelineno-66-62 href=#__codelineno-66-62></a>    <span class=k>def</span><span class=w> </span><span class=nf>fit</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>X</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>y</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=s2>&quot;ChurnTrainer&quot;</span><span class=p>:</span>
<a id=__codelineno-66-63 name=__codelineno-66-63 href=#__codelineno-66-63></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_pipeline</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_build_pipeline</span><span class=p>()</span>
<a id=__codelineno-66-64 name=__codelineno-66-64 href=#__codelineno-66-64></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_pipeline</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=n>X</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span>
<a id=__codelineno-66-65 name=__codelineno-66-65 href=#__codelineno-66-65></a>        <span class=k>return</span> <span class=bp>self</span>
<a id=__codelineno-66-66 name=__codelineno-66-66 href=#__codelineno-66-66></a>
<a id=__codelineno-66-67 name=__codelineno-66-67 href=#__codelineno-66-67></a>    <span class=k>def</span><span class=w> </span><span class=nf>predict</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>X</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>:</span>
<a id=__codelineno-66-68 name=__codelineno-66-68 href=#__codelineno-66-68></a>        <span class=k>return</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>_pipeline</span><span class=o>.</span><span class=n>predict</span><span class=p>(</span><span class=n>X</span><span class=p>))</span>
<a id=__codelineno-66-69 name=__codelineno-66-69 href=#__codelineno-66-69></a>
<a id=__codelineno-66-70 name=__codelineno-66-70 href=#__codelineno-66-70></a>    <span class=k>def</span><span class=w> </span><span class=nf>evaluate</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>X</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>y</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>float</span><span class=p>]:</span>
<a id=__codelineno-66-71 name=__codelineno-66-71 href=#__codelineno-66-71></a>        <span class=n>y_pred</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>predict</span><span class=p>(</span><span class=n>X</span><span class=p>)</span>
<a id=__codelineno-66-72 name=__codelineno-66-72 href=#__codelineno-66-72></a>        <span class=k>return</span> <span class=p>{</span><span class=s2>&quot;accuracy&quot;</span><span class=p>:</span> <span class=n>accuracy_score</span><span class=p>(</span><span class=n>y</span><span class=p>,</span> <span class=n>y_pred</span><span class=p>)}</span>
</code></pre></div> <h3 id=mapa-mental-de-conceptos-oop-para-ml>ğŸ§  Mapa Mental de Conceptos: OOP para ML<a class=headerlink href=#mapa-mental-de-conceptos-oop-para-ml title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-67-1 name=__codelineno-67-1 href=#__codelineno-67-1></a>                        â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
<a id=__codelineno-67-2 name=__codelineno-67-2 href=#__codelineno-67-2></a>                        â•‘   OOP PROFESIONAL PARA ML                â•‘
<a id=__codelineno-67-3 name=__codelineno-67-3 href=#__codelineno-67-3></a>                        â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
<a id=__codelineno-67-4 name=__codelineno-67-4 href=#__codelineno-67-4></a>                                          â”‚
<a id=__codelineno-67-5 name=__codelineno-67-5 href=#__codelineno-67-5></a>            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
<a id=__codelineno-67-6 name=__codelineno-67-6 href=#__codelineno-67-6></a>            â–¼                             â–¼                             â–¼
<a id=__codelineno-67-7 name=__codelineno-67-7 href=#__codelineno-67-7></a>  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
<a id=__codelineno-67-8 name=__codelineno-67-8 href=#__codelineno-67-8></a>  â”‚     Protocol     â”‚          â”‚       ABC        â”‚         â”‚   ComposiciÃ³n    â”‚
<a id=__codelineno-67-9 name=__codelineno-67-9 href=#__codelineno-67-9></a>  â”‚   (Duck Typing)  â”‚          â”‚  (Herencia)      â”‚         â”‚   vs Herencia    â”‚
<a id=__codelineno-67-10 name=__codelineno-67-10 href=#__codelineno-67-10></a>  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<a id=__codelineno-67-11 name=__codelineno-67-11 href=#__codelineno-67-11></a>         â”‚                             â”‚                            â”‚
<a id=__codelineno-67-12 name=__codelineno-67-12 href=#__codelineno-67-12></a>  â”œâ”€ @runtime_checkable        â”œâ”€ @abstractmethod            â”œâ”€ InyecciÃ³n
<a id=__codelineno-67-13 name=__codelineno-67-13 href=#__codelineno-67-13></a>  â”œâ”€ Verificable por mypy      â”œâ”€ Fuerza implementaciÃ³n      â”œâ”€ Flexibilidad
<a id=__codelineno-67-14 name=__codelineno-67-14 href=#__codelineno-67-14></a>  â”œâ”€ No requiere herencia      â”œâ”€ Clase base compartida      â””â”€ Testeable
<a id=__codelineno-67-15 name=__codelineno-67-15 href=#__codelineno-67-15></a>  â””â”€ Ideal para sklearn        â””â”€ Ideal para TUS clases
</code></pre></div> <p><strong>TÃ©rminos clave que debes dominar:</strong></p> <table> <thead> <tr> <th>TÃ©rmino</th> <th>Significado</th> <th>CuÃ¡ndo Usar</th> </tr> </thead> <tbody> <tr> <td><strong>Protocol</strong></td> <td>Interfaz implÃ­cita (duck typing)</td> <td>Para compatibilidad con sklearn</td> </tr> <tr> <td><strong>ABC</strong></td> <td>Abstract Base Class</td> <td>Para TUS clases base</td> </tr> <tr> <td><strong>@abstractmethod</strong></td> <td>MÃ©todo que DEBE implementarse</td> <td>Forzar contratos</td> </tr> <tr> <td><strong>@runtime_checkable</strong></td> <td>Verificar en tiempo de ejecuciÃ³n</td> <td><code>isinstance()</code> con Protocol</td> </tr> <tr> <td><strong>ComposiciÃ³n</strong></td> <td>"tiene un" vs "es un"</td> <td>Preferir sobre herencia</td> </tr> <tr> <td><strong>InyecciÃ³n</strong></td> <td>Pasar dependencias como parÃ¡metros</td> <td>Testing y flexibilidad</td> </tr> </tbody> </table> <hr> <h3 id=ejercicio-puente-crear-clase-abstracta>ğŸ’» Ejercicio Puente: Crear Clase Abstracta<a class=headerlink href=#ejercicio-puente-crear-clase-abstracta title="Permanent link">&para;</a></h3> <blockquote> <p><strong>Meta</strong>: Antes de crear jerarquÃ­as de Trainers, practica con abstracciones simples.</p> </blockquote> <p><strong>Ejercicio 1: Definir un Protocol</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-68-1 name=__codelineno-68-1 href=#__codelineno-68-1></a><span class=kn>from</span><span class=w> </span><span class=nn>typing</span><span class=w> </span><span class=kn>import</span> <span class=n>Protocol</span><span class=p>,</span> <span class=n>runtime_checkable</span>
<a id=__codelineno-68-2 name=__codelineno-68-2 href=#__codelineno-68-2></a>
<a id=__codelineno-68-3 name=__codelineno-68-3 href=#__codelineno-68-3></a><span class=c1># âœ… TU TAREA: Crea un Protocol &quot;Serializable&quot; que requiera:</span>
<a id=__codelineno-68-4 name=__codelineno-68-4 href=#__codelineno-68-4></a><span class=c1># - save(path: Path) -&gt; None</span>
<a id=__codelineno-68-5 name=__codelineno-68-5 href=#__codelineno-68-5></a><span class=c1># - load(path: Path) -&gt; &quot;Serializable&quot;</span>
<a id=__codelineno-68-6 name=__codelineno-68-6 href=#__codelineno-68-6></a>
<a id=__codelineno-68-7 name=__codelineno-68-7 href=#__codelineno-68-7></a><span class=nd>@runtime_checkable</span>
<a id=__codelineno-68-8 name=__codelineno-68-8 href=#__codelineno-68-8></a><span class=k>class</span><span class=w> </span><span class=nc>Serializable</span><span class=p>(</span><span class=n>Protocol</span><span class=p>):</span>
<a id=__codelineno-68-9 name=__codelineno-68-9 href=#__codelineno-68-9></a>    <span class=c1># ... tu cÃ³digo aquÃ­</span>
<a id=__codelineno-68-10 name=__codelineno-68-10 href=#__codelineno-68-10></a>    <span class=k>pass</span>
</code></pre></div></p> <p><strong>Ejercicio 2: Crear una ABC</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-69-1 name=__codelineno-69-1 href=#__codelineno-69-1></a><span class=kn>from</span><span class=w> </span><span class=nn>abc</span><span class=w> </span><span class=kn>import</span> <span class=n>ABC</span><span class=p>,</span> <span class=n>abstractmethod</span>
<a id=__codelineno-69-2 name=__codelineno-69-2 href=#__codelineno-69-2></a>
<a id=__codelineno-69-3 name=__codelineno-69-3 href=#__codelineno-69-3></a><span class=c1># âœ… TU TAREA: Crea una ABC &quot;BasePreprocessor&quot; con:</span>
<a id=__codelineno-69-4 name=__codelineno-69-4 href=#__codelineno-69-4></a><span class=c1># - fit(X) -&gt; &quot;BasePreprocessor&quot; (abstracto)</span>
<a id=__codelineno-69-5 name=__codelineno-69-5 href=#__codelineno-69-5></a><span class=c1># - transform(X) -&gt; ndarray (abstracto)</span>
<a id=__codelineno-69-6 name=__codelineno-69-6 href=#__codelineno-69-6></a><span class=c1># - fit_transform(X) -&gt; ndarray (concreto, usa fit y transform)</span>
<a id=__codelineno-69-7 name=__codelineno-69-7 href=#__codelineno-69-7></a>
<a id=__codelineno-69-8 name=__codelineno-69-8 href=#__codelineno-69-8></a><span class=k>class</span><span class=w> </span><span class=nc>BasePreprocessor</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
<a id=__codelineno-69-9 name=__codelineno-69-9 href=#__codelineno-69-9></a>    <span class=c1># ... tu cÃ³digo aquÃ­</span>
<a id=__codelineno-69-10 name=__codelineno-69-10 href=#__codelineno-69-10></a>    <span class=k>pass</span>
</code></pre></div></p> <p><strong>Ejercicio 3: Implementar la ABC</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-70-1 name=__codelineno-70-1 href=#__codelineno-70-1></a><span class=c1># âœ… TU TAREA: Crea &quot;StandardScalerCustom&quot; que:</span>
<a id=__codelineno-70-2 name=__codelineno-70-2 href=#__codelineno-70-2></a><span class=c1># - Hereda de BasePreprocessor</span>
<a id=__codelineno-70-3 name=__codelineno-70-3 href=#__codelineno-70-3></a><span class=c1># - Implementa fit() guardando media y std</span>
<a id=__codelineno-70-4 name=__codelineno-70-4 href=#__codelineno-70-4></a><span class=c1># - Implementa transform() normalizando datos</span>
<a id=__codelineno-70-5 name=__codelineno-70-5 href=#__codelineno-70-5></a>
<a id=__codelineno-70-6 name=__codelineno-70-6 href=#__codelineno-70-6></a><span class=k>class</span><span class=w> </span><span class=nc>StandardScalerCustom</span><span class=p>(</span><span class=n>BasePreprocessor</span><span class=p>):</span>
<a id=__codelineno-70-7 name=__codelineno-70-7 href=#__codelineno-70-7></a>    <span class=c1># ... tu cÃ³digo aquÃ­</span>
<a id=__codelineno-70-8 name=__codelineno-70-8 href=#__codelineno-70-8></a>    <span class=k>pass</span>
</code></pre></div></p> <details> <summary>ğŸ” Ver Soluciones</summary> <div class=highlight><pre><span></span><code><a id=__codelineno-71-1 name=__codelineno-71-1 href=#__codelineno-71-1></a><span class=kn>from</span><span class=w> </span><span class=nn>typing</span><span class=w> </span><span class=kn>import</span> <span class=n>Protocol</span><span class=p>,</span> <span class=n>runtime_checkable</span>
<a id=__codelineno-71-2 name=__codelineno-71-2 href=#__codelineno-71-2></a><span class=kn>from</span><span class=w> </span><span class=nn>abc</span><span class=w> </span><span class=kn>import</span> <span class=n>ABC</span><span class=p>,</span> <span class=n>abstractmethod</span>
<a id=__codelineno-71-3 name=__codelineno-71-3 href=#__codelineno-71-3></a><span class=kn>from</span><span class=w> </span><span class=nn>pathlib</span><span class=w> </span><span class=kn>import</span> <span class=n>Path</span>
<a id=__codelineno-71-4 name=__codelineno-71-4 href=#__codelineno-71-4></a><span class=kn>import</span><span class=w> </span><span class=nn>numpy</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>np</span>
<a id=__codelineno-71-5 name=__codelineno-71-5 href=#__codelineno-71-5></a><span class=kn>from</span><span class=w> </span><span class=nn>numpy.typing</span><span class=w> </span><span class=kn>import</span> <span class=n>NDArray</span>
<a id=__codelineno-71-6 name=__codelineno-71-6 href=#__codelineno-71-6></a>
<a id=__codelineno-71-7 name=__codelineno-71-7 href=#__codelineno-71-7></a><span class=c1># Ejercicio 1: Protocol</span>
<a id=__codelineno-71-8 name=__codelineno-71-8 href=#__codelineno-71-8></a><span class=nd>@runtime_checkable</span>
<a id=__codelineno-71-9 name=__codelineno-71-9 href=#__codelineno-71-9></a><span class=k>class</span><span class=w> </span><span class=nc>Serializable</span><span class=p>(</span><span class=n>Protocol</span><span class=p>):</span>
<a id=__codelineno-71-10 name=__codelineno-71-10 href=#__codelineno-71-10></a>    <span class=k>def</span><span class=w> </span><span class=nf>save</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>path</span><span class=p>:</span> <span class=n>Path</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=kc>None</span><span class=p>:</span> <span class=o>...</span>
<a id=__codelineno-71-11 name=__codelineno-71-11 href=#__codelineno-71-11></a>    <span class=k>def</span><span class=w> </span><span class=nf>load</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>path</span><span class=p>:</span> <span class=n>Path</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=s2>&quot;Serializable&quot;</span><span class=p>:</span> <span class=o>...</span>
<a id=__codelineno-71-12 name=__codelineno-71-12 href=#__codelineno-71-12></a>
<a id=__codelineno-71-13 name=__codelineno-71-13 href=#__codelineno-71-13></a><span class=c1># Ejercicio 2: ABC</span>
<a id=__codelineno-71-14 name=__codelineno-71-14 href=#__codelineno-71-14></a><span class=k>class</span><span class=w> </span><span class=nc>BasePreprocessor</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
<a id=__codelineno-71-15 name=__codelineno-71-15 href=#__codelineno-71-15></a>    <span class=nd>@abstractmethod</span>
<a id=__codelineno-71-16 name=__codelineno-71-16 href=#__codelineno-71-16></a>    <span class=k>def</span><span class=w> </span><span class=nf>fit</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>X</span><span class=p>:</span> <span class=n>NDArray</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=s2>&quot;BasePreprocessor&quot;</span><span class=p>:</span>
<a id=__codelineno-71-17 name=__codelineno-71-17 href=#__codelineno-71-17></a>        <span class=k>pass</span>
<a id=__codelineno-71-18 name=__codelineno-71-18 href=#__codelineno-71-18></a>
<a id=__codelineno-71-19 name=__codelineno-71-19 href=#__codelineno-71-19></a>    <span class=nd>@abstractmethod</span>
<a id=__codelineno-71-20 name=__codelineno-71-20 href=#__codelineno-71-20></a>    <span class=k>def</span><span class=w> </span><span class=nf>transform</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>X</span><span class=p>:</span> <span class=n>NDArray</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>NDArray</span><span class=p>:</span>
<a id=__codelineno-71-21 name=__codelineno-71-21 href=#__codelineno-71-21></a>        <span class=k>pass</span>
<a id=__codelineno-71-22 name=__codelineno-71-22 href=#__codelineno-71-22></a>
<a id=__codelineno-71-23 name=__codelineno-71-23 href=#__codelineno-71-23></a>    <span class=k>def</span><span class=w> </span><span class=nf>fit_transform</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>X</span><span class=p>:</span> <span class=n>NDArray</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>NDArray</span><span class=p>:</span>
<a id=__codelineno-71-24 name=__codelineno-71-24 href=#__codelineno-71-24></a><span class=w>        </span><span class=sd>&quot;&quot;&quot;MÃ©todo concreto que usa los abstractos.&quot;&quot;&quot;</span>
<a id=__codelineno-71-25 name=__codelineno-71-25 href=#__codelineno-71-25></a>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=n>X</span><span class=p>)</span><span class=o>.</span><span class=n>transform</span><span class=p>(</span><span class=n>X</span><span class=p>)</span>
<a id=__codelineno-71-26 name=__codelineno-71-26 href=#__codelineno-71-26></a>
<a id=__codelineno-71-27 name=__codelineno-71-27 href=#__codelineno-71-27></a><span class=c1># Ejercicio 3: ImplementaciÃ³n</span>
<a id=__codelineno-71-28 name=__codelineno-71-28 href=#__codelineno-71-28></a><span class=k>class</span><span class=w> </span><span class=nc>StandardScalerCustom</span><span class=p>(</span><span class=n>BasePreprocessor</span><span class=p>):</span>
<a id=__codelineno-71-29 name=__codelineno-71-29 href=#__codelineno-71-29></a>    <span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
<a id=__codelineno-71-30 name=__codelineno-71-30 href=#__codelineno-71-30></a>        <span class=bp>self</span><span class=o>.</span><span class=n>mean_</span><span class=p>:</span> <span class=n>NDArray</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span>
<a id=__codelineno-71-31 name=__codelineno-71-31 href=#__codelineno-71-31></a>        <span class=bp>self</span><span class=o>.</span><span class=n>std_</span><span class=p>:</span> <span class=n>NDArray</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=kc>None</span>
<a id=__codelineno-71-32 name=__codelineno-71-32 href=#__codelineno-71-32></a>
<a id=__codelineno-71-33 name=__codelineno-71-33 href=#__codelineno-71-33></a>    <span class=k>def</span><span class=w> </span><span class=nf>fit</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>X</span><span class=p>:</span> <span class=n>NDArray</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=s2>&quot;StandardScalerCustom&quot;</span><span class=p>:</span>
<a id=__codelineno-71-34 name=__codelineno-71-34 href=#__codelineno-71-34></a>        <span class=bp>self</span><span class=o>.</span><span class=n>mean_</span> <span class=o>=</span> <span class=n>X</span><span class=o>.</span><span class=n>mean</span><span class=p>(</span><span class=n>axis</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-71-35 name=__codelineno-71-35 href=#__codelineno-71-35></a>        <span class=bp>self</span><span class=o>.</span><span class=n>std_</span> <span class=o>=</span> <span class=n>X</span><span class=o>.</span><span class=n>std</span><span class=p>(</span><span class=n>axis</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-71-36 name=__codelineno-71-36 href=#__codelineno-71-36></a>        <span class=k>return</span> <span class=bp>self</span>
<a id=__codelineno-71-37 name=__codelineno-71-37 href=#__codelineno-71-37></a>
<a id=__codelineno-71-38 name=__codelineno-71-38 href=#__codelineno-71-38></a>    <span class=k>def</span><span class=w> </span><span class=nf>transform</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>X</span><span class=p>:</span> <span class=n>NDArray</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>NDArray</span><span class=p>:</span>
<a id=__codelineno-71-39 name=__codelineno-71-39 href=#__codelineno-71-39></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>mean_</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
<a id=__codelineno-71-40 name=__codelineno-71-40 href=#__codelineno-71-40></a>            <span class=k>raise</span> <span class=ne>ValueError</span><span class=p>(</span><span class=s2>&quot;Fit first!&quot;</span><span class=p>)</span>
<a id=__codelineno-71-41 name=__codelineno-71-41 href=#__codelineno-71-41></a>        <span class=k>return</span> <span class=p>(</span><span class=n>X</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>mean_</span><span class=p>)</span> <span class=o>/</span> <span class=bp>self</span><span class=o>.</span><span class=n>std_</span>
</code></pre></div> </details> <hr> <h3 id=practica-del-portafolio-basetrainer-compartido>ğŸ› ï¸ PrÃ¡ctica del Portafolio: BaseTrainer Compartido<a class=headerlink href=#practica-del-portafolio-basetrainer-compartido title="Permanent link">&para;</a></h3> <blockquote> <p><strong>Tarea</strong>: Crear una clase base que los 3 proyectos del portafolio puedan usar.</p> </blockquote> <p><strong>Paso 1: DiseÃ±a la interfaz comÃºn</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-72-1 name=__codelineno-72-1 href=#__codelineno-72-1></a><span class=c1># Â¿QuÃ© mÃ©todos TODOS los trainers deben tener?</span>
<a id=__codelineno-72-2 name=__codelineno-72-2 href=#__codelineno-72-2></a><span class=c1># - fit(X, y) â†’ entrena el modelo</span>
<a id=__codelineno-72-3 name=__codelineno-72-3 href=#__codelineno-72-3></a><span class=c1># - predict(X) â†’ genera predicciones</span>
<a id=__codelineno-72-4 name=__codelineno-72-4 href=#__codelineno-72-4></a><span class=c1># - evaluate(X, y) â†’ calcula mÃ©tricas</span>
<a id=__codelineno-72-5 name=__codelineno-72-5 href=#__codelineno-72-5></a><span class=c1># - save(path) â†’ guarda el modelo</span>
<a id=__codelineno-72-6 name=__codelineno-72-6 href=#__codelineno-72-6></a><span class=c1># - load(path) â†’ carga el modelo</span>
</code></pre></div></p> <p><strong>Paso 2: Crea la ABC (pistas guiadas)</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-73-1 name=__codelineno-73-1 href=#__codelineno-73-1></a><span class=c1># common_utils/base.py</span>
<a id=__codelineno-73-2 name=__codelineno-73-2 href=#__codelineno-73-2></a>
<a id=__codelineno-73-3 name=__codelineno-73-3 href=#__codelineno-73-3></a><span class=kn>from</span><span class=w> </span><span class=nn>abc</span><span class=w> </span><span class=kn>import</span> <span class=n>ABC</span><span class=p>,</span> <span class=n>abstractmethod</span>
<a id=__codelineno-73-4 name=__codelineno-73-4 href=#__codelineno-73-4></a><span class=kn>import</span><span class=w> </span><span class=nn>pandas</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>pd</span>
<a id=__codelineno-73-5 name=__codelineno-73-5 href=#__codelineno-73-5></a><span class=kn>from</span><span class=w> </span><span class=nn>pathlib</span><span class=w> </span><span class=kn>import</span> <span class=n>Path</span>
<a id=__codelineno-73-6 name=__codelineno-73-6 href=#__codelineno-73-6></a>
<a id=__codelineno-73-7 name=__codelineno-73-7 href=#__codelineno-73-7></a><span class=k>class</span><span class=w> </span><span class=nc>BaseTrainer</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
<a id=__codelineno-73-8 name=__codelineno-73-8 href=#__codelineno-73-8></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Clase base para todos los trainers del portafolio.&quot;&quot;&quot;</span>
<a id=__codelineno-73-9 name=__codelineno-73-9 href=#__codelineno-73-9></a>
<a id=__codelineno-73-10 name=__codelineno-73-10 href=#__codelineno-73-10></a>    <span class=nd>@abstractmethod</span>
<a id=__codelineno-73-11 name=__codelineno-73-11 href=#__codelineno-73-11></a>    <span class=k>def</span><span class=w> </span><span class=nf>fit</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>X</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>y</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=s2>&quot;BaseTrainer&quot;</span><span class=p>:</span>
<a id=__codelineno-73-12 name=__codelineno-73-12 href=#__codelineno-73-12></a>        <span class=c1># Â¿QuÃ© debe hacer? Solo la firma, no implementaciÃ³n</span>
<a id=__codelineno-73-13 name=__codelineno-73-13 href=#__codelineno-73-13></a>        <span class=o>...</span>
<a id=__codelineno-73-14 name=__codelineno-73-14 href=#__codelineno-73-14></a>
<a id=__codelineno-73-15 name=__codelineno-73-15 href=#__codelineno-73-15></a>    <span class=nd>@abstractmethod</span>
<a id=__codelineno-73-16 name=__codelineno-73-16 href=#__codelineno-73-16></a>    <span class=k>def</span><span class=w> </span><span class=nf>predict</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>X</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>:</span>
<a id=__codelineno-73-17 name=__codelineno-73-17 href=#__codelineno-73-17></a>        <span class=o>...</span>
<a id=__codelineno-73-18 name=__codelineno-73-18 href=#__codelineno-73-18></a>
<a id=__codelineno-73-19 name=__codelineno-73-19 href=#__codelineno-73-19></a>    <span class=c1># Â¿QuÃ© otros mÃ©todos abstractos necesitas?</span>
<a id=__codelineno-73-20 name=__codelineno-73-20 href=#__codelineno-73-20></a>    <span class=c1># Â¿Hay mÃ©todos concretos que puedas implementar aquÃ­?</span>
</code></pre></div></p> <p><strong>Paso 3: Implementa en cada proyecto</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-74-1 name=__codelineno-74-1 href=#__codelineno-74-1></a><span class=c1># BankChurn-Predictor/src/bankchurn/training.py</span>
<a id=__codelineno-74-2 name=__codelineno-74-2 href=#__codelineno-74-2></a><span class=kn>from</span><span class=w> </span><span class=nn>common_utils.base</span><span class=w> </span><span class=kn>import</span> <span class=n>BaseTrainer</span>
<a id=__codelineno-74-3 name=__codelineno-74-3 href=#__codelineno-74-3></a>
<a id=__codelineno-74-4 name=__codelineno-74-4 href=#__codelineno-74-4></a><span class=k>class</span><span class=w> </span><span class=nc>ChurnTrainer</span><span class=p>(</span><span class=n>BaseTrainer</span><span class=p>):</span>
<a id=__codelineno-74-5 name=__codelineno-74-5 href=#__codelineno-74-5></a>    <span class=c1># Â¿QuÃ© mÃ©todos DEBES implementar?</span>
<a id=__codelineno-74-6 name=__codelineno-74-6 href=#__codelineno-74-6></a>    <span class=c1># Â¿QuÃ© pasa si olvidas implementar uno?</span>
<a id=__codelineno-74-7 name=__codelineno-74-7 href=#__codelineno-74-7></a>    <span class=k>pass</span>
</code></pre></div></p> <p><strong>âŒ NO hagas esto:</strong> - Crear jerarquÃ­as profundas (mÃ¡s de 2 niveles) - Usar herencia cuando composiciÃ³n es mejor - Forzar mÃ©todos que no todos usan</p> <p><strong>âœ… SÃ haz esto:</strong> - Interfaces pequeÃ±as y cohesivas - Preferir composiciÃ³n sobre herencia - Usar Protocol para compatibilidad con sklearn</p> <hr> <h3 id=checkpoint-de-conocimiento-oop-para-ml>âœ… Checkpoint de Conocimiento: OOP para ML<a class=headerlink href=#checkpoint-de-conocimiento-oop-para-ml title="Permanent link">&para;</a></h3> <p><strong>Pregunta 1</strong>: Â¿CuÃ¡l es la diferencia entre Protocol y ABC?</p> <p>A) Protocol es mÃ¡s rÃ¡pido<br> B) Protocol no requiere herencia, ABC sÃ­<br> C) ABC es para Python 2<br> D) No hay diferencia </p> <p><strong>Pregunta 2</strong>: Â¿Por quÃ© sklearn usa duck typing en vez de herencia estricta?</p> <p>A) Es mÃ¡s fÃ¡cil de programar<br> B) Permite que CUALQUIER clase con <code>fit()</code> y <code>predict()</code> funcione<br> C) Es requerido por Python<br> D) Ocupa menos memoria </p> <p><strong>Pregunta 3</strong>: Â¿QuÃ© pasa si intentas instanciar una ABC sin implementar todos los mÃ©todos abstractos?</p> <p>A) Funciona con valores por defecto<br> B) Python lanza TypeError inmediatamente<br> C) Solo falla cuando llamas al mÃ©todo<br> D) mypy lo ignora </p> <p><strong>ğŸ”§ Escenario de Debugging:</strong></p> <div class=highlight><pre><span></span><code><a id=__codelineno-75-1 name=__codelineno-75-1 href=#__codelineno-75-1></a><span class=k>class</span><span class=w> </span><span class=nc>BaseModel</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
<a id=__codelineno-75-2 name=__codelineno-75-2 href=#__codelineno-75-2></a>    <span class=nd>@abstractmethod</span>
<a id=__codelineno-75-3 name=__codelineno-75-3 href=#__codelineno-75-3></a>    <span class=k>def</span><span class=w> </span><span class=nf>fit</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>X</span><span class=p>,</span> <span class=n>y</span><span class=p>):</span> <span class=o>...</span>
<a id=__codelineno-75-4 name=__codelineno-75-4 href=#__codelineno-75-4></a>    <span class=nd>@abstractmethod</span>
<a id=__codelineno-75-5 name=__codelineno-75-5 href=#__codelineno-75-5></a>    <span class=k>def</span><span class=w> </span><span class=nf>predict</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>X</span><span class=p>):</span> <span class=o>...</span>
<a id=__codelineno-75-6 name=__codelineno-75-6 href=#__codelineno-75-6></a>
<a id=__codelineno-75-7 name=__codelineno-75-7 href=#__codelineno-75-7></a><span class=k>class</span><span class=w> </span><span class=nc>MyModel</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
<a id=__codelineno-75-8 name=__codelineno-75-8 href=#__codelineno-75-8></a>    <span class=k>def</span><span class=w> </span><span class=nf>fit</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>X</span><span class=p>,</span> <span class=n>y</span><span class=p>):</span>
<a id=__codelineno-75-9 name=__codelineno-75-9 href=#__codelineno-75-9></a>        <span class=bp>self</span><span class=o>.</span><span class=n>model</span> <span class=o>=</span> <span class=n>RandomForestClassifier</span><span class=p>()</span>
<a id=__codelineno-75-10 name=__codelineno-75-10 href=#__codelineno-75-10></a>        <span class=bp>self</span><span class=o>.</span><span class=n>model</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=n>X</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span>
<a id=__codelineno-75-11 name=__codelineno-75-11 href=#__codelineno-75-11></a>        <span class=k>return</span> <span class=bp>self</span>
<a id=__codelineno-75-12 name=__codelineno-75-12 href=#__codelineno-75-12></a>
<a id=__codelineno-75-13 name=__codelineno-75-13 href=#__codelineno-75-13></a>    <span class=c1># OlvidÃ© implementar predict()</span>
<a id=__codelineno-75-14 name=__codelineno-75-14 href=#__codelineno-75-14></a>
<a id=__codelineno-75-15 name=__codelineno-75-15 href=#__codelineno-75-15></a><span class=n>model</span> <span class=o>=</span> <span class=n>MyModel</span><span class=p>()</span>  <span class=c1># â† Â¿QuÃ© error verÃ¡s?</span>
</code></pre></div> <details> <summary>ğŸ” Ver Respuestas</summary> **Pregunta 1**: B) Protocol no requiere herencia, ABC sÃ­. Protocol verifica por "forma" (duck typing). **Pregunta 2**: B) Permite que CUALQUIER clase con `fit()` y `predict()` funcione. No importa de quÃ© clase herede. **Pregunta 3**: B) Python lanza TypeError inmediatamente al intentar instanciar. **Escenario de Debugging**: <div class=highlight><pre><span></span><code><a id=__codelineno-76-1 name=__codelineno-76-1 href=#__codelineno-76-1></a>TypeError: Can&#39;t instantiate abstract class MyModel with abstract method predict
</code></pre></div> El error ocurre EN LA INSTANCIACIÃ“N, no despuÃ©s. Esto es intencional: falla rÃ¡pido. **SoluciÃ³n**: Implementar el mÃ©todo faltante: <div class=highlight><pre><span></span><code><a id=__codelineno-77-1 name=__codelineno-77-1 href=#__codelineno-77-1></a><span class=k>def</span><span class=w> </span><span class=nf>predict</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>X</span><span class=p>):</span>
<a id=__codelineno-77-2 name=__codelineno-77-2 href=#__codelineno-77-2></a>    <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>model</span><span class=o>.</span><span class=n>predict</span><span class=p>(</span><span class=n>X</span><span class=p>)</span>
</code></pre></div> </details> <hr> <p><a id=16-pandera-validacion-dataframes></a></p> <h2 id=16-pandera-validacion-de-dataframes>1.6 Pandera: ValidaciÃ³n de DataFrames<a class=headerlink href=#16-pandera-validacion-de-dataframes title="Permanent link">&para;</a></h2> <blockquote> <p><strong>CRÃTICO</strong>: Sin Pandera, los errores de datos aparecen en sklearn, no donde ocurrieron.</p> </blockquote> <h3 id=el-problema-dataframes-que-mienten>El Problema: DataFrames que Mienten<a class=headerlink href=#el-problema-dataframes-que-mienten title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-78-1 name=__codelineno-78-1 href=#__codelineno-78-1></a><span class=c1># âŒ CÃ“DIGO JUNIOR: Asume que el DataFrame es correcto</span>
<a id=__codelineno-78-2 name=__codelineno-78-2 href=#__codelineno-78-2></a><span class=k>def</span><span class=w> </span><span class=nf>train_model</span><span class=p>(</span><span class=n>df</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Pipeline</span><span class=p>:</span>
<a id=__codelineno-78-3 name=__codelineno-78-3 href=#__codelineno-78-3></a>    <span class=n>X</span> <span class=o>=</span> <span class=n>df</span><span class=o>.</span><span class=n>drop</span><span class=p>(</span><span class=s2>&quot;Exited&quot;</span><span class=p>,</span> <span class=n>axis</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>  <span class=c1># Â¿Y si &quot;Exited&quot; no existe?</span>
<a id=__codelineno-78-4 name=__codelineno-78-4 href=#__codelineno-78-4></a>    <span class=n>y</span> <span class=o>=</span> <span class=n>df</span><span class=p>[</span><span class=s2>&quot;Exited&quot;</span><span class=p>]</span>               <span class=c1># Â¿Y si tiene valores como 2, -1, None?</span>
<a id=__codelineno-78-5 name=__codelineno-78-5 href=#__codelineno-78-5></a>
<a id=__codelineno-78-6 name=__codelineno-78-6 href=#__codelineno-78-6></a>    <span class=n>pipeline</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=n>X</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span>
<a id=__codelineno-78-7 name=__codelineno-78-7 href=#__codelineno-78-7></a>    <span class=k>return</span> <span class=n>pipeline</span>
<a id=__codelineno-78-8 name=__codelineno-78-8 href=#__codelineno-78-8></a>
<a id=__codelineno-78-9 name=__codelineno-78-9 href=#__codelineno-78-9></a><span class=c1># Todo parece funcionar... hasta que llegan datos corruptos:</span>
<a id=__codelineno-78-10 name=__codelineno-78-10 href=#__codelineno-78-10></a><span class=n>bad_data</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>({</span>
<a id=__codelineno-78-11 name=__codelineno-78-11 href=#__codelineno-78-11></a>    <span class=s2>&quot;Age&quot;</span><span class=p>:</span> <span class=p>[</span><span class=o>-</span><span class=mi>5</span><span class=p>,</span> <span class=mi>25</span><span class=p>,</span> <span class=mi>200</span><span class=p>],</span>        <span class=c1># Edad negativa y 200 aÃ±os</span>
<a id=__codelineno-78-12 name=__codelineno-78-12 href=#__codelineno-78-12></a>    <span class=s2>&quot;Balance&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mi>1000</span><span class=p>,</span> <span class=o>-</span><span class=mi>500</span><span class=p>,</span> <span class=mi>0</span><span class=p>],</span>  <span class=c1># Balance negativo</span>
<a id=__codelineno-78-13 name=__codelineno-78-13 href=#__codelineno-78-13></a>    <span class=s2>&quot;Exited&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>2</span><span class=p>,</span> <span class=kc>None</span><span class=p>],</span>      <span class=c1># Valor 2 y None (no binario)</span>
<a id=__codelineno-78-14 name=__codelineno-78-14 href=#__codelineno-78-14></a><span class=p>})</span>
<a id=__codelineno-78-15 name=__codelineno-78-15 href=#__codelineno-78-15></a><span class=n>model</span> <span class=o>=</span> <span class=n>train_model</span><span class=p>(</span><span class=n>bad_data</span><span class=p>)</span>  <span class=c1># NO DA ERROR, pero modelo es basura</span>
</code></pre></div> <h3 id=la-solucion-pandera-schema>La SoluciÃ³n: Pandera Schema<a class=headerlink href=#la-solucion-pandera-schema title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-79-1 name=__codelineno-79-1 href=#__codelineno-79-1></a><span class=kn>import</span><span class=w> </span><span class=nn>pandera</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>pa</span>
<a id=__codelineno-79-2 name=__codelineno-79-2 href=#__codelineno-79-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pandera.typing</span><span class=w> </span><span class=kn>import</span> <span class=n>DataFrame</span><span class=p>,</span> <span class=n>Series</span>
<a id=__codelineno-79-3 name=__codelineno-79-3 href=#__codelineno-79-3></a>
<a id=__codelineno-79-4 name=__codelineno-79-4 href=#__codelineno-79-4></a><span class=k>class</span><span class=w> </span><span class=nc>BankChurnSchema</span><span class=p>(</span><span class=n>pa</span><span class=o>.</span><span class=n>DataFrameModel</span><span class=p>):</span>
<a id=__codelineno-79-5 name=__codelineno-79-5 href=#__codelineno-79-5></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Schema para datos de Bank Churn - producciÃ³n.&quot;&quot;&quot;</span>
<a id=__codelineno-79-6 name=__codelineno-79-6 href=#__codelineno-79-6></a>
<a id=__codelineno-79-7 name=__codelineno-79-7 href=#__codelineno-79-7></a>    <span class=n>CreditScore</span><span class=p>:</span> <span class=n>Series</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=n>pa</span><span class=o>.</span><span class=n>Field</span><span class=p>(</span><span class=n>ge</span><span class=o>=</span><span class=mi>300</span><span class=p>,</span> <span class=n>le</span><span class=o>=</span><span class=mi>850</span><span class=p>,</span> <span class=n>description</span><span class=o>=</span><span class=s2>&quot;FICO score&quot;</span><span class=p>)</span>
<a id=__codelineno-79-8 name=__codelineno-79-8 href=#__codelineno-79-8></a>    <span class=n>Age</span><span class=p>:</span> <span class=n>Series</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=n>pa</span><span class=o>.</span><span class=n>Field</span><span class=p>(</span><span class=n>ge</span><span class=o>=</span><span class=mi>18</span><span class=p>,</span> <span class=n>le</span><span class=o>=</span><span class=mi>100</span><span class=p>,</span> <span class=n>description</span><span class=o>=</span><span class=s2>&quot;Edad del cliente&quot;</span><span class=p>)</span>
<a id=__codelineno-79-9 name=__codelineno-79-9 href=#__codelineno-79-9></a>    <span class=n>Balance</span><span class=p>:</span> <span class=n>Series</span><span class=p>[</span><span class=nb>float</span><span class=p>]</span> <span class=o>=</span> <span class=n>pa</span><span class=o>.</span><span class=n>Field</span><span class=p>(</span><span class=n>ge</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>description</span><span class=o>=</span><span class=s2>&quot;Balance en cuenta&quot;</span><span class=p>)</span>
<a id=__codelineno-79-10 name=__codelineno-79-10 href=#__codelineno-79-10></a>    <span class=n>NumOfProducts</span><span class=p>:</span> <span class=n>Series</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=n>pa</span><span class=o>.</span><span class=n>Field</span><span class=p>(</span><span class=n>ge</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>le</span><span class=o>=</span><span class=mi>4</span><span class=p>)</span>
<a id=__codelineno-79-11 name=__codelineno-79-11 href=#__codelineno-79-11></a>    <span class=n>Exited</span><span class=p>:</span> <span class=n>Series</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=n>pa</span><span class=o>.</span><span class=n>Field</span><span class=p>(</span><span class=n>isin</span><span class=o>=</span><span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>],</span> <span class=n>description</span><span class=o>=</span><span class=s2>&quot;Target binario&quot;</span><span class=p>)</span>
<a id=__codelineno-79-12 name=__codelineno-79-12 href=#__codelineno-79-12></a>
<a id=__codelineno-79-13 name=__codelineno-79-13 href=#__codelineno-79-13></a>    <span class=k>class</span><span class=w> </span><span class=nc>Config</span><span class=p>:</span>
<a id=__codelineno-79-14 name=__codelineno-79-14 href=#__codelineno-79-14></a>        <span class=n>strict</span> <span class=o>=</span> <span class=kc>True</span>   <span class=c1># Rechaza columnas extra</span>
<a id=__codelineno-79-15 name=__codelineno-79-15 href=#__codelineno-79-15></a>        <span class=n>coerce</span> <span class=o>=</span> <span class=kc>True</span>   <span class=c1># Convierte tipos automÃ¡ticamente</span>
<a id=__codelineno-79-16 name=__codelineno-79-16 href=#__codelineno-79-16></a>
<a id=__codelineno-79-17 name=__codelineno-79-17 href=#__codelineno-79-17></a>
<a id=__codelineno-79-18 name=__codelineno-79-18 href=#__codelineno-79-18></a><span class=nd>@pa</span><span class=o>.</span><span class=n>check_types</span>  <span class=c1># Decorador que valida entrada automÃ¡ticamente</span>
<a id=__codelineno-79-19 name=__codelineno-79-19 href=#__codelineno-79-19></a><span class=k>def</span><span class=w> </span><span class=nf>train_model</span><span class=p>(</span><span class=n>df</span><span class=p>:</span> <span class=n>DataFrame</span><span class=p>[</span><span class=n>BankChurnSchema</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>Pipeline</span><span class=p>:</span>
<a id=__codelineno-79-20 name=__codelineno-79-20 href=#__codelineno-79-20></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;DataFrame GARANTIZADO vÃ¡lido por Pandera.&quot;&quot;&quot;</span>
<a id=__codelineno-79-21 name=__codelineno-79-21 href=#__codelineno-79-21></a>    <span class=n>X</span> <span class=o>=</span> <span class=n>df</span><span class=o>.</span><span class=n>drop</span><span class=p>(</span><span class=s2>&quot;Exited&quot;</span><span class=p>,</span> <span class=n>axis</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-79-22 name=__codelineno-79-22 href=#__codelineno-79-22></a>    <span class=n>y</span> <span class=o>=</span> <span class=n>df</span><span class=p>[</span><span class=s2>&quot;Exited&quot;</span><span class=p>]</span>
<a id=__codelineno-79-23 name=__codelineno-79-23 href=#__codelineno-79-23></a>    <span class=c1># Ahora podemos confiar en que los datos son correctos</span>
<a id=__codelineno-79-24 name=__codelineno-79-24 href=#__codelineno-79-24></a>    <span class=o>...</span>
<a id=__codelineno-79-25 name=__codelineno-79-25 href=#__codelineno-79-25></a>
<a id=__codelineno-79-26 name=__codelineno-79-26 href=#__codelineno-79-26></a>
<a id=__codelineno-79-27 name=__codelineno-79-27 href=#__codelineno-79-27></a><span class=c1># Error CLARO si datos son invÃ¡lidos:</span>
<a id=__codelineno-79-28 name=__codelineno-79-28 href=#__codelineno-79-28></a><span class=c1># SchemaError: Column &#39;Age&#39; failed check: greater_than_or_equal_to(18)</span>
</code></pre></div> <h3 id=schemas-del-portafolio>Schemas del Portafolio<a class=headerlink href=#schemas-del-portafolio title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-80-1 name=__codelineno-80-1 href=#__codelineno-80-1></a><span class=c1># src/bankchurn/schemas.py</span>
<a id=__codelineno-80-2 name=__codelineno-80-2 href=#__codelineno-80-2></a>
<a id=__codelineno-80-3 name=__codelineno-80-3 href=#__codelineno-80-3></a><span class=k>class</span><span class=w> </span><span class=nc>RawDataSchema</span><span class=p>(</span><span class=n>pa</span><span class=o>.</span><span class=n>DataFrameModel</span><span class=p>):</span>
<a id=__codelineno-80-4 name=__codelineno-80-4 href=#__codelineno-80-4></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Schema permisivo para datos crudos (permite nulos).&quot;&quot;&quot;</span>
<a id=__codelineno-80-5 name=__codelineno-80-5 href=#__codelineno-80-5></a>    <span class=n>CreditScore</span><span class=p>:</span> <span class=n>Series</span><span class=p>[</span><span class=nb>float</span><span class=p>]</span> <span class=o>=</span> <span class=n>pa</span><span class=o>.</span><span class=n>Field</span><span class=p>(</span><span class=n>nullable</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-80-6 name=__codelineno-80-6 href=#__codelineno-80-6></a>    <span class=n>Age</span><span class=p>:</span> <span class=n>Series</span><span class=p>[</span><span class=nb>float</span><span class=p>]</span> <span class=o>=</span> <span class=n>pa</span><span class=o>.</span><span class=n>Field</span><span class=p>(</span><span class=n>nullable</span><span class=o>=</span><span class=kc>True</span><span class=p>,</span> <span class=n>ge</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-80-7 name=__codelineno-80-7 href=#__codelineno-80-7></a>    <span class=k>class</span><span class=w> </span><span class=nc>Config</span><span class=p>:</span>
<a id=__codelineno-80-8 name=__codelineno-80-8 href=#__codelineno-80-8></a>        <span class=n>strict</span> <span class=o>=</span> <span class=kc>False</span>  <span class=c1># Permite columnas extra (RowNumber, etc.)</span>
<a id=__codelineno-80-9 name=__codelineno-80-9 href=#__codelineno-80-9></a>
<a id=__codelineno-80-10 name=__codelineno-80-10 href=#__codelineno-80-10></a>
<a id=__codelineno-80-11 name=__codelineno-80-11 href=#__codelineno-80-11></a><span class=k>class</span><span class=w> </span><span class=nc>ProcessedDataSchema</span><span class=p>(</span><span class=n>pa</span><span class=o>.</span><span class=n>DataFrameModel</span><span class=p>):</span>
<a id=__codelineno-80-12 name=__codelineno-80-12 href=#__codelineno-80-12></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Schema estricto para datos listos para entrenar.&quot;&quot;&quot;</span>
<a id=__codelineno-80-13 name=__codelineno-80-13 href=#__codelineno-80-13></a>    <span class=n>CreditScore</span><span class=p>:</span> <span class=n>Series</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=n>pa</span><span class=o>.</span><span class=n>Field</span><span class=p>(</span><span class=n>ge</span><span class=o>=</span><span class=mi>300</span><span class=p>,</span> <span class=n>le</span><span class=o>=</span><span class=mi>850</span><span class=p>)</span>
<a id=__codelineno-80-14 name=__codelineno-80-14 href=#__codelineno-80-14></a>    <span class=n>Age</span><span class=p>:</span> <span class=n>Series</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=n>pa</span><span class=o>.</span><span class=n>Field</span><span class=p>(</span><span class=n>ge</span><span class=o>=</span><span class=mi>18</span><span class=p>,</span> <span class=n>le</span><span class=o>=</span><span class=mi>100</span><span class=p>)</span>
<a id=__codelineno-80-15 name=__codelineno-80-15 href=#__codelineno-80-15></a>    <span class=n>Exited</span><span class=p>:</span> <span class=n>Series</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=n>pa</span><span class=o>.</span><span class=n>Field</span><span class=p>(</span><span class=n>isin</span><span class=o>=</span><span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>])</span>
<a id=__codelineno-80-16 name=__codelineno-80-16 href=#__codelineno-80-16></a>    <span class=k>class</span><span class=w> </span><span class=nc>Config</span><span class=p>:</span>
<a id=__codelineno-80-17 name=__codelineno-80-17 href=#__codelineno-80-17></a>        <span class=n>strict</span> <span class=o>=</span> <span class=kc>True</span>  <span class=c1># No permite columnas extra</span>
<a id=__codelineno-80-18 name=__codelineno-80-18 href=#__codelineno-80-18></a>
<a id=__codelineno-80-19 name=__codelineno-80-19 href=#__codelineno-80-19></a>
<a id=__codelineno-80-20 name=__codelineno-80-20 href=#__codelineno-80-20></a><span class=nd>@pa</span><span class=o>.</span><span class=n>check_types</span>
<a id=__codelineno-80-21 name=__codelineno-80-21 href=#__codelineno-80-21></a><span class=k>def</span><span class=w> </span><span class=nf>preprocess</span><span class=p>(</span><span class=n>raw</span><span class=p>:</span> <span class=n>DataFrame</span><span class=p>[</span><span class=n>RawDataSchema</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>DataFrame</span><span class=p>[</span><span class=n>ProcessedDataSchema</span><span class=p>]:</span>
<a id=__codelineno-80-22 name=__codelineno-80-22 href=#__codelineno-80-22></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Pipeline validado: entrada permisiva, salida estricta.&quot;&quot;&quot;</span>
<a id=__codelineno-80-23 name=__codelineno-80-23 href=#__codelineno-80-23></a>    <span class=n>df</span> <span class=o>=</span> <span class=n>raw</span><span class=o>.</span><span class=n>dropna</span><span class=p>()</span>
<a id=__codelineno-80-24 name=__codelineno-80-24 href=#__codelineno-80-24></a>    <span class=n>df</span> <span class=o>=</span> <span class=n>df</span><span class=o>.</span><span class=n>drop</span><span class=p>(</span><span class=n>columns</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;RowNumber&quot;</span><span class=p>,</span> <span class=s2>&quot;CustomerId&quot;</span><span class=p>,</span> <span class=s2>&quot;Surname&quot;</span><span class=p>])</span>
<a id=__codelineno-80-25 name=__codelineno-80-25 href=#__codelineno-80-25></a>    <span class=k>return</span> <span class=n>df</span>
</code></pre></div> <h3 id=mapa-mental-de-conceptos-pandera>ğŸ§  Mapa Mental de Conceptos: Pandera<a class=headerlink href=#mapa-mental-de-conceptos-pandera title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-81-1 name=__codelineno-81-1 href=#__codelineno-81-1></a>                         â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
<a id=__codelineno-81-2 name=__codelineno-81-2 href=#__codelineno-81-2></a>                         â•‘   PANDERA: VALIDACIÃ“N DE DATAFRAMES    â•‘
<a id=__codelineno-81-3 name=__codelineno-81-3 href=#__codelineno-81-3></a>                         â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
<a id=__codelineno-81-4 name=__codelineno-81-4 href=#__codelineno-81-4></a>                                           â”‚
<a id=__codelineno-81-5 name=__codelineno-81-5 href=#__codelineno-81-5></a>           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
<a id=__codelineno-81-6 name=__codelineno-81-6 href=#__codelineno-81-6></a>           â–¼                               â–¼                              â–¼
<a id=__codelineno-81-7 name=__codelineno-81-7 href=#__codelineno-81-7></a> â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
<a id=__codelineno-81-8 name=__codelineno-81-8 href=#__codelineno-81-8></a> â”‚  DataFrameModel  â”‚            â”‚     pa.Field     â”‚           â”‚    Decoradores   â”‚
<a id=__codelineno-81-9 name=__codelineno-81-9 href=#__codelineno-81-9></a> â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
<a id=__codelineno-81-10 name=__codelineno-81-10 href=#__codelineno-81-10></a>        â”‚                               â”‚                              â”‚
<a id=__codelineno-81-11 name=__codelineno-81-11 href=#__codelineno-81-11></a> â”œâ”€ Series[tipo]                 â”œâ”€ ge, le (rangos)            â”œâ”€ @pa.check_types
<a id=__codelineno-81-12 name=__codelineno-81-12 href=#__codelineno-81-12></a> â”œâ”€ Config.strict                â”œâ”€ isin (valores)             â”œâ”€ @pa.check()
<a id=__codelineno-81-13 name=__codelineno-81-13 href=#__codelineno-81-13></a> â”œâ”€ Config.coerce                â”œâ”€ nullable                   â””â”€ SchemaError
<a id=__codelineno-81-14 name=__codelineno-81-14 href=#__codelineno-81-14></a> â””â”€ Herencia de schemas          â””â”€ regex, custom
</code></pre></div> <p><strong>TÃ©rminos clave que debes dominar:</strong></p> <table> <thead> <tr> <th>TÃ©rmino</th> <th>Significado</th> <th>Ejemplo</th> </tr> </thead> <tbody> <tr> <td><strong>DataFrameModel</strong></td> <td>Define estructura esperada del DF</td> <td>Columnas, tipos, restricciones</td> </tr> <tr> <td><strong>Series[type]</strong></td> <td>Tipo de cada columna</td> <td><code>Series[int]</code>, <code>Series[float]</code></td> </tr> <tr> <td><strong>pa.Field</strong></td> <td>Restricciones en columna</td> <td><code>ge=0</code>, <code>le=100</code>, <code>isin=[0,1]</code></td> </tr> <tr> <td><strong>strict=True</strong></td> <td>Rechaza columnas extra</td> <td>Solo las definidas</td> </tr> <tr> <td><strong>coerce=True</strong></td> <td>Convierte tipos automÃ¡ticamente</td> <td><code>"42"</code> â†’ <code>42</code></td> </tr> <tr> <td><strong>@pa.check_types</strong></td> <td>Valida entrada/salida de funciÃ³n</td> <td>Decorador mÃ¡gico</td> </tr> <tr> <td><strong>SchemaError</strong></td> <td>Error cuando datos invÃ¡lidos</td> <td>Mensaje claro</td> </tr> </tbody> </table> <hr> <h3 id=ejercicio-puente-validacion-basica-con-pandera>ï¿½ï¿½ Ejercicio Puente: ValidaciÃ³n BÃ¡sica con Pandera<a class=headerlink href=#ejercicio-puente-validacion-basica-con-pandera title="Permanent link">&para;</a></h3> <blockquote> <p><strong>Meta</strong>: Antes de validar datos ML complejos, practica con schemas simples.</p> </blockquote> <p><strong>Ejercicio 1: Schema bÃ¡sico</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-82-1 name=__codelineno-82-1 href=#__codelineno-82-1></a><span class=kn>import</span><span class=w> </span><span class=nn>pandera</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>pa</span>
<a id=__codelineno-82-2 name=__codelineno-82-2 href=#__codelineno-82-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pandera.typing</span><span class=w> </span><span class=kn>import</span> <span class=n>Series</span>
<a id=__codelineno-82-3 name=__codelineno-82-3 href=#__codelineno-82-3></a>
<a id=__codelineno-82-4 name=__codelineno-82-4 href=#__codelineno-82-4></a><span class=c1># âœ… TU TAREA: Crea un schema &quot;PersonSchema&quot; con:</span>
<a id=__codelineno-82-5 name=__codelineno-82-5 href=#__codelineno-82-5></a><span class=c1># - name: str (no nulo)</span>
<a id=__codelineno-82-6 name=__codelineno-82-6 href=#__codelineno-82-6></a><span class=c1># - age: int (entre 0 y 150)</span>
<a id=__codelineno-82-7 name=__codelineno-82-7 href=#__codelineno-82-7></a><span class=c1># - email: str (debe contener &quot;@&quot;)</span>
<a id=__codelineno-82-8 name=__codelineno-82-8 href=#__codelineno-82-8></a>
<a id=__codelineno-82-9 name=__codelineno-82-9 href=#__codelineno-82-9></a><span class=k>class</span><span class=w> </span><span class=nc>PersonSchema</span><span class=p>(</span><span class=n>pa</span><span class=o>.</span><span class=n>DataFrameModel</span><span class=p>):</span>
<a id=__codelineno-82-10 name=__codelineno-82-10 href=#__codelineno-82-10></a>    <span class=c1># ... tu cÃ³digo aquÃ­</span>
<a id=__codelineno-82-11 name=__codelineno-82-11 href=#__codelineno-82-11></a>    <span class=k>pass</span>
</code></pre></div></p> <p><strong>Ejercicio 2: Schema con validaciÃ³n personalizada</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-83-1 name=__codelineno-83-1 href=#__codelineno-83-1></a><span class=c1># âœ… TU TAREA: Crea un schema &quot;TransactionSchema&quot; con:</span>
<a id=__codelineno-83-2 name=__codelineno-83-2 href=#__codelineno-83-2></a><span class=c1># - amount: float (positivo)</span>
<a id=__codelineno-83-3 name=__codelineno-83-3 href=#__codelineno-83-3></a><span class=c1># - currency: str (solo &quot;USD&quot;, &quot;EUR&quot;, &quot;MXN&quot;)</span>
<a id=__codelineno-83-4 name=__codelineno-83-4 href=#__codelineno-83-4></a><span class=c1># - timestamp: datetime</span>
<a id=__codelineno-83-5 name=__codelineno-83-5 href=#__codelineno-83-5></a>
<a id=__codelineno-83-6 name=__codelineno-83-6 href=#__codelineno-83-6></a><span class=k>class</span><span class=w> </span><span class=nc>TransactionSchema</span><span class=p>(</span><span class=n>pa</span><span class=o>.</span><span class=n>DataFrameModel</span><span class=p>):</span>
<a id=__codelineno-83-7 name=__codelineno-83-7 href=#__codelineno-83-7></a>    <span class=c1># ... tu cÃ³digo aquÃ­</span>
<a id=__codelineno-83-8 name=__codelineno-83-8 href=#__codelineno-83-8></a>    <span class=k>pass</span>
</code></pre></div></p> <p><strong>Ejercicio 3: Usar @pa.check_types</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-84-1 name=__codelineno-84-1 href=#__codelineno-84-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pandera.typing</span><span class=w> </span><span class=kn>import</span> <span class=n>DataFrame</span>
<a id=__codelineno-84-2 name=__codelineno-84-2 href=#__codelineno-84-2></a>
<a id=__codelineno-84-3 name=__codelineno-84-3 href=#__codelineno-84-3></a><span class=c1># âœ… TU TAREA: Decora esta funciÃ³n para validar entrada y salida</span>
<a id=__codelineno-84-4 name=__codelineno-84-4 href=#__codelineno-84-4></a><span class=c1># Entrada: DataFrame[PersonSchema]</span>
<a id=__codelineno-84-5 name=__codelineno-84-5 href=#__codelineno-84-5></a><span class=c1># Salida: DataFrame con personas mayores de 18</span>
<a id=__codelineno-84-6 name=__codelineno-84-6 href=#__codelineno-84-6></a>
<a id=__codelineno-84-7 name=__codelineno-84-7 href=#__codelineno-84-7></a><span class=k>def</span><span class=w> </span><span class=nf>filter_adults</span><span class=p>(</span><span class=n>df</span><span class=p>):</span>
<a id=__codelineno-84-8 name=__codelineno-84-8 href=#__codelineno-84-8></a>    <span class=k>return</span> <span class=n>df</span><span class=p>[</span><span class=n>df</span><span class=p>[</span><span class=s2>&quot;age&quot;</span><span class=p>]</span> <span class=o>&gt;=</span> <span class=mi>18</span><span class=p>]</span>
</code></pre></div></p> <details> <summary>ğŸ” Ver Soluciones</summary> <div class=highlight><pre><span></span><code><a id=__codelineno-85-1 name=__codelineno-85-1 href=#__codelineno-85-1></a><span class=kn>import</span><span class=w> </span><span class=nn>pandera</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>pa</span>
<a id=__codelineno-85-2 name=__codelineno-85-2 href=#__codelineno-85-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pandera.typing</span><span class=w> </span><span class=kn>import</span> <span class=n>Series</span><span class=p>,</span> <span class=n>DataFrame</span>
<a id=__codelineno-85-3 name=__codelineno-85-3 href=#__codelineno-85-3></a><span class=kn>from</span><span class=w> </span><span class=nn>datetime</span><span class=w> </span><span class=kn>import</span> <span class=n>datetime</span>
<a id=__codelineno-85-4 name=__codelineno-85-4 href=#__codelineno-85-4></a>
<a id=__codelineno-85-5 name=__codelineno-85-5 href=#__codelineno-85-5></a><span class=c1># Ejercicio 1</span>
<a id=__codelineno-85-6 name=__codelineno-85-6 href=#__codelineno-85-6></a><span class=k>class</span><span class=w> </span><span class=nc>PersonSchema</span><span class=p>(</span><span class=n>pa</span><span class=o>.</span><span class=n>DataFrameModel</span><span class=p>):</span>
<a id=__codelineno-85-7 name=__codelineno-85-7 href=#__codelineno-85-7></a>    <span class=n>name</span><span class=p>:</span> <span class=n>Series</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=n>pa</span><span class=o>.</span><span class=n>Field</span><span class=p>(</span><span class=n>nullable</span><span class=o>=</span><span class=kc>False</span><span class=p>)</span>
<a id=__codelineno-85-8 name=__codelineno-85-8 href=#__codelineno-85-8></a>    <span class=n>age</span><span class=p>:</span> <span class=n>Series</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=n>pa</span><span class=o>.</span><span class=n>Field</span><span class=p>(</span><span class=n>ge</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>le</span><span class=o>=</span><span class=mi>150</span><span class=p>)</span>
<a id=__codelineno-85-9 name=__codelineno-85-9 href=#__codelineno-85-9></a>    <span class=n>email</span><span class=p>:</span> <span class=n>Series</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=n>pa</span><span class=o>.</span><span class=n>Field</span><span class=p>(</span><span class=n>regex</span><span class=o>=</span><span class=sa>r</span><span class=s2>&quot;.*@.*&quot;</span><span class=p>)</span>
<a id=__codelineno-85-10 name=__codelineno-85-10 href=#__codelineno-85-10></a>
<a id=__codelineno-85-11 name=__codelineno-85-11 href=#__codelineno-85-11></a><span class=c1># Ejercicio 2</span>
<a id=__codelineno-85-12 name=__codelineno-85-12 href=#__codelineno-85-12></a><span class=k>class</span><span class=w> </span><span class=nc>TransactionSchema</span><span class=p>(</span><span class=n>pa</span><span class=o>.</span><span class=n>DataFrameModel</span><span class=p>):</span>
<a id=__codelineno-85-13 name=__codelineno-85-13 href=#__codelineno-85-13></a>    <span class=n>amount</span><span class=p>:</span> <span class=n>Series</span><span class=p>[</span><span class=nb>float</span><span class=p>]</span> <span class=o>=</span> <span class=n>pa</span><span class=o>.</span><span class=n>Field</span><span class=p>(</span><span class=n>gt</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-85-14 name=__codelineno-85-14 href=#__codelineno-85-14></a>    <span class=n>currency</span><span class=p>:</span> <span class=n>Series</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=n>pa</span><span class=o>.</span><span class=n>Field</span><span class=p>(</span><span class=n>isin</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;USD&quot;</span><span class=p>,</span> <span class=s2>&quot;EUR&quot;</span><span class=p>,</span> <span class=s2>&quot;MXN&quot;</span><span class=p>])</span>
<a id=__codelineno-85-15 name=__codelineno-85-15 href=#__codelineno-85-15></a>    <span class=n>timestamp</span><span class=p>:</span> <span class=n>Series</span><span class=p>[</span><span class=n>datetime</span><span class=p>]</span>
<a id=__codelineno-85-16 name=__codelineno-85-16 href=#__codelineno-85-16></a>
<a id=__codelineno-85-17 name=__codelineno-85-17 href=#__codelineno-85-17></a><span class=c1># Ejercicio 3</span>
<a id=__codelineno-85-18 name=__codelineno-85-18 href=#__codelineno-85-18></a><span class=k>class</span><span class=w> </span><span class=nc>AdultSchema</span><span class=p>(</span><span class=n>PersonSchema</span><span class=p>):</span>
<a id=__codelineno-85-19 name=__codelineno-85-19 href=#__codelineno-85-19></a>    <span class=n>age</span><span class=p>:</span> <span class=n>Series</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=n>pa</span><span class=o>.</span><span class=n>Field</span><span class=p>(</span><span class=n>ge</span><span class=o>=</span><span class=mi>18</span><span class=p>,</span> <span class=n>le</span><span class=o>=</span><span class=mi>150</span><span class=p>)</span>
<a id=__codelineno-85-20 name=__codelineno-85-20 href=#__codelineno-85-20></a>
<a id=__codelineno-85-21 name=__codelineno-85-21 href=#__codelineno-85-21></a><span class=nd>@pa</span><span class=o>.</span><span class=n>check_types</span>
<a id=__codelineno-85-22 name=__codelineno-85-22 href=#__codelineno-85-22></a><span class=k>def</span><span class=w> </span><span class=nf>filter_adults</span><span class=p>(</span><span class=n>df</span><span class=p>:</span> <span class=n>DataFrame</span><span class=p>[</span><span class=n>PersonSchema</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>DataFrame</span><span class=p>[</span><span class=n>AdultSchema</span><span class=p>]:</span>
<a id=__codelineno-85-23 name=__codelineno-85-23 href=#__codelineno-85-23></a>    <span class=k>return</span> <span class=n>df</span><span class=p>[</span><span class=n>df</span><span class=p>[</span><span class=s2>&quot;age&quot;</span><span class=p>]</span> <span class=o>&gt;=</span> <span class=mi>18</span><span class=p>]</span>
</code></pre></div> </details> <hr> <h3 id=practica-del-portafolio-pandera-en-bankchurn>ğŸ› ï¸ PrÃ¡ctica del Portafolio: Pandera en BankChurn<a class=headerlink href=#practica-del-portafolio-pandera-en-bankchurn title="Permanent link">&para;</a></h3> <blockquote> <p><strong>Tarea</strong>: Implementar validaciÃ³n de datos con Pandera en BankChurn-Predictor.</p> </blockquote> <p><strong>Paso 1: Identifica los datos que necesitan validaciÃ³n</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-86-1 name=__codelineno-86-1 href=#__codelineno-86-1></a><span class=c1># Revisa las columnas del dataset</span>
<a id=__codelineno-86-2 name=__codelineno-86-2 href=#__codelineno-86-2></a>head<span class=w> </span>-1<span class=w> </span>BankChurn-Predictor/data/raw/Churn_Modelling.csv
</code></pre></div></p> <p><strong>Paso 2: Define schemas para cada etapa (pistas guiadas)</strong></p> <div class=highlight><pre><span></span><code><a id=__codelineno-87-1 name=__codelineno-87-1 href=#__codelineno-87-1></a><span class=c1># src/bankchurn/schemas.py</span>
<a id=__codelineno-87-2 name=__codelineno-87-2 href=#__codelineno-87-2></a>
<a id=__codelineno-87-3 name=__codelineno-87-3 href=#__codelineno-87-3></a><span class=kn>import</span><span class=w> </span><span class=nn>pandera</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>pa</span>
<a id=__codelineno-87-4 name=__codelineno-87-4 href=#__codelineno-87-4></a><span class=kn>from</span><span class=w> </span><span class=nn>pandera.typing</span><span class=w> </span><span class=kn>import</span> <span class=n>Series</span>
<a id=__codelineno-87-5 name=__codelineno-87-5 href=#__codelineno-87-5></a>
<a id=__codelineno-87-6 name=__codelineno-87-6 href=#__codelineno-87-6></a><span class=k>class</span><span class=w> </span><span class=nc>RawChurnSchema</span><span class=p>(</span><span class=n>pa</span><span class=o>.</span><span class=n>DataFrameModel</span><span class=p>):</span>
<a id=__codelineno-87-7 name=__codelineno-87-7 href=#__codelineno-87-7></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Schema permisivo para datos crudos.&quot;&quot;&quot;</span>
<a id=__codelineno-87-8 name=__codelineno-87-8 href=#__codelineno-87-8></a>    <span class=c1># CreditScore: Â¿QuÃ© rango es vÃ¡lido? (FICO: 300-850)</span>
<a id=__codelineno-87-9 name=__codelineno-87-9 href=#__codelineno-87-9></a>    <span class=c1># Age: Â¿Puede ser negativo? Â¿CuÃ¡l es el mÃ¡ximo razonable?</span>
<a id=__codelineno-87-10 name=__codelineno-87-10 href=#__codelineno-87-10></a>    <span class=c1># Balance: Â¿Puede ser negativo?</span>
<a id=__codelineno-87-11 name=__codelineno-87-11 href=#__codelineno-87-11></a>    <span class=c1># Exited: Â¿QuÃ© valores son vÃ¡lidos? (0, 1)</span>
<a id=__codelineno-87-12 name=__codelineno-87-12 href=#__codelineno-87-12></a>
<a id=__codelineno-87-13 name=__codelineno-87-13 href=#__codelineno-87-13></a>    <span class=k>class</span><span class=w> </span><span class=nc>Config</span><span class=p>:</span>
<a id=__codelineno-87-14 name=__codelineno-87-14 href=#__codelineno-87-14></a>        <span class=n>strict</span> <span class=o>=</span> <span class=kc>False</span>  <span class=c1># Â¿Por quÃ© False aquÃ­?</span>
<a id=__codelineno-87-15 name=__codelineno-87-15 href=#__codelineno-87-15></a>
<a id=__codelineno-87-16 name=__codelineno-87-16 href=#__codelineno-87-16></a><span class=k>class</span><span class=w> </span><span class=nc>ProcessedChurnSchema</span><span class=p>(</span><span class=n>pa</span><span class=o>.</span><span class=n>DataFrameModel</span><span class=p>):</span>
<a id=__codelineno-87-17 name=__codelineno-87-17 href=#__codelineno-87-17></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Schema estricto para datos listos para entrenar.&quot;&quot;&quot;</span>
<a id=__codelineno-87-18 name=__codelineno-87-18 href=#__codelineno-87-18></a>    <span class=c1># Mismos campos pero:</span>
<a id=__codelineno-87-19 name=__codelineno-87-19 href=#__codelineno-87-19></a>    <span class=c1># - Sin nullable</span>
<a id=__codelineno-87-20 name=__codelineno-87-20 href=#__codelineno-87-20></a>    <span class=c1># - Rangos mÃ¡s estrictos</span>
<a id=__codelineno-87-21 name=__codelineno-87-21 href=#__codelineno-87-21></a>
<a id=__codelineno-87-22 name=__codelineno-87-22 href=#__codelineno-87-22></a>    <span class=k>class</span><span class=w> </span><span class=nc>Config</span><span class=p>:</span>
<a id=__codelineno-87-23 name=__codelineno-87-23 href=#__codelineno-87-23></a>        <span class=n>strict</span> <span class=o>=</span> <span class=kc>True</span>  <span class=c1># Â¿Por quÃ© True aquÃ­?</span>
</code></pre></div> <p><strong>Paso 3: Aplica validaciÃ³n en el pipeline</strong> <div class=highlight><pre><span></span><code><a id=__codelineno-88-1 name=__codelineno-88-1 href=#__codelineno-88-1></a><span class=nd>@pa</span><span class=o>.</span><span class=n>check_types</span>
<a id=__codelineno-88-2 name=__codelineno-88-2 href=#__codelineno-88-2></a><span class=k>def</span><span class=w> </span><span class=nf>load_and_validate</span><span class=p>(</span><span class=n>path</span><span class=p>:</span> <span class=n>Path</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>DataFrame</span><span class=p>[</span><span class=n>RawChurnSchema</span><span class=p>]:</span>
<a id=__codelineno-88-3 name=__codelineno-88-3 href=#__codelineno-88-3></a>    <span class=c1># Â¿QuÃ© error verÃ¡s si los datos son invÃ¡lidos?</span>
<a id=__codelineno-88-4 name=__codelineno-88-4 href=#__codelineno-88-4></a>    <span class=k>pass</span>
<a id=__codelineno-88-5 name=__codelineno-88-5 href=#__codelineno-88-5></a>
<a id=__codelineno-88-6 name=__codelineno-88-6 href=#__codelineno-88-6></a><span class=nd>@pa</span><span class=o>.</span><span class=n>check_types</span>
<a id=__codelineno-88-7 name=__codelineno-88-7 href=#__codelineno-88-7></a><span class=k>def</span><span class=w> </span><span class=nf>preprocess</span><span class=p>(</span><span class=n>raw</span><span class=p>:</span> <span class=n>DataFrame</span><span class=p>[</span><span class=n>RawChurnSchema</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>DataFrame</span><span class=p>[</span><span class=n>ProcessedChurnSchema</span><span class=p>]:</span>
<a id=__codelineno-88-8 name=__codelineno-88-8 href=#__codelineno-88-8></a>    <span class=c1># Â¿QuÃ© transformaciones necesitas?</span>
<a id=__codelineno-88-9 name=__codelineno-88-9 href=#__codelineno-88-9></a>    <span class=k>pass</span>
</code></pre></div></p> <p><strong>âŒ NO hagas esto:</strong> - Ignorar SchemaError y continuar - Poner restricciones demasiado estrictas en datos crudos - Validar solo en desarrollo, no en producciÃ³n</p> <p><strong>âœ… SÃ haz esto:</strong> - Schema permisivo para entrada, estricto para salida - Documentar cada restricciÃ³n - Incluir validaciÃ³n en tests</p> <hr> <h3 id=checkpoint-de-conocimiento-pandera>âœ… Checkpoint de Conocimiento: Pandera<a class=headerlink href=#checkpoint-de-conocimiento-pandera title="Permanent link">&para;</a></h3> <p><strong>Pregunta 1</strong>: Â¿CuÃ¡l es la ventaja principal de Pandera sobre validar manualmente?</p> <p>A) Es mÃ¡s rÃ¡pido en ejecuciÃ³n<br> B) Los errores aparecen EN LA CARGA, no en sklearn despuÃ©s<br> C) Ocupa menos memoria<br> D) Es requerido por pandas </p> <p><strong>Pregunta 2</strong>: Â¿QuÃ© hace <code>strict=True</code> en Config?</p> <p>A) Hace la validaciÃ³n mÃ¡s lenta pero segura<br> B) Rechaza DataFrames con columnas NO definidas en el schema<br> C) Convierte tipos automÃ¡ticamente<br> D) Requiere que todos los valores sean no nulos </p> <p><strong>Pregunta 3</strong>: Â¿Para quÃ© sirve <code>@pa.check_types</code>?</p> <p>A) Solo documenta los tipos<br> B) Valida entrada Y salida de la funciÃ³n automÃ¡ticamente<br> C) Hace la funciÃ³n mÃ¡s rÃ¡pida<br> D) Solo funciona en clases </p> <p><strong>ğŸ”§ Escenario de Debugging:</strong></p> <div class=highlight><pre><span></span><code><a id=__codelineno-89-1 name=__codelineno-89-1 href=#__codelineno-89-1></a><span class=k>class</span><span class=w> </span><span class=nc>ChurnSchema</span><span class=p>(</span><span class=n>pa</span><span class=o>.</span><span class=n>DataFrameModel</span><span class=p>):</span>
<a id=__codelineno-89-2 name=__codelineno-89-2 href=#__codelineno-89-2></a>    <span class=n>CreditScore</span><span class=p>:</span> <span class=n>Series</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=n>pa</span><span class=o>.</span><span class=n>Field</span><span class=p>(</span><span class=n>ge</span><span class=o>=</span><span class=mi>300</span><span class=p>,</span> <span class=n>le</span><span class=o>=</span><span class=mi>850</span><span class=p>)</span>
<a id=__codelineno-89-3 name=__codelineno-89-3 href=#__codelineno-89-3></a>    <span class=n>Age</span><span class=p>:</span> <span class=n>Series</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=n>pa</span><span class=o>.</span><span class=n>Field</span><span class=p>(</span><span class=n>ge</span><span class=o>=</span><span class=mi>18</span><span class=p>,</span> <span class=n>le</span><span class=o>=</span><span class=mi>100</span><span class=p>)</span>
<a id=__codelineno-89-4 name=__codelineno-89-4 href=#__codelineno-89-4></a>    <span class=n>Exited</span><span class=p>:</span> <span class=n>Series</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=n>pa</span><span class=o>.</span><span class=n>Field</span><span class=p>(</span><span class=n>isin</span><span class=o>=</span><span class=p>[</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>])</span>
<a id=__codelineno-89-5 name=__codelineno-89-5 href=#__codelineno-89-5></a>
<a id=__codelineno-89-6 name=__codelineno-89-6 href=#__codelineno-89-6></a><span class=c1># Cargas datos y obtienes:</span>
<a id=__codelineno-89-7 name=__codelineno-89-7 href=#__codelineno-89-7></a><span class=c1># SchemaError: Column &#39;Age&#39; failed element-wise validator 0:</span>
<a id=__codelineno-89-8 name=__codelineno-89-8 href=#__codelineno-89-8></a><span class=c1>#   &lt;Check greater_than_or_equal_to: greater_than_or_equal_to(18)&gt;</span>
<a id=__codelineno-89-9 name=__codelineno-89-9 href=#__codelineno-89-9></a><span class=c1># failure cases:</span>
<a id=__codelineno-89-10 name=__codelineno-89-10 href=#__codelineno-89-10></a><span class=c1>#      index  Age</span>
<a id=__codelineno-89-11 name=__codelineno-89-11 href=#__codelineno-89-11></a><span class=c1>#   0    127   15</span>
<a id=__codelineno-89-12 name=__codelineno-89-12 href=#__codelineno-89-12></a><span class=c1>#   1    890   17</span>
</code></pre></div> <p><strong>Â¿QuÃ© significa este error y cÃ³mo lo solucionarÃ­as?</strong></p> <details> <summary>ğŸ” Ver Respuestas</summary> **Pregunta 1**: B) Los errores aparecen EN LA CARGA, no en sklearn despuÃ©s. Esto hace debugging mucho mÃ¡s fÃ¡cil. **Pregunta 2**: B) Rechaza DataFrames con columnas NO definidas en el schema. Ãštil para evitar columnas inesperadas. **Pregunta 3**: B) Valida entrada Y salida de la funciÃ³n automÃ¡ticamente. ActÃºa como un contrato. **Escenario de Debugging**: - **Significado**: Hay 2 filas (Ã­ndices 127 y 890) donde Age es menor que 18. - **Opciones de soluciÃ³n**: 1. Si son datos invÃ¡lidos: filtrarlos antes de validar 2. Si son vÃ¡lidos en tu contexto: ajustar el schema `ge=0` 3. Si son errores de captura: revisar la fuente de datos <div class=highlight><pre><span></span><code><a id=__codelineno-90-1 name=__codelineno-90-1 href=#__codelineno-90-1></a><span class=c1># OpciÃ³n 1: Filtrar</span>
<a id=__codelineno-90-2 name=__codelineno-90-2 href=#__codelineno-90-2></a><span class=n>df</span> <span class=o>=</span> <span class=n>df</span><span class=p>[</span><span class=n>df</span><span class=p>[</span><span class=s2>&quot;Age&quot;</span><span class=p>]</span> <span class=o>&gt;=</span> <span class=mi>18</span><span class=p>]</span>
<a id=__codelineno-90-3 name=__codelineno-90-3 href=#__codelineno-90-3></a>
<a id=__codelineno-90-4 name=__codelineno-90-4 href=#__codelineno-90-4></a><span class=c1># OpciÃ³n 2: Ajustar schema</span>
<a id=__codelineno-90-5 name=__codelineno-90-5 href=#__codelineno-90-5></a><span class=n>Age</span><span class=p>:</span> <span class=n>Series</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=n>pa</span><span class=o>.</span><span class=n>Field</span><span class=p>(</span><span class=n>ge</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>le</span><span class=o>=</span><span class=mi>100</span><span class=p>)</span>  <span class=c1># Permitir menores</span>
</code></pre></div> </details> <hr> <p><a id=17-ejercicios-practicos></a></p> <h2 id=17-ejercicios-practicos>1.7 Ejercicios PrÃ¡cticos<a class=headerlink href=#17-ejercicios-practicos title="Permanent link">&para;</a></h2> <h3 id=ejercicio-1-anadir-type-hints>Ejercicio 1: AÃ±adir Type Hints<a class=headerlink href=#ejercicio-1-anadir-type-hints title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-91-1 name=__codelineno-91-1 href=#__codelineno-91-1></a><span class=c1># âŒ CÃ³digo sin tipos (tÃ­pico de notebook)</span>
<a id=__codelineno-91-2 name=__codelineno-91-2 href=#__codelineno-91-2></a><span class=c1># Tu tarea: AÃ±ade type hints completos</span>
<a id=__codelineno-91-3 name=__codelineno-91-3 href=#__codelineno-91-3></a>
<a id=__codelineno-91-4 name=__codelineno-91-4 href=#__codelineno-91-4></a><span class=k>def</span><span class=w> </span><span class=nf>process_training_data</span><span class=p>(</span><span class=n>df</span><span class=p>,</span> <span class=n>config</span><span class=p>):</span>
<a id=__codelineno-91-5 name=__codelineno-91-5 href=#__codelineno-91-5></a>    <span class=n>target</span> <span class=o>=</span> <span class=n>config</span><span class=p>[</span><span class=s2>&quot;target&quot;</span><span class=p>]</span>
<a id=__codelineno-91-6 name=__codelineno-91-6 href=#__codelineno-91-6></a>    <span class=n>features</span> <span class=o>=</span> <span class=n>config</span><span class=p>[</span><span class=s2>&quot;features&quot;</span><span class=p>]</span>
<a id=__codelineno-91-7 name=__codelineno-91-7 href=#__codelineno-91-7></a>
<a id=__codelineno-91-8 name=__codelineno-91-8 href=#__codelineno-91-8></a>    <span class=n>X</span> <span class=o>=</span> <span class=n>df</span><span class=p>[</span><span class=n>features</span><span class=p>]</span>
<a id=__codelineno-91-9 name=__codelineno-91-9 href=#__codelineno-91-9></a>    <span class=n>y</span> <span class=o>=</span> <span class=n>df</span><span class=p>[</span><span class=n>target</span><span class=p>]</span>
<a id=__codelineno-91-10 name=__codelineno-91-10 href=#__codelineno-91-10></a>
<a id=__codelineno-91-11 name=__codelineno-91-11 href=#__codelineno-91-11></a>    <span class=n>X_train</span><span class=p>,</span> <span class=n>X_test</span><span class=p>,</span> <span class=n>y_train</span><span class=p>,</span> <span class=n>y_test</span> <span class=o>=</span> <span class=n>train_test_split</span><span class=p>(</span>
<a id=__codelineno-91-12 name=__codelineno-91-12 href=#__codelineno-91-12></a>        <span class=n>X</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>test_size</span><span class=o>=</span><span class=n>config</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;test_size&quot;</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>)</span>
<a id=__codelineno-91-13 name=__codelineno-91-13 href=#__codelineno-91-13></a>    <span class=p>)</span>
<a id=__codelineno-91-14 name=__codelineno-91-14 href=#__codelineno-91-14></a>
<a id=__codelineno-91-15 name=__codelineno-91-15 href=#__codelineno-91-15></a>    <span class=k>return</span> <span class=n>X_train</span><span class=p>,</span> <span class=n>X_test</span><span class=p>,</span> <span class=n>y_train</span><span class=p>,</span> <span class=n>y_test</span>
<a id=__codelineno-91-16 name=__codelineno-91-16 href=#__codelineno-91-16></a>
<a id=__codelineno-91-17 name=__codelineno-91-17 href=#__codelineno-91-17></a>
<a id=__codelineno-91-18 name=__codelineno-91-18 href=#__codelineno-91-18></a><span class=k>def</span><span class=w> </span><span class=nf>calculate_metrics</span><span class=p>(</span><span class=n>y_true</span><span class=p>,</span> <span class=n>y_pred</span><span class=p>):</span>
<a id=__codelineno-91-19 name=__codelineno-91-19 href=#__codelineno-91-19></a>    <span class=k>return</span> <span class=p>{</span>
<a id=__codelineno-91-20 name=__codelineno-91-20 href=#__codelineno-91-20></a>        <span class=s2>&quot;accuracy&quot;</span><span class=p>:</span> <span class=n>accuracy_score</span><span class=p>(</span><span class=n>y_true</span><span class=p>,</span> <span class=n>y_pred</span><span class=p>),</span>
<a id=__codelineno-91-21 name=__codelineno-91-21 href=#__codelineno-91-21></a>        <span class=s2>&quot;f1&quot;</span><span class=p>:</span> <span class=n>f1_score</span><span class=p>(</span><span class=n>y_true</span><span class=p>,</span> <span class=n>y_pred</span><span class=p>)</span>
<a id=__codelineno-91-22 name=__codelineno-91-22 href=#__codelineno-91-22></a>    <span class=p>}</span>
</code></pre></div> <details> <summary>ğŸ“ Ver SoluciÃ³n</summary> <div class=highlight><pre><span></span><code><a id=__codelineno-92-1 name=__codelineno-92-1 href=#__codelineno-92-1></a><span class=kn>from</span><span class=w> </span><span class=nn>typing</span><span class=w> </span><span class=kn>import</span> <span class=n>Dict</span><span class=p>,</span> <span class=n>List</span><span class=p>,</span> <span class=n>Tuple</span><span class=p>,</span> <span class=n>Any</span>
<a id=__codelineno-92-2 name=__codelineno-92-2 href=#__codelineno-92-2></a><span class=kn>import</span><span class=w> </span><span class=nn>pandas</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>pd</span>
<a id=__codelineno-92-3 name=__codelineno-92-3 href=#__codelineno-92-3></a><span class=kn>from</span><span class=w> </span><span class=nn>sklearn.model_selection</span><span class=w> </span><span class=kn>import</span> <span class=n>train_test_split</span>
<a id=__codelineno-92-4 name=__codelineno-92-4 href=#__codelineno-92-4></a><span class=kn>from</span><span class=w> </span><span class=nn>sklearn.metrics</span><span class=w> </span><span class=kn>import</span> <span class=n>accuracy_score</span><span class=p>,</span> <span class=n>f1_score</span>
<a id=__codelineno-92-5 name=__codelineno-92-5 href=#__codelineno-92-5></a>
<a id=__codelineno-92-6 name=__codelineno-92-6 href=#__codelineno-92-6></a>
<a id=__codelineno-92-7 name=__codelineno-92-7 href=#__codelineno-92-7></a><span class=k>def</span><span class=w> </span><span class=nf>process_training_data</span><span class=p>(</span>
<a id=__codelineno-92-8 name=__codelineno-92-8 href=#__codelineno-92-8></a>    <span class=n>df</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span>
<a id=__codelineno-92-9 name=__codelineno-92-9 href=#__codelineno-92-9></a>    <span class=n>config</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span>
<a id=__codelineno-92-10 name=__codelineno-92-10 href=#__codelineno-92-10></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Tuple</span><span class=p>[</span><span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>,</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>,</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>]:</span>
<a id=__codelineno-92-11 name=__codelineno-92-11 href=#__codelineno-92-11></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Procesa datos para entrenamiento.</span>
<a id=__codelineno-92-12 name=__codelineno-92-12 href=#__codelineno-92-12></a>
<a id=__codelineno-92-13 name=__codelineno-92-13 href=#__codelineno-92-13></a><span class=sd>    Parameters</span>
<a id=__codelineno-92-14 name=__codelineno-92-14 href=#__codelineno-92-14></a><span class=sd>    ----------</span>
<a id=__codelineno-92-15 name=__codelineno-92-15 href=#__codelineno-92-15></a><span class=sd>    df : pd.DataFrame</span>
<a id=__codelineno-92-16 name=__codelineno-92-16 href=#__codelineno-92-16></a><span class=sd>        DataFrame con datos crudos.</span>
<a id=__codelineno-92-17 name=__codelineno-92-17 href=#__codelineno-92-17></a><span class=sd>    config : Dict[str, Any]</span>
<a id=__codelineno-92-18 name=__codelineno-92-18 href=#__codelineno-92-18></a><span class=sd>        ConfiguraciÃ³n con keys: &quot;target&quot;, &quot;features&quot;, &quot;test_size&quot; (opcional).</span>
<a id=__codelineno-92-19 name=__codelineno-92-19 href=#__codelineno-92-19></a>
<a id=__codelineno-92-20 name=__codelineno-92-20 href=#__codelineno-92-20></a><span class=sd>    Returns</span>
<a id=__codelineno-92-21 name=__codelineno-92-21 href=#__codelineno-92-21></a><span class=sd>    -------</span>
<a id=__codelineno-92-22 name=__codelineno-92-22 href=#__codelineno-92-22></a><span class=sd>    Tuple[pd.DataFrame, pd.DataFrame, pd.Series, pd.Series]</span>
<a id=__codelineno-92-23 name=__codelineno-92-23 href=#__codelineno-92-23></a><span class=sd>        X_train, X_test, y_train, y_test</span>
<a id=__codelineno-92-24 name=__codelineno-92-24 href=#__codelineno-92-24></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-92-25 name=__codelineno-92-25 href=#__codelineno-92-25></a>    <span class=n>target</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=n>config</span><span class=p>[</span><span class=s2>&quot;target&quot;</span><span class=p>]</span>
<a id=__codelineno-92-26 name=__codelineno-92-26 href=#__codelineno-92-26></a>    <span class=n>features</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=n>config</span><span class=p>[</span><span class=s2>&quot;features&quot;</span><span class=p>]</span>
<a id=__codelineno-92-27 name=__codelineno-92-27 href=#__codelineno-92-27></a>
<a id=__codelineno-92-28 name=__codelineno-92-28 href=#__codelineno-92-28></a>    <span class=n>X</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span> <span class=o>=</span> <span class=n>df</span><span class=p>[</span><span class=n>features</span><span class=p>]</span>
<a id=__codelineno-92-29 name=__codelineno-92-29 href=#__codelineno-92-29></a>    <span class=n>y</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span> <span class=o>=</span> <span class=n>df</span><span class=p>[</span><span class=n>target</span><span class=p>]</span>
<a id=__codelineno-92-30 name=__codelineno-92-30 href=#__codelineno-92-30></a>
<a id=__codelineno-92-31 name=__codelineno-92-31 href=#__codelineno-92-31></a>    <span class=n>test_size</span><span class=p>:</span> <span class=nb>float</span> <span class=o>=</span> <span class=n>config</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;test_size&quot;</span><span class=p>,</span> <span class=mf>0.2</span><span class=p>)</span>
<a id=__codelineno-92-32 name=__codelineno-92-32 href=#__codelineno-92-32></a>
<a id=__codelineno-92-33 name=__codelineno-92-33 href=#__codelineno-92-33></a>    <span class=n>X_train</span><span class=p>,</span> <span class=n>X_test</span><span class=p>,</span> <span class=n>y_train</span><span class=p>,</span> <span class=n>y_test</span> <span class=o>=</span> <span class=n>train_test_split</span><span class=p>(</span>
<a id=__codelineno-92-34 name=__codelineno-92-34 href=#__codelineno-92-34></a>        <span class=n>X</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>test_size</span><span class=o>=</span><span class=n>test_size</span><span class=p>,</span> <span class=n>random_state</span><span class=o>=</span><span class=mi>42</span>
<a id=__codelineno-92-35 name=__codelineno-92-35 href=#__codelineno-92-35></a>    <span class=p>)</span>
<a id=__codelineno-92-36 name=__codelineno-92-36 href=#__codelineno-92-36></a>
<a id=__codelineno-92-37 name=__codelineno-92-37 href=#__codelineno-92-37></a>    <span class=k>return</span> <span class=n>X_train</span><span class=p>,</span> <span class=n>X_test</span><span class=p>,</span> <span class=n>y_train</span><span class=p>,</span> <span class=n>y_test</span>
<a id=__codelineno-92-38 name=__codelineno-92-38 href=#__codelineno-92-38></a>
<a id=__codelineno-92-39 name=__codelineno-92-39 href=#__codelineno-92-39></a>
<a id=__codelineno-92-40 name=__codelineno-92-40 href=#__codelineno-92-40></a><span class=k>def</span><span class=w> </span><span class=nf>calculate_metrics</span><span class=p>(</span>
<a id=__codelineno-92-41 name=__codelineno-92-41 href=#__codelineno-92-41></a>    <span class=n>y_true</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span><span class=p>,</span>
<a id=__codelineno-92-42 name=__codelineno-92-42 href=#__codelineno-92-42></a>    <span class=n>y_pred</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span>
<a id=__codelineno-92-43 name=__codelineno-92-43 href=#__codelineno-92-43></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>float</span><span class=p>]:</span>
<a id=__codelineno-92-44 name=__codelineno-92-44 href=#__codelineno-92-44></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Calcula mÃ©tricas de clasificaciÃ³n.</span>
<a id=__codelineno-92-45 name=__codelineno-92-45 href=#__codelineno-92-45></a>
<a id=__codelineno-92-46 name=__codelineno-92-46 href=#__codelineno-92-46></a><span class=sd>    Parameters</span>
<a id=__codelineno-92-47 name=__codelineno-92-47 href=#__codelineno-92-47></a><span class=sd>    ----------</span>
<a id=__codelineno-92-48 name=__codelineno-92-48 href=#__codelineno-92-48></a><span class=sd>    y_true : pd.Series</span>
<a id=__codelineno-92-49 name=__codelineno-92-49 href=#__codelineno-92-49></a><span class=sd>        Labels verdaderos.</span>
<a id=__codelineno-92-50 name=__codelineno-92-50 href=#__codelineno-92-50></a><span class=sd>    y_pred : pd.Series</span>
<a id=__codelineno-92-51 name=__codelineno-92-51 href=#__codelineno-92-51></a><span class=sd>        Predicciones del modelo.</span>
<a id=__codelineno-92-52 name=__codelineno-92-52 href=#__codelineno-92-52></a>
<a id=__codelineno-92-53 name=__codelineno-92-53 href=#__codelineno-92-53></a><span class=sd>    Returns</span>
<a id=__codelineno-92-54 name=__codelineno-92-54 href=#__codelineno-92-54></a><span class=sd>    -------</span>
<a id=__codelineno-92-55 name=__codelineno-92-55 href=#__codelineno-92-55></a><span class=sd>    Dict[str, float]</span>
<a id=__codelineno-92-56 name=__codelineno-92-56 href=#__codelineno-92-56></a><span class=sd>        Diccionario con accuracy y f1.</span>
<a id=__codelineno-92-57 name=__codelineno-92-57 href=#__codelineno-92-57></a><span class=sd>    &quot;&quot;&quot;</span>
<a id=__codelineno-92-58 name=__codelineno-92-58 href=#__codelineno-92-58></a>    <span class=k>return</span> <span class=p>{</span>
<a id=__codelineno-92-59 name=__codelineno-92-59 href=#__codelineno-92-59></a>        <span class=s2>&quot;accuracy&quot;</span><span class=p>:</span> <span class=nb>float</span><span class=p>(</span><span class=n>accuracy_score</span><span class=p>(</span><span class=n>y_true</span><span class=p>,</span> <span class=n>y_pred</span><span class=p>)),</span>
<a id=__codelineno-92-60 name=__codelineno-92-60 href=#__codelineno-92-60></a>        <span class=s2>&quot;f1&quot;</span><span class=p>:</span> <span class=nb>float</span><span class=p>(</span><span class=n>f1_score</span><span class=p>(</span><span class=n>y_true</span><span class=p>,</span> <span class=n>y_pred</span><span class=p>))</span>
<a id=__codelineno-92-61 name=__codelineno-92-61 href=#__codelineno-92-61></a>    <span class=p>}</span>
</code></pre></div> </details> <hr> <h3 id=ejercicio-2-crear-config-con-pydantic>Ejercicio 2: Crear Config con Pydantic<a class=headerlink href=#ejercicio-2-crear-config-con-pydantic title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-93-1 name=__codelineno-93-1 href=#__codelineno-93-1></a><span class=c1># Tu tarea: Crea una configuraciÃ³n Pydantic para TelecomAI</span>
<a id=__codelineno-93-2 name=__codelineno-93-2 href=#__codelineno-93-2></a><span class=c1># Requisitos:</span>
<a id=__codelineno-93-3 name=__codelineno-93-3 href=#__codelineno-93-3></a><span class=c1># - project_name: str</span>
<a id=__codelineno-93-4 name=__codelineno-93-4 href=#__codelineno-93-4></a><span class=c1># - random_seed: int (entre 0 y 1000)</span>
<a id=__codelineno-93-5 name=__codelineno-93-5 href=#__codelineno-93-5></a><span class=c1># - test_size: float (entre 0.1 y 0.5)</span>
<a id=__codelineno-93-6 name=__codelineno-93-6 href=#__codelineno-93-6></a><span class=c1># - model_type: solo puede ser &quot;logreg&quot;, &quot;random_forest&quot;, o &quot;gradient_boosting&quot;</span>
<a id=__codelineno-93-7 name=__codelineno-93-7 href=#__codelineno-93-7></a><span class=c1># - features: lista de strings</span>
<a id=__codelineno-93-8 name=__codelineno-93-8 href=#__codelineno-93-8></a><span class=c1># - target: str</span>
<a id=__codelineno-93-9 name=__codelineno-93-9 href=#__codelineno-93-9></a>
<a id=__codelineno-93-10 name=__codelineno-93-10 href=#__codelineno-93-10></a><span class=c1># Escribe tu cÃ³digo aquÃ­:</span>
<a id=__codelineno-93-11 name=__codelineno-93-11 href=#__codelineno-93-11></a><span class=kn>from</span><span class=w> </span><span class=nn>pydantic</span><span class=w> </span><span class=kn>import</span> <span class=n>BaseModel</span><span class=p>,</span> <span class=n>Field</span>
<a id=__codelineno-93-12 name=__codelineno-93-12 href=#__codelineno-93-12></a><span class=kn>from</span><span class=w> </span><span class=nn>typing</span><span class=w> </span><span class=kn>import</span> <span class=n>List</span><span class=p>,</span> <span class=n>Literal</span>
<a id=__codelineno-93-13 name=__codelineno-93-13 href=#__codelineno-93-13></a>
<a id=__codelineno-93-14 name=__codelineno-93-14 href=#__codelineno-93-14></a><span class=k>class</span><span class=w> </span><span class=nc>TelecomConfig</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
<a id=__codelineno-93-15 name=__codelineno-93-15 href=#__codelineno-93-15></a>    <span class=c1># ... tu cÃ³digo</span>
<a id=__codelineno-93-16 name=__codelineno-93-16 href=#__codelineno-93-16></a>    <span class=k>pass</span>
</code></pre></div> <details> <summary>ğŸ“ Ver SoluciÃ³n</summary> <div class=highlight><pre><span></span><code><a id=__codelineno-94-1 name=__codelineno-94-1 href=#__codelineno-94-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pydantic</span><span class=w> </span><span class=kn>import</span> <span class=n>BaseModel</span><span class=p>,</span> <span class=n>Field</span>
<a id=__codelineno-94-2 name=__codelineno-94-2 href=#__codelineno-94-2></a><span class=kn>from</span><span class=w> </span><span class=nn>typing</span><span class=w> </span><span class=kn>import</span> <span class=n>List</span><span class=p>,</span> <span class=n>Literal</span><span class=p>,</span> <span class=n>Optional</span><span class=p>,</span> <span class=n>Dict</span><span class=p>,</span> <span class=n>Any</span>
<a id=__codelineno-94-3 name=__codelineno-94-3 href=#__codelineno-94-3></a><span class=kn>from</span><span class=w> </span><span class=nn>pathlib</span><span class=w> </span><span class=kn>import</span> <span class=n>Path</span>
<a id=__codelineno-94-4 name=__codelineno-94-4 href=#__codelineno-94-4></a><span class=kn>import</span><span class=w> </span><span class=nn>yaml</span>
<a id=__codelineno-94-5 name=__codelineno-94-5 href=#__codelineno-94-5></a>
<a id=__codelineno-94-6 name=__codelineno-94-6 href=#__codelineno-94-6></a>
<a id=__codelineno-94-7 name=__codelineno-94-7 href=#__codelineno-94-7></a><span class=k>class</span><span class=w> </span><span class=nc>TelecomConfig</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
<a id=__codelineno-94-8 name=__codelineno-94-8 href=#__codelineno-94-8></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;ConfiguraciÃ³n para TelecomAI Customer Intelligence.&quot;&quot;&quot;</span>
<a id=__codelineno-94-9 name=__codelineno-94-9 href=#__codelineno-94-9></a>
<a id=__codelineno-94-10 name=__codelineno-94-10 href=#__codelineno-94-10></a>    <span class=n>project_name</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span><span class=o>...</span><span class=p>,</span> <span class=n>min_length</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-94-11 name=__codelineno-94-11 href=#__codelineno-94-11></a>    <span class=n>random_seed</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span><span class=mi>42</span><span class=p>,</span> <span class=n>ge</span><span class=o>=</span><span class=mi>0</span><span class=p>,</span> <span class=n>le</span><span class=o>=</span><span class=mi>1000</span><span class=p>)</span>
<a id=__codelineno-94-12 name=__codelineno-94-12 href=#__codelineno-94-12></a>    <span class=n>test_size</span><span class=p>:</span> <span class=nb>float</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span><span class=mf>0.2</span><span class=p>,</span> <span class=n>ge</span><span class=o>=</span><span class=mf>0.1</span><span class=p>,</span> <span class=n>le</span><span class=o>=</span><span class=mf>0.5</span><span class=p>)</span>
<a id=__codelineno-94-13 name=__codelineno-94-13 href=#__codelineno-94-13></a>    <span class=n>model_type</span><span class=p>:</span> <span class=n>Literal</span><span class=p>[</span><span class=s2>&quot;logreg&quot;</span><span class=p>,</span> <span class=s2>&quot;random_forest&quot;</span><span class=p>,</span> <span class=s2>&quot;gradient_boosting&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;logreg&quot;</span>
<a id=__codelineno-94-14 name=__codelineno-94-14 href=#__codelineno-94-14></a>    <span class=n>features</span><span class=p>:</span> <span class=n>List</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span><span class=o>...</span><span class=p>,</span> <span class=n>min_items</span><span class=o>=</span><span class=mi>1</span><span class=p>)</span>
<a id=__codelineno-94-15 name=__codelineno-94-15 href=#__codelineno-94-15></a>    <span class=n>target</span><span class=p>:</span> <span class=nb>str</span>
<a id=__codelineno-94-16 name=__codelineno-94-16 href=#__codelineno-94-16></a>
<a id=__codelineno-94-17 name=__codelineno-94-17 href=#__codelineno-94-17></a>    <span class=c1># Opcionales</span>
<a id=__codelineno-94-18 name=__codelineno-94-18 href=#__codelineno-94-18></a>    <span class=n>threshold</span><span class=p>:</span> <span class=nb>float</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span><span class=mf>0.5</span><span class=p>,</span> <span class=n>ge</span><span class=o>=</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>le</span><span class=o>=</span><span class=mf>1.0</span><span class=p>)</span>
<a id=__codelineno-94-19 name=__codelineno-94-19 href=#__codelineno-94-19></a>    <span class=n>mlflow_enabled</span><span class=p>:</span> <span class=nb>bool</span> <span class=o>=</span> <span class=kc>True</span>
<a id=__codelineno-94-20 name=__codelineno-94-20 href=#__codelineno-94-20></a>
<a id=__codelineno-94-21 name=__codelineno-94-21 href=#__codelineno-94-21></a>    <span class=nd>@classmethod</span>
<a id=__codelineno-94-22 name=__codelineno-94-22 href=#__codelineno-94-22></a>    <span class=k>def</span><span class=w> </span><span class=nf>from_yaml</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>path</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=n>Path</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=s2>&quot;TelecomConfig&quot;</span><span class=p>:</span>
<a id=__codelineno-94-23 name=__codelineno-94-23 href=#__codelineno-94-23></a>        <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>path</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
<a id=__codelineno-94-24 name=__codelineno-94-24 href=#__codelineno-94-24></a>            <span class=n>data</span> <span class=o>=</span> <span class=n>yaml</span><span class=o>.</span><span class=n>safe_load</span><span class=p>(</span><span class=n>f</span><span class=p>)</span>
<a id=__codelineno-94-25 name=__codelineno-94-25 href=#__codelineno-94-25></a>        <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span><span class=o>**</span><span class=n>data</span><span class=p>)</span>
<a id=__codelineno-94-26 name=__codelineno-94-26 href=#__codelineno-94-26></a>
<a id=__codelineno-94-27 name=__codelineno-94-27 href=#__codelineno-94-27></a>    <span class=k>class</span><span class=w> </span><span class=nc>Config</span><span class=p>:</span>
<a id=__codelineno-94-28 name=__codelineno-94-28 href=#__codelineno-94-28></a>        <span class=n>extra</span> <span class=o>=</span> <span class=s2>&quot;forbid&quot;</span>  <span class=c1># No permite campos extra en el YAML</span>
<a id=__codelineno-94-29 name=__codelineno-94-29 href=#__codelineno-94-29></a>
<a id=__codelineno-94-30 name=__codelineno-94-30 href=#__codelineno-94-30></a>
<a id=__codelineno-94-31 name=__codelineno-94-31 href=#__codelineno-94-31></a><span class=c1># Uso:</span>
<a id=__codelineno-94-32 name=__codelineno-94-32 href=#__codelineno-94-32></a><span class=n>config</span> <span class=o>=</span> <span class=n>TelecomConfig</span><span class=p>(</span>
<a id=__codelineno-94-33 name=__codelineno-94-33 href=#__codelineno-94-33></a>    <span class=n>project_name</span><span class=o>=</span><span class=s2>&quot;TelecomAI&quot;</span><span class=p>,</span>
<a id=__codelineno-94-34 name=__codelineno-94-34 href=#__codelineno-94-34></a>    <span class=n>features</span><span class=o>=</span><span class=p>[</span><span class=s2>&quot;calls&quot;</span><span class=p>,</span> <span class=s2>&quot;minutes&quot;</span><span class=p>,</span> <span class=s2>&quot;messages&quot;</span><span class=p>,</span> <span class=s2>&quot;mb_used&quot;</span><span class=p>],</span>
<a id=__codelineno-94-35 name=__codelineno-94-35 href=#__codelineno-94-35></a>    <span class=n>target</span><span class=o>=</span><span class=s2>&quot;is_ultra&quot;</span>
<a id=__codelineno-94-36 name=__codelineno-94-36 href=#__codelineno-94-36></a><span class=p>)</span>
<a id=__codelineno-94-37 name=__codelineno-94-37 href=#__codelineno-94-37></a>
<a id=__codelineno-94-38 name=__codelineno-94-38 href=#__codelineno-94-38></a><span class=c1># Esto FALLA:</span>
<a id=__codelineno-94-39 name=__codelineno-94-39 href=#__codelineno-94-39></a><span class=c1># config = TelecomConfig(</span>
<a id=__codelineno-94-40 name=__codelineno-94-40 href=#__codelineno-94-40></a><span class=c1>#     project_name=&quot;&quot;,  # Error: min_length=1</span>
<a id=__codelineno-94-41 name=__codelineno-94-41 href=#__codelineno-94-41></a><span class=c1>#     test_size=0.8,    # Error: le=0.5</span>
<a id=__codelineno-94-42 name=__codelineno-94-42 href=#__codelineno-94-42></a><span class=c1>#     model_type=&quot;xgboost&quot;,  # Error: not in Literal</span>
<a id=__codelineno-94-43 name=__codelineno-94-43 href=#__codelineno-94-43></a><span class=c1>#     features=[],      # Error: min_items=1</span>
<a id=__codelineno-94-44 name=__codelineno-94-44 href=#__codelineno-94-44></a><span class=c1># )</span>
</code></pre></div> </details> <hr> <h3 id=ejercicio-3-convertir-a-src-layout>Ejercicio 3: Convertir a src/ Layout<a class=headerlink href=#ejercicio-3-convertir-a-src-layout title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-95-1 name=__codelineno-95-1 href=#__codelineno-95-1></a>Tu tarea: Reorganiza esta estructura plana a src/ layout
<a id=__codelineno-95-2 name=__codelineno-95-2 href=#__codelineno-95-2></a>
<a id=__codelineno-95-3 name=__codelineno-95-3 href=#__codelineno-95-3></a>ANTES:
<a id=__codelineno-95-4 name=__codelineno-95-4 href=#__codelineno-95-4></a>myproject/
<a id=__codelineno-95-5 name=__codelineno-95-5 href=#__codelineno-95-5></a>â”œâ”€â”€ train.py
<a id=__codelineno-95-6 name=__codelineno-95-6 href=#__codelineno-95-6></a>â”œâ”€â”€ predict.py
<a id=__codelineno-95-7 name=__codelineno-95-7 href=#__codelineno-95-7></a>â”œâ”€â”€ utils.py
<a id=__codelineno-95-8 name=__codelineno-95-8 href=#__codelineno-95-8></a>â”œâ”€â”€ config.yaml
<a id=__codelineno-95-9 name=__codelineno-95-9 href=#__codelineno-95-9></a>â”œâ”€â”€ data.csv
<a id=__codelineno-95-10 name=__codelineno-95-10 href=#__codelineno-95-10></a>â””â”€â”€ test_train.py
<a id=__codelineno-95-11 name=__codelineno-95-11 href=#__codelineno-95-11></a>
<a id=__codelineno-95-12 name=__codelineno-95-12 href=#__codelineno-95-12></a>DESPUÃ‰S:
<a id=__codelineno-95-13 name=__codelineno-95-13 href=#__codelineno-95-13></a>myproject/
<a id=__codelineno-95-14 name=__codelineno-95-14 href=#__codelineno-95-14></a>â”œâ”€â”€ src/
<a id=__codelineno-95-15 name=__codelineno-95-15 href=#__codelineno-95-15></a>â”‚   â””â”€â”€ ???
<a id=__codelineno-95-16 name=__codelineno-95-16 href=#__codelineno-95-16></a>â”œâ”€â”€ tests/
<a id=__codelineno-95-17 name=__codelineno-95-17 href=#__codelineno-95-17></a>â”‚   â””â”€â”€ ???
<a id=__codelineno-95-18 name=__codelineno-95-18 href=#__codelineno-95-18></a>â”œâ”€â”€ configs/
<a id=__codelineno-95-19 name=__codelineno-95-19 href=#__codelineno-95-19></a>â”‚   â””â”€â”€ ???
<a id=__codelineno-95-20 name=__codelineno-95-20 href=#__codelineno-95-20></a>â”œâ”€â”€ data/
<a id=__codelineno-95-21 name=__codelineno-95-21 href=#__codelineno-95-21></a>â”‚   â””â”€â”€ ???
<a id=__codelineno-95-22 name=__codelineno-95-22 href=#__codelineno-95-22></a>â””â”€â”€ pyproject.toml
</code></pre></div> <details> <summary>ğŸ“ Ver SoluciÃ³n</summary> <div class=highlight><pre><span></span><code><a id=__codelineno-96-1 name=__codelineno-96-1 href=#__codelineno-96-1></a>myproject/
<a id=__codelineno-96-2 name=__codelineno-96-2 href=#__codelineno-96-2></a>â”œâ”€â”€ src/
<a id=__codelineno-96-3 name=__codelineno-96-3 href=#__codelineno-96-3></a>â”‚   â”œâ”€â”€ __init__.py
<a id=__codelineno-96-4 name=__codelineno-96-4 href=#__codelineno-96-4></a>â”‚   â””â”€â”€ myproject/
<a id=__codelineno-96-5 name=__codelineno-96-5 href=#__codelineno-96-5></a>â”‚       â”œâ”€â”€ __init__.py
<a id=__codelineno-96-6 name=__codelineno-96-6 href=#__codelineno-96-6></a>â”‚       â”œâ”€â”€ training.py      # Antes: train.py
<a id=__codelineno-96-7 name=__codelineno-96-7 href=#__codelineno-96-7></a>â”‚       â”œâ”€â”€ prediction.py    # Antes: predict.py
<a id=__codelineno-96-8 name=__codelineno-96-8 href=#__codelineno-96-8></a>â”‚       â””â”€â”€ utils.py
<a id=__codelineno-96-9 name=__codelineno-96-9 href=#__codelineno-96-9></a>â”œâ”€â”€ tests/
<a id=__codelineno-96-10 name=__codelineno-96-10 href=#__codelineno-96-10></a>â”‚   â”œâ”€â”€ __init__.py
<a id=__codelineno-96-11 name=__codelineno-96-11 href=#__codelineno-96-11></a>â”‚   â”œâ”€â”€ conftest.py          # Fixtures compartidas
<a id=__codelineno-96-12 name=__codelineno-96-12 href=#__codelineno-96-12></a>â”‚   â””â”€â”€ test_training.py     # Antes: test_train.py
<a id=__codelineno-96-13 name=__codelineno-96-13 href=#__codelineno-96-13></a>â”œâ”€â”€ configs/
<a id=__codelineno-96-14 name=__codelineno-96-14 href=#__codelineno-96-14></a>â”‚   â””â”€â”€ config.yaml
<a id=__codelineno-96-15 name=__codelineno-96-15 href=#__codelineno-96-15></a>â”œâ”€â”€ data/
<a id=__codelineno-96-16 name=__codelineno-96-16 href=#__codelineno-96-16></a>â”‚   â””â”€â”€ raw/
<a id=__codelineno-96-17 name=__codelineno-96-17 href=#__codelineno-96-17></a>â”‚       â””â”€â”€ data.csv
<a id=__codelineno-96-18 name=__codelineno-96-18 href=#__codelineno-96-18></a>â”œâ”€â”€ artifacts/               # Para modelos generados
<a id=__codelineno-96-19 name=__codelineno-96-19 href=#__codelineno-96-19></a>â”‚   â””â”€â”€ .gitkeep
<a id=__codelineno-96-20 name=__codelineno-96-20 href=#__codelineno-96-20></a>â”œâ”€â”€ pyproject.toml
<a id=__codelineno-96-21 name=__codelineno-96-21 href=#__codelineno-96-21></a>â”œâ”€â”€ Makefile
<a id=__codelineno-96-22 name=__codelineno-96-22 href=#__codelineno-96-22></a>â””â”€â”€ README.md
</code></pre></div> </details> <hr> <h2 id=errores-habituales-y-como-depurarlos>ğŸ§¨ Errores habituales y cÃ³mo depurarlos<a class=headerlink href=#errores-habituales-y-como-depurarlos title="Permanent link">&para;</a></h2> <p>En este mÃ³dulo suelen aparecer siempre los mismos problemas. La idea no es solo evitarlos, sino <strong>saber reconocerlos rÃ¡pido</strong> en tus propios proyectos.</p> <p>Si alguno de estos errores te tomÃ³ <strong>&gt;15 minutos</strong>, regÃ­stralo en el <strong><a href=../study_tools/DIARIO_ERRORES/ >Diario de Errores</a></strong> y aplica el flujo de <strong>rescate cognitivo</strong> de <strong><a href=../study_tools/PROTOCOLO_E/ >Protocolo E</a></strong>.</p> <h3 id=1-type-hints-mypy-errores-ruidosos-en-pandassklearn>1) Type hints + mypy: errores ruidosos en pandas/sklearn<a class=headerlink href=#1-type-hints-mypy-errores-ruidosos-en-pandassklearn title="Permanent link">&para;</a></h3> <p><strong>SÃ­ntomas tÃ­picos</strong></p> <ul> <li><code>Function is missing a type annotation for parameter 'df'</code></li> <li><code>Incompatible return value type (got "DataFrame", expected "Series")</code></li> <li> <p>Cientos de warnings en librerÃ­as externas (<code>pandas.*</code>, <code>sklearn.*</code>). <strong>Proceso para identificarlos</strong></p> </li> <li> <p>Ejecuta siempre: <div class=highlight><pre><span></span><code><a id=__codelineno-97-1 name=__codelineno-97-1 href=#__codelineno-97-1></a>mypy<span class=w> </span>src/<span class=w>  </span><span class=c1># o mypy src/bankchurn src/carvision src/telecomai</span>
</code></pre></div></p> </li> <li>Localiza primero los errores <strong>en tu cÃ³digo</strong> (archivos dentro de <code>src/</code>), ignora de momento los de librerÃ­as.</li> <li>Si ves muchos errores en <code>site-packages</code> o mÃ³dulos externos, revisa tu secciÃ³n <code>[tool.mypy]</code> del <code>pyproject.toml</code> (ver ejemplo en este mismo mÃ³dulo).</li> </ul> <p><strong>CÃ³mo solucionarlos (patrÃ³n general)</strong></p> <ul> <li>AÃ±ade tipos a <strong>todas las firmas pÃºblicas</strong> (funciones/clases usadas fuera de su archivo).</li> <li>Usa tipos especÃ­ficos para ML:</li> <li><code>pd.DataFrame</code>, <code>pd.Series</code></li> <li><code>NDArray[np.float64]</code></li> <li><code>BaseEstimator</code>, <code>Pipeline</code></li> <li>AÃ­sla tipos muy complejos usando <code>TypedDict</code> o <code>Alias</code>: <div class=highlight><pre><span></span><code><a id=__codelineno-98-1 name=__codelineno-98-1 href=#__codelineno-98-1></a><span class=k>class</span><span class=w> </span><span class=nc>MetricsDict</span><span class=p>(</span><span class=n>TypedDict</span><span class=p>):</span>
<a id=__codelineno-98-2 name=__codelineno-98-2 href=#__codelineno-98-2></a>    <span class=n>accuracy</span><span class=p>:</span> <span class=nb>float</span>
<a id=__codelineno-98-3 name=__codelineno-98-3 href=#__codelineno-98-3></a>    <span class=n>f1</span><span class=p>:</span> <span class=nb>float</span>
<a id=__codelineno-98-4 name=__codelineno-98-4 href=#__codelineno-98-4></a>    <span class=n>roc_auc</span><span class=p>:</span> <span class=nb>float</span>
</code></pre></div></li> <li>Para <strong>reducir ruido de mypy</strong> con librerÃ­as ML:</li> <li>Configura <code>ignore_missing_imports = true</code> y los overrides mostrados en este mÃ³dulo.</li> <li>Re-lanza <code>mypy</code> y verifica que solo quedan errores en tu cÃ³digo.</li> </ul> <blockquote> <p>ğŸ’¡ <strong>Regla prÃ¡ctica</strong>: si mypy empieza a gritar en medio de un refactor, reduce el problema a una funciÃ³n pequeÃ±a, tipa bien esa funciÃ³n, y despuÃ©s propaga los tipos al resto.</p> </blockquote> <hr> <h3 id=2-pydantic-validationerror-por-config-mal-definida>2) Pydantic: <code>ValidationError</code> por config mal definida<a class=headerlink href=#2-pydantic-validationerror-por-config-mal-definida title="Permanent link">&para;</a></h3> <p><strong>SÃ­ntomas tÃ­picos</strong></p> <ul> <li>Al cargar la configuraciÃ³n: <div class=highlight><pre><span></span><code><a id=__codelineno-99-1 name=__codelineno-99-1 href=#__codelineno-99-1></a>pydantic.error_wrappers.ValidationError: 2 validation errors for ModelConfig
<a id=__codelineno-99-2 name=__codelineno-99-2 href=#__codelineno-99-2></a>model -&gt; test_size
<a id=__codelineno-99-3 name=__codelineno-99-3 href=#__codelineno-99-3></a>  ensure this value is less than or equal to 1.0 (type=value_error.number.not_le)
<a id=__codelineno-99-4 name=__codelineno-99-4 href=#__codelineno-99-4></a>model -&gt; cv_folds
<a id=__codelineno-99-5 name=__codelineno-99-5 href=#__codelineno-99-5></a>  ensure this value is greater than or equal to 2 (type=value_error.number.not_ge)
</code></pre></div></li> <li>Tu servicio/API no arranca porque falla la lectura de <code>config.yaml</code>.</li> </ul> <p><strong>Proceso para identificarlos</strong></p> <ul> <li>Localiza <strong>quÃ© modelo Pydantic</strong> estÃ¡ fallando (<code>ModelConfig</code>, <code>BankChurnConfig</code>, <code>TelecomConfig</code>, etc.).</li> <li>Revisa el <code>traceback</code>: casi siempre indica <strong>la ruta completa del campo</strong> (<code>model -&gt; test_size</code>, <code>data -&gt; categorical_features</code>, etc.).</li> <li>Abre el YAML correspondiente (<code>configs/config.yaml</code>) y compara <strong>valor real</strong> vs <strong>restricciÃ³n en <code>Field(...)</code></strong>.</li> </ul> <p><strong>CÃ³mo solucionarlos (patrÃ³n general)</strong></p> <ul> <li>Ajusta el YAML para respetar los rangos:</li> <li><code>test_size</code> entre <code>0.0</code> y <code>1.0</code>.</li> <li><code>cv_folds</code> â‰¥ 2.</li> <li>Literales vÃ¡lidos (<code>voting: "hard" | "soft"</code>, <code>model_type: "logreg" | "random_forest" | ...</code>).</li> <li>Si el error te parece injustificado, revisa la declaraciÃ³n del modelo: <div class=highlight><pre><span></span><code><a id=__codelineno-100-1 name=__codelineno-100-1 href=#__codelineno-100-1></a><span class=n>test_size</span><span class=p>:</span> <span class=nb>float</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span><span class=mf>0.2</span><span class=p>,</span> <span class=n>ge</span><span class=o>=</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>le</span><span class=o>=</span><span class=mf>1.0</span><span class=p>)</span>
</code></pre></div> QuizÃ¡ necesitas permitir un rango distinto en tu contexto.</li> <li>En desarrollo, <strong>falla rÃ¡pido</strong>: no atrapes el <code>ValidationError</code> salvo para mostrar un mensaje mÃ¡s amigable; deja que la app se caiga antes que usar una config corrupta.</li> </ul> <blockquote> <p>ğŸ”§ <strong>Ejercicio mental</strong>: rompe a propÃ³sito tu <code>configs/config.yaml</code> (pon <code>test_size: 1.5</code>) y observa el error. Luego arrÃ©glalo. Hazlo una vez y nunca mÃ¡s te asustarÃ¡ un <code>ValidationError</code> en producciÃ³n.</p> </blockquote> <hr> <h3 id=3-src-layout-e-imports-modulenotfounderror-en-ci-pero-no-en-tu-maquina>3) src/ layout e imports: <code>ModuleNotFoundError</code> en CI pero no en tu mÃ¡quina<a class=headerlink href=#3-src-layout-e-imports-modulenotfounderror-en-ci-pero-no-en-tu-maquina title="Permanent link">&para;</a></h3> <p><strong>SÃ­ntomas tÃ­picos</strong></p> <ul> <li>En local â€œtodo funcionaâ€, pero en GitHub Actions o en otra mÃ¡quina obtienes: <div class=highlight><pre><span></span><code><a id=__codelineno-101-1 name=__codelineno-101-1 href=#__codelineno-101-1></a>ModuleNotFoundError: No module named &#39;bankchurn&#39;
</code></pre></div></li> <li>Los tests solo pasan si ejecutas <code>pytest</code> desde la raÃ­z exacta del proyecto.</li> </ul> <p><strong>Proceso para identificarlos</strong></p> <ul> <li>Revisa la <strong>estructura</strong> de tu proyecto (deberÃ­a parecerse al diagrama de este mÃ³dulo):</li> <li>CÃ³digo dentro de <code>src/&lt;paquete&gt;/</code>.</li> <li>Tests bajo <code>tests/</code> usando imports del paquete, no rutas relativas raras.</li> <li>Verifica tu <code>pyproject.toml</code>:</li> <li><code>[project.name]</code> coincide con el paquete (<code>bankchurn</code>, <code>carvision</code>, <code>telecomai</code>).</li> <li><code>[tool.setuptools.packages.find] where = ["src"]</code>.</li> <li>Comprueba si instalaste en modo editable: <div class=highlight><pre><span></span><code><a id=__codelineno-102-1 name=__codelineno-102-1 href=#__codelineno-102-1></a>pip<span class=w> </span>install<span class=w> </span>-e<span class=w> </span>.
<a id=__codelineno-102-2 name=__codelineno-102-2 href=#__codelineno-102-2></a>python<span class=w> </span>-c<span class=w> </span><span class=s2>&quot;import bankchurn; print(bankchurn.__file__)&quot;</span>
</code></pre></div></li> </ul> <p><strong>CÃ³mo solucionarlos (patrÃ³n general)</strong></p> <ul> <li>Mueve el cÃ³digo de raÃ­z a <code>src/</code> siguiendo el ejemplo de este mÃ³dulo.</li> <li>Cambia imports tipo: <div class=highlight><pre><span></span><code><a id=__codelineno-103-1 name=__codelineno-103-1 href=#__codelineno-103-1></a><span class=c1># âŒ from .training import train_model  (desde scripts sueltos)</span>
<a id=__codelineno-103-2 name=__codelineno-103-2 href=#__codelineno-103-2></a><span class=c1># âœ… from bankchurn.training import train_model</span>
</code></pre></div></li> <li>AsegÃºrate de que los comandos de CI usan instalaciÃ³n editable: <div class=highlight><pre><span></span><code><a id=__codelineno-104-1 name=__codelineno-104-1 href=#__codelineno-104-1></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Install</span>
<a id=__codelineno-104-2 name=__codelineno-104-2 href=#__codelineno-104-2></a><span class=w>  </span><span class=nt>run</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">pip install -e &quot;.[dev]&quot;</span>
</code></pre></div></li> </ul> <blockquote> <p>âš ï¸ <strong>Bandera roja</strong>: si tus tests solo funcionan cuando haces <code>cd src</code> o ajustas manualmente <code>PYTHONPATH</code>, tu layout todavÃ­a no estÃ¡ bien resuelto.</p> </blockquote> <hr> <h3 id=4-patron-general-de-debugging-para-este-modulo>4) PatrÃ³n general de debugging para este mÃ³dulo<a class=headerlink href=#4-patron-general-de-debugging-para-este-modulo title="Permanent link">&para;</a></h3> <ol> <li><strong>Reproduce el error</strong> con un comando simple y determinista:</li> <li><code>mypy src/</code></li> <li><code>python -m src.proyecto.training</code></li> <li><code>pytest -k nombre_test</code>.</li> <li><strong>Lee literalmente</strong> el mensaje de error (campo, valor, restricciÃ³n).</li> <li><strong>Conecta el error con el concepto del mÃ³dulo</strong>:</li> <li>Type hints â†’ firma de funciÃ³n o tipo de retorno.</li> <li>Pydantic â†’ <code>Field(...)</code> y YAML.</li> <li>src/ layout â†’ estructura de carpetas + <code>pyproject.toml</code> + instalaciÃ³n editable.</li> <li><strong>Aplica el patrÃ³n de soluciÃ³n</strong> que viste arriba.</li> </ol> <p>Si automatizas este ciclo en tus tres proyectos del portafolio, tu tiempo de debugging se reduce drÃ¡sticamente y es justo lo que se espera de un perfil Senior/Staff.</p> <hr> <h2 id=checkpoint-completaste-el-modulo>âœ… Checkpoint: Â¿Completaste el MÃ³dulo?<a class=headerlink href=#checkpoint-completaste-el-modulo title="Permanent link">&para;</a></h2> <p>Antes de continuar, verifica:</p> <ul> <li>[ ] Tu cÃ³digo tiene type hints en todas las funciones</li> <li>[ ] Puedes ejecutar <code>mypy src/</code> sin errores crÃ­ticos</li> <li>[ ] Tienes al menos una clase Pydantic para configuraciÃ³n</li> <li>[ ] Tu proyecto tiene estructura src/ layout</li> <li>[ ] Puedes instalar tu paquete con <code>pip install -e .</code></li> </ul> <hr> <h2 id=adr-por-que-estas-decisiones>ğŸ”— ADR: Â¿Por QuÃ© Estas Decisiones?<a class=headerlink href=#adr-por-que-estas-decisiones title="Permanent link">&para;</a></h2> <h3 id=adr-001-type-hints-obligatorios>ADR-001: Type Hints Obligatorios<a class=headerlink href=#adr-001-type-hints-obligatorios title="Permanent link">&para;</a></h3> <p><strong>Contexto</strong>: El cÃ³digo de ML suele ser difÃ­cil de mantener porque las funciones aceptan "cualquier cosa".</p> <p><strong>DecisiÃ³n</strong>: Requerimos type hints en todas las funciones pÃºblicas.</p> <p><strong>Consecuencias</strong>: - âœ… El IDE autocompleta correctamente - âœ… Errores detectados antes de ejecutar - âœ… DocumentaciÃ³n implÃ­cita - âŒ MÃ¡s cÃ³digo que escribir inicialmente - âŒ Curva de aprendizaje para tipos complejos</p> <h3 id=adr-002-pydantic-para-configuracion>ADR-002: Pydantic para ConfiguraciÃ³n<a class=headerlink href=#adr-002-pydantic-para-configuracion title="Permanent link">&para;</a></h3> <p><strong>Contexto</strong>: Configuraciones en diccionarios son propensas a errores.</p> <p><strong>DecisiÃ³n</strong>: Toda configuraciÃ³n pasa por Pydantic.</p> <p><strong>Consecuencias</strong>: - âœ… ValidaciÃ³n automÃ¡tica - âœ… Errores claros - âœ… DocumentaciÃ³n de la config - âŒ Dependencia adicional - âŒ MÃ¡s verboso que un dict simple</p> <h3 id=adr-003-src-layout>ADR-003: src/ Layout<a class=headerlink href=#adr-003-src-layout title="Permanent link">&para;</a></h3> <p><strong>Contexto</strong>: CÃ³digo en raÃ­z causa problemas de importaciÃ³n.</p> <p><strong>DecisiÃ³n</strong>: Todo cÃ³digo en <code>src/&lt;paquete&gt;/</code>.</p> <p><strong>Consecuencias</strong>: - âœ… Importaciones consistentes - âœ… Funciona igual en desarrollo y CI - âœ… EstÃ¡ndar de la industria - âŒ Requiere <code>pip install -e .</code> - âŒ Path mÃ¡s largo para imports</p> <hr> <h2 id=como-se-uso-en-el-portafolio>ğŸ“¦ CÃ³mo se UsÃ³ en el Portafolio<a class=headerlink href=#como-se-uso-en-el-portafolio title="Permanent link">&para;</a></h2> <p>Este mÃ³dulo se aplica <strong>directamente</strong> en los 3 proyectos del portafolio. AquÃ­ estÃ¡n los archivos reales que implementan cada concepto:</p> <h3 id=type-hints-en-el-portafolio>Type Hints en el Portafolio<a class=headerlink href=#type-hints-en-el-portafolio title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-105-1 name=__codelineno-105-1 href=#__codelineno-105-1></a><span class=c1># BankChurn-Predictor/src/bankchurn/config.py (lÃ­neas 89-109)</span>
<a id=__codelineno-105-2 name=__codelineno-105-2 href=#__codelineno-105-2></a><span class=nd>@classmethod</span>
<a id=__codelineno-105-3 name=__codelineno-105-3 href=#__codelineno-105-3></a><span class=k>def</span><span class=w> </span><span class=nf>from_yaml</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>config_path</span><span class=p>:</span> <span class=nb>str</span> <span class=o>|</span> <span class=n>Path</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>BankChurnConfig</span><span class=p>:</span>
<a id=__codelineno-105-4 name=__codelineno-105-4 href=#__codelineno-105-4></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Load configuration from YAML file.</span>
<a id=__codelineno-105-5 name=__codelineno-105-5 href=#__codelineno-105-5></a>
<a id=__codelineno-105-6 name=__codelineno-105-6 href=#__codelineno-105-6></a><span class=sd>    Parameters</span>
<a id=__codelineno-105-7 name=__codelineno-105-7 href=#__codelineno-105-7></a><span class=sd>    ----------</span>
<a id=__codelineno-105-8 name=__codelineno-105-8 href=#__codelineno-105-8></a><span class=sd>    config_path : str or Path</span>
<a id=__codelineno-105-9 name=__codelineno-105-9 href=#__codelineno-105-9></a><span class=sd>        Path to YAML configuration file.</span>
<a id=__codelineno-105-10 name=__codelineno-105-10 href=#__codelineno-105-10></a>
<a id=__codelineno-105-11 name=__codelineno-105-11 href=#__codelineno-105-11></a><span class=sd>    Returns</span>
<a id=__codelineno-105-12 name=__codelineno-105-12 href=#__codelineno-105-12></a><span class=sd>    -------</span>
<a id=__codelineno-105-13 name=__codelineno-105-13 href=#__codelineno-105-13></a><span class=sd>    config : BankChurnConfig</span>
<a id=__codelineno-105-14 name=__codelineno-105-14 href=#__codelineno-105-14></a><span class=sd>        Validated configuration object.</span>
<a id=__codelineno-105-15 name=__codelineno-105-15 href=#__codelineno-105-15></a><span class=sd>    &quot;&quot;&quot;</span>
</code></pre></div> <h3 id=pydantic-en-el-portafolio>Pydantic en el Portafolio<a class=headerlink href=#pydantic-en-el-portafolio title="Permanent link">&para;</a></h3> <p>Cada proyecto tiene su configuraciÃ³n Pydantic:</p> <table> <thead> <tr> <th>Proyecto</th> <th>Archivo</th> <th>Clases principales</th> </tr> </thead> <tbody> <tr> <td>BankChurn</td> <td><code>src/bankchurn/config.py</code></td> <td><code>BankChurnConfig</code>, <code>ModelConfig</code>, <code>DataConfig</code></td> </tr> <tr> <td>CarVision</td> <td><code>src/carvision/config.py</code></td> <td><code>CarVisionConfig</code>, <code>FiltersConfig</code></td> </tr> <tr> <td>TelecomAI</td> <td><code>src/telecomai/config.py</code></td> <td><code>TelecomConfig</code></td> </tr> </tbody> </table> <div class=highlight><pre><span></span><code><a id=__codelineno-106-1 name=__codelineno-106-1 href=#__codelineno-106-1></a><span class=c1># Ejemplo real: BankChurn-Predictor/src/bankchurn/config.py</span>
<a id=__codelineno-106-2 name=__codelineno-106-2 href=#__codelineno-106-2></a><span class=k>class</span><span class=w> </span><span class=nc>ModelConfig</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
<a id=__codelineno-106-3 name=__codelineno-106-3 href=#__codelineno-106-3></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Model training configuration.&quot;&quot;&quot;</span>
<a id=__codelineno-106-4 name=__codelineno-106-4 href=#__codelineno-106-4></a>    <span class=nb>type</span><span class=p>:</span> <span class=nb>str</span> <span class=o>=</span> <span class=s2>&quot;ensemble&quot;</span>
<a id=__codelineno-106-5 name=__codelineno-106-5 href=#__codelineno-106-5></a>    <span class=n>test_size</span><span class=p>:</span> <span class=nb>float</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span><span class=mf>0.2</span><span class=p>,</span> <span class=n>ge</span><span class=o>=</span><span class=mf>0.0</span><span class=p>,</span> <span class=n>le</span><span class=o>=</span><span class=mf>1.0</span><span class=p>)</span>  <span class=c1># â† ValidaciÃ³n automÃ¡tica</span>
<a id=__codelineno-106-6 name=__codelineno-106-6 href=#__codelineno-106-6></a>    <span class=n>random_state</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=mi>42</span>
<a id=__codelineno-106-7 name=__codelineno-106-7 href=#__codelineno-106-7></a>    <span class=n>cv_folds</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span><span class=mi>5</span><span class=p>,</span> <span class=n>ge</span><span class=o>=</span><span class=mi>2</span><span class=p>)</span>  <span class=c1># â† MÃ­nimo 2 folds</span>
</code></pre></div> <h3 id=src-layout-en-el-portafolio>src/ Layout en el Portafolio<a class=headerlink href=#src-layout-en-el-portafolio title="Permanent link">&para;</a></h3> <p>Los 3 proyectos siguen exactamente la estructura descrita:</p> <div class=highlight><pre><span></span><code><a id=__codelineno-107-1 name=__codelineno-107-1 href=#__codelineno-107-1></a>BankChurn-Predictor/
<a id=__codelineno-107-2 name=__codelineno-107-2 href=#__codelineno-107-2></a>â”œâ”€â”€ src/bankchurn/       â† Paquete instalable
<a id=__codelineno-107-3 name=__codelineno-107-3 href=#__codelineno-107-3></a>â”‚   â”œâ”€â”€ __init__.py
<a id=__codelineno-107-4 name=__codelineno-107-4 href=#__codelineno-107-4></a>â”‚   â”œâ”€â”€ config.py        â† Pydantic configs
<a id=__codelineno-107-5 name=__codelineno-107-5 href=#__codelineno-107-5></a>â”‚   â”œâ”€â”€ pipeline.py      â† sklearn Pipeline
<a id=__codelineno-107-6 name=__codelineno-107-6 href=#__codelineno-107-6></a>â”‚   â””â”€â”€ trainer.py       â† Clase de entrenamiento
<a id=__codelineno-107-7 name=__codelineno-107-7 href=#__codelineno-107-7></a>â”œâ”€â”€ pyproject.toml       â† Metadata y dependencias
<a id=__codelineno-107-8 name=__codelineno-107-8 href=#__codelineno-107-8></a>â””â”€â”€ setup.py             â† Fallback para pip install -e .
</code></pre></div> <h3 id=ejercicio-verifica-en-el-repo-real>ğŸ”§ Ejercicio: Verifica en el Repo Real<a class=headerlink href=#ejercicio-verifica-en-el-repo-real title="Permanent link">&para;</a></h3> <div class=highlight><pre><span></span><code><a id=__codelineno-108-1 name=__codelineno-108-1 href=#__codelineno-108-1></a><span class=c1># 1. Ve al proyecto BankChurn</span>
<a id=__codelineno-108-2 name=__codelineno-108-2 href=#__codelineno-108-2></a><span class=nb>cd</span><span class=w> </span>BankChurn-Predictor
<a id=__codelineno-108-3 name=__codelineno-108-3 href=#__codelineno-108-3></a>
<a id=__codelineno-108-4 name=__codelineno-108-4 href=#__codelineno-108-4></a><span class=c1># 2. Instala en modo editable</span>
<a id=__codelineno-108-5 name=__codelineno-108-5 href=#__codelineno-108-5></a>pip<span class=w> </span>install<span class=w> </span>-e<span class=w> </span><span class=s2>&quot;.[dev]&quot;</span>
<a id=__codelineno-108-6 name=__codelineno-108-6 href=#__codelineno-108-6></a>
<a id=__codelineno-108-7 name=__codelineno-108-7 href=#__codelineno-108-7></a><span class=c1># 3. Verifica tipos con mypy</span>
<a id=__codelineno-108-8 name=__codelineno-108-8 href=#__codelineno-108-8></a>mypy<span class=w> </span>src/bankchurn/config.py
<a id=__codelineno-108-9 name=__codelineno-108-9 href=#__codelineno-108-9></a>
<a id=__codelineno-108-10 name=__codelineno-108-10 href=#__codelineno-108-10></a><span class=c1># 4. Prueba que Pydantic valida correctamente</span>
<a id=__codelineno-108-11 name=__codelineno-108-11 href=#__codelineno-108-11></a>python<span class=w> </span>-c<span class=w> </span><span class=s2>&quot;from bankchurn.config import BankChurnConfig; print(BankChurnConfig.from_yaml(&#39;configs/config.yaml&#39;))&quot;</span>
</code></pre></div> <hr> <h2 id=consejos-profesionales>ğŸ’¼ Consejos Profesionales<a class=headerlink href=#consejos-profesionales title="Permanent link">&para;</a></h2> <blockquote> <p><strong>Recomendaciones para destacar en entrevistas y proyectos reales</strong></p> </blockquote> <h3 id=para-entrevistas>Para Entrevistas<a class=headerlink href=#para-entrevistas title="Permanent link">&para;</a></h3> <ol> <li> <p><strong>Domina Type Hints</strong>: Los entrevistadores valoran cÃ³digo tipado. Practica explicar por quÃ© <code>def process(data: pd.DataFrame) -&gt; Dict[str, float]</code> es mejor que <code>def process(data)</code>.</p> </li> <li> <p><strong>Conoce Pydantic vs Dataclasses</strong>: Pregunta comÃºn: "Â¿CuÃ¡ndo usarÃ­as uno u otro?" Respuesta: Pydantic para validaciÃ³n de datos externos (APIs, configs), dataclasses para estructuras internas simples.</p> </li> <li> <p><strong>Demuestra comprensiÃ³n de <code>__init__.py</code></strong>: Explica cÃ³mo controla la API pÃºblica de un paquete y por quÃ© <code>from package import *</code> es peligroso.</p> </li> </ol> <h3 id=para-proyectos-reales>Para Proyectos Reales<a class=headerlink href=#para-proyectos-reales title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>SituaciÃ³n</th> <th>Consejo</th> </tr> </thead> <tbody> <tr> <td>CÃ³digo legacy sin tipos</td> <td>AÃ±ade tipos gradualmente, empezando por funciones pÃºblicas</td> </tr> <tr> <td>ValidaciÃ³n de configs</td> <td>Usa Pydantic con <code>model_validator</code> para validaciones cruzadas</td> </tr> <tr> <td>Logs en producciÃ³n</td> <td>Usa <code>structlog</code> o <code>loguru</code> en lugar de <code>print()</code></td> </tr> <tr> <td>Errores en producciÃ³n</td> <td>Implementa excepciones personalizadas con contexto Ãºtil</td> </tr> </tbody> </table> <h3 id=anti-patrones-a-evitar>Anti-patrones a Evitar<a class=headerlink href=#anti-patrones-a-evitar title="Permanent link">&para;</a></h3> <ul> <li>âŒ <code>from typing import *</code> â€” importa solo lo que necesitas</li> <li>âŒ <code>except Exception:</code> sin logging â€” siempre registra el error</li> <li>âŒ Funciones de mÃ¡s de 50 lÃ­neas â€” refactoriza en funciones mÃ¡s pequeÃ±as</li> <li>âŒ Nombres como <code>data</code>, <code>info</code>, <code>result</code> â€” usa nombres descriptivos</li> </ul> <hr> <h2 id=recursos-externos-del-modulo>ğŸ“º Recursos Externos del MÃ³dulo<a class=headerlink href=#recursos-externos-del-modulo title="Permanent link">&para;</a></h2> <blockquote> <p>ğŸ·ï¸ Sistema: ğŸ”´ Obligatorio | ğŸŸ¡ Recomendado | ğŸŸ¢ Complementario</p> </blockquote> <h3 id=videos>ğŸ¬ Videos<a class=headerlink href=#videos title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th style="text-align: center;">ğŸ·ï¸</th> <th style="text-align: left;">TÃ­tulo</th> <th style="text-align: left;">Canal</th> <th style="text-align: center;">DuraciÃ³n</th> <th style="text-align: left;">Link</th> </tr> </thead> <tbody> <tr> <td style="text-align: center;">ğŸ”´</td> <td style="text-align: left;"><strong>Type Hints in Python</strong></td> <td style="text-align: left;">ArjanCodes</td> <td style="text-align: center;">18 min</td> <td style="text-align: left;"><a href="https://www.youtube.com/watch?v=QORvB-_mbZ0">YouTube</a></td> </tr> <tr> <td style="text-align: center;">ğŸ”´</td> <td style="text-align: left;"><strong>Pydantic V2: The Complete Guide</strong></td> <td style="text-align: left;">ArjanCodes</td> <td style="text-align: center;">25 min</td> <td style="text-align: left;"><a href="https://www.youtube.com/watch?v=502XOB0u8OY">YouTube</a></td> </tr> <tr> <td style="text-align: center;">ğŸŸ¡</td> <td style="text-align: left;"><strong>Python OOP - Classes and Objects</strong></td> <td style="text-align: left;">Corey Schafer</td> <td style="text-align: center;">15 min</td> <td style="text-align: left;"><a href="https://www.youtube.com/watch?v=ZDa-Z5JzLYM">YouTube</a></td> </tr> </tbody> </table> <h3 id=cursos>ğŸ“š Cursos<a class=headerlink href=#cursos title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th style="text-align: center;">ğŸ·ï¸</th> <th style="text-align: left;">TÃ­tulo</th> <th style="text-align: left;">Plataforma</th> <th style="text-align: center;">DuraciÃ³n</th> <th style="text-align: left;">Link</th> </tr> </thead> <tbody> <tr> <td style="text-align: center;">ğŸŸ¢</td> <td style="text-align: left;">Modern Python 3 Bootcamp</td> <td style="text-align: left;">Udemy</td> <td style="text-align: center;">30h</td> <td style="text-align: left;"><a href=https://www.udemy.com/course/the-modern-python3-bootcamp/ >Udemy</a></td> </tr> </tbody> </table> <h3 id=documentacion>ğŸ“„ DocumentaciÃ³n<a class=headerlink href=#documentacion title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th style="text-align: center;">ğŸ·ï¸</th> <th style="text-align: left;">Recurso</th> <th style="text-align: left;">DescripciÃ³n</th> </tr> </thead> <tbody> <tr> <td style="text-align: center;">ğŸ”´</td> <td style="text-align: left;"><a href=https://docs.pydantic.dev/ >Pydantic Docs</a></td> <td style="text-align: left;">DocumentaciÃ³n oficial de Pydantic V2</td> </tr> <tr> <td style="text-align: center;">ğŸŸ¡</td> <td style="text-align: left;"><a href=https://docs.python.org/3/library/typing.html>typing Module</a></td> <td style="text-align: left;">DocumentaciÃ³n de type hints</td> </tr> <tr> <td style="text-align: center;">ğŸŸ¡</td> <td style="text-align: left;"><a href=https://peps.python.org/pep-0484/ >PEP 484</a></td> <td style="text-align: left;">EspecificaciÃ³n de Type Hints</td> </tr> </tbody> </table> <h3 id=cuando-consultar>ğŸ’¡ CuÃ¡ndo Consultar<a class=headerlink href=#cuando-consultar title="Permanent link">&para;</a></h3> <ul> <li><strong>Antes de empezar</strong>: Ve el video de Type Hints si no los usas regularmente</li> <li><strong>Durante el mÃ³dulo</strong>: Consulta Pydantic docs cuando trabajes con <code>config.py</code></li> <li><strong>DespuÃ©s</strong>: El curso complementario si quieres profundizar en POO</li> </ul> <hr> <h2 id=decisiones-tecnicas-adrs>âš–ï¸ Decisiones TÃ©cnicas (ADRs)<a class=headerlink href=#decisiones-tecnicas-adrs title="Permanent link">&para;</a></h2> <h3 id=adr-001-python-311>ADR-001: Python 3.11+<a class=headerlink href=#adr-001-python-311 title="Permanent link">&para;</a></h3> <p><strong>Contexto</strong>: Necesitamos un lenguaje para todo el stack ML.</p> <p><strong>DecisiÃ³n</strong>: Usar Python 3.11+ como lenguaje principal.</p> <p><strong>Alternativas Consideradas</strong>: - <strong>R</strong>: Mejor para estadÃ­stica, peor para APIs y producciÃ³n - <strong>Julia</strong>: MÃ¡s rÃ¡pido, ecosistema menos maduro</p> <p><strong>Consecuencias</strong>: - âœ… Ecosistema ML mÃ¡s completo - âœ… FastAPI, Pydantic nativos - âœ… Mayor pool de talento - âŒ MÃ¡s lento que lenguajes compilados</p> <hr> <h3 id=adr-003-pydantic-v2-para-configuracion>ADR-003: Pydantic v2 para ConfiguraciÃ³n<a class=headerlink href=#adr-003-pydantic-v2-para-configuracion title="Permanent link">&para;</a></h3> <p><strong>Contexto</strong>: Necesitamos validar configuraciÃ³n de forma robusta.</p> <p><strong>DecisiÃ³n</strong>: Usar Pydantic v2 para todas las configuraciones.</p> <p><strong>Alternativas Consideradas</strong>: - <strong>dataclasses</strong>: Sin validaciÃ³n built-in - <strong>attrs</strong>: Menos popular, similar funcionalidad - <strong>Dict/YAML directo</strong>: Sin validaciÃ³n</p> <p><strong>Consecuencias</strong>: - âœ… ValidaciÃ³n automÃ¡tica de tipos - âœ… Errores claros en config invÃ¡lida - âœ… IntegraciÃ³n perfecta con FastAPI - âŒ Dependencia adicional</p> <hr> <h3 id=adr-013-ruff-para-linting>ADR-013: Ruff para Linting<a class=headerlink href=#adr-013-ruff-para-linting title="Permanent link">&para;</a></h3> <p><strong>Contexto</strong>: Necesitamos herramientas de calidad de cÃ³digo rÃ¡pidas.</p> <p><strong>DecisiÃ³n</strong>: Usar Ruff como linter y formateador unificado.</p> <p><strong>Alternativas Consideradas</strong>: - <strong>Flake8 + Black + isort</strong>: MÃºltiples herramientas, mÃ¡s lento - <strong>Pylint</strong>: Muy lento, muchos false positives</p> <p><strong>Consecuencias</strong>: - âœ… 10-100x mÃ¡s rÃ¡pido que alternativas - âœ… Una herramienta = una config - âœ… Compatible con reglas de Flake8 - âŒ Herramienta relativamente nueva</p> <hr> <h2 id=ejercicios-del-modulo>ğŸ”§ Ejercicios del MÃ³dulo<a class=headerlink href=#ejercicios-del-modulo title="Permanent link">&para;</a></h2> <h3 id=ejercicio-11-type-hints>Ejercicio 1.1: Type Hints<a class=headerlink href=#ejercicio-11-type-hints title="Permanent link">&para;</a></h3> <p><strong>Objetivo</strong>: AÃ±adir type hints a funciones existentes. <strong>Dificultad</strong>: â­â­</p> <div class=highlight><pre><span></span><code><a id=__codelineno-109-1 name=__codelineno-109-1 href=#__codelineno-109-1></a><span class=c1># ANTES (sin tipos)</span>
<a id=__codelineno-109-2 name=__codelineno-109-2 href=#__codelineno-109-2></a><span class=k>def</span><span class=w> </span><span class=nf>load_data</span><span class=p>(</span><span class=n>path</span><span class=p>):</span>
<a id=__codelineno-109-3 name=__codelineno-109-3 href=#__codelineno-109-3></a>    <span class=k>return</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
<a id=__codelineno-109-4 name=__codelineno-109-4 href=#__codelineno-109-4></a>
<a id=__codelineno-109-5 name=__codelineno-109-5 href=#__codelineno-109-5></a><span class=k>def</span><span class=w> </span><span class=nf>train_model</span><span class=p>(</span><span class=n>X</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>params</span><span class=p>):</span>
<a id=__codelineno-109-6 name=__codelineno-109-6 href=#__codelineno-109-6></a>    <span class=n>model</span> <span class=o>=</span> <span class=n>RandomForestClassifier</span><span class=p>(</span><span class=o>**</span><span class=n>params</span><span class=p>)</span>
<a id=__codelineno-109-7 name=__codelineno-109-7 href=#__codelineno-109-7></a>    <span class=k>return</span> <span class=n>model</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=n>X</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span>
<a id=__codelineno-109-8 name=__codelineno-109-8 href=#__codelineno-109-8></a>
<a id=__codelineno-109-9 name=__codelineno-109-9 href=#__codelineno-109-9></a><span class=c1># TU TAREA: AÃ±adir type hints completos</span>
<a id=__codelineno-109-10 name=__codelineno-109-10 href=#__codelineno-109-10></a><span class=c1># Hint: usa pd.DataFrame, np.ndarray, dict[str, Any]</span>
</code></pre></div> <details> <summary>ğŸ’¡ Ver soluciÃ³n</summary> <div class=highlight><pre><span></span><code><a id=__codelineno-110-1 name=__codelineno-110-1 href=#__codelineno-110-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pathlib</span><span class=w> </span><span class=kn>import</span> <span class=n>Path</span>
<a id=__codelineno-110-2 name=__codelineno-110-2 href=#__codelineno-110-2></a><span class=kn>from</span><span class=w> </span><span class=nn>typing</span><span class=w> </span><span class=kn>import</span> <span class=n>Any</span>
<a id=__codelineno-110-3 name=__codelineno-110-3 href=#__codelineno-110-3></a><span class=kn>import</span><span class=w> </span><span class=nn>pandas</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>pd</span>
<a id=__codelineno-110-4 name=__codelineno-110-4 href=#__codelineno-110-4></a><span class=kn>import</span><span class=w> </span><span class=nn>numpy</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>np</span>
<a id=__codelineno-110-5 name=__codelineno-110-5 href=#__codelineno-110-5></a><span class=kn>from</span><span class=w> </span><span class=nn>sklearn.ensemble</span><span class=w> </span><span class=kn>import</span> <span class=n>RandomForestClassifier</span>
<a id=__codelineno-110-6 name=__codelineno-110-6 href=#__codelineno-110-6></a>
<a id=__codelineno-110-7 name=__codelineno-110-7 href=#__codelineno-110-7></a><span class=k>def</span><span class=w> </span><span class=nf>load_data</span><span class=p>(</span><span class=n>path</span><span class=p>:</span> <span class=n>Path</span> <span class=o>|</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>:</span>
<a id=__codelineno-110-8 name=__codelineno-110-8 href=#__codelineno-110-8></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Carga datos desde CSV.&quot;&quot;&quot;</span>
<a id=__codelineno-110-9 name=__codelineno-110-9 href=#__codelineno-110-9></a>    <span class=k>return</span> <span class=n>pd</span><span class=o>.</span><span class=n>read_csv</span><span class=p>(</span><span class=n>path</span><span class=p>)</span>
<a id=__codelineno-110-10 name=__codelineno-110-10 href=#__codelineno-110-10></a>
<a id=__codelineno-110-11 name=__codelineno-110-11 href=#__codelineno-110-11></a><span class=k>def</span><span class=w> </span><span class=nf>train_model</span><span class=p>(</span>
<a id=__codelineno-110-12 name=__codelineno-110-12 href=#__codelineno-110-12></a>    <span class=n>X</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span> <span class=o>|</span> <span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>,</span>
<a id=__codelineno-110-13 name=__codelineno-110-13 href=#__codelineno-110-13></a>    <span class=n>y</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>Series</span> <span class=o>|</span> <span class=n>np</span><span class=o>.</span><span class=n>ndarray</span><span class=p>,</span>
<a id=__codelineno-110-14 name=__codelineno-110-14 href=#__codelineno-110-14></a>    <span class=n>params</span><span class=p>:</span> <span class=nb>dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span>
<a id=__codelineno-110-15 name=__codelineno-110-15 href=#__codelineno-110-15></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>RandomForestClassifier</span><span class=p>:</span>
<a id=__codelineno-110-16 name=__codelineno-110-16 href=#__codelineno-110-16></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Entrena modelo con parÃ¡metros dados.&quot;&quot;&quot;</span>
<a id=__codelineno-110-17 name=__codelineno-110-17 href=#__codelineno-110-17></a>    <span class=n>model</span> <span class=o>=</span> <span class=n>RandomForestClassifier</span><span class=p>(</span><span class=o>**</span><span class=n>params</span><span class=p>)</span>
<a id=__codelineno-110-18 name=__codelineno-110-18 href=#__codelineno-110-18></a>    <span class=k>return</span> <span class=n>model</span><span class=o>.</span><span class=n>fit</span><span class=p>(</span><span class=n>X</span><span class=p>,</span> <span class=n>y</span><span class=p>)</span>
</code></pre></div> </details> <hr> <h3 id=ejercicio-12-pydantic-config>Ejercicio 1.2: Pydantic Config<a class=headerlink href=#ejercicio-12-pydantic-config title="Permanent link">&para;</a></h3> <p><strong>Objetivo</strong>: Crear configuraciÃ³n validada con Pydantic. <strong>Dificultad</strong>: â­â­</p> <div class=highlight><pre><span></span><code><a id=__codelineno-111-1 name=__codelineno-111-1 href=#__codelineno-111-1></a><span class=c1># Crear una clase ModelConfig que valide:</span>
<a id=__codelineno-111-2 name=__codelineno-111-2 href=#__codelineno-111-2></a><span class=c1># - n_estimators: int entre 10 y 500</span>
<a id=__codelineno-111-3 name=__codelineno-111-3 href=#__codelineno-111-3></a><span class=c1># - max_depth: int opcional, entre 1 y 50</span>
<a id=__codelineno-111-4 name=__codelineno-111-4 href=#__codelineno-111-4></a><span class=c1># - random_state: int, default 42</span>
<a id=__codelineno-111-5 name=__codelineno-111-5 href=#__codelineno-111-5></a>
<a id=__codelineno-111-6 name=__codelineno-111-6 href=#__codelineno-111-6></a><span class=kn>from</span><span class=w> </span><span class=nn>pydantic</span><span class=w> </span><span class=kn>import</span> <span class=n>BaseModel</span><span class=p>,</span> <span class=n>Field</span>
<a id=__codelineno-111-7 name=__codelineno-111-7 href=#__codelineno-111-7></a>
<a id=__codelineno-111-8 name=__codelineno-111-8 href=#__codelineno-111-8></a><span class=k>class</span><span class=w> </span><span class=nc>ModelConfig</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
<a id=__codelineno-111-9 name=__codelineno-111-9 href=#__codelineno-111-9></a>    <span class=c1># TU CÃ“DIGO AQUÃ</span>
<a id=__codelineno-111-10 name=__codelineno-111-10 href=#__codelineno-111-10></a>    <span class=k>pass</span>
</code></pre></div> <details> <summary>ğŸ’¡ Ver soluciÃ³n</summary> <div class=highlight><pre><span></span><code><a id=__codelineno-112-1 name=__codelineno-112-1 href=#__codelineno-112-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pydantic</span><span class=w> </span><span class=kn>import</span> <span class=n>BaseModel</span><span class=p>,</span> <span class=n>Field</span>
<a id=__codelineno-112-2 name=__codelineno-112-2 href=#__codelineno-112-2></a>
<a id=__codelineno-112-3 name=__codelineno-112-3 href=#__codelineno-112-3></a><span class=k>class</span><span class=w> </span><span class=nc>ModelConfig</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
<a id=__codelineno-112-4 name=__codelineno-112-4 href=#__codelineno-112-4></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;ConfiguraciÃ³n validada para modelo RandomForest.&quot;&quot;&quot;</span>
<a id=__codelineno-112-5 name=__codelineno-112-5 href=#__codelineno-112-5></a>
<a id=__codelineno-112-6 name=__codelineno-112-6 href=#__codelineno-112-6></a>    <span class=n>n_estimators</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span>
<a id=__codelineno-112-7 name=__codelineno-112-7 href=#__codelineno-112-7></a>        <span class=n>default</span><span class=o>=</span><span class=mi>100</span><span class=p>,</span>
<a id=__codelineno-112-8 name=__codelineno-112-8 href=#__codelineno-112-8></a>        <span class=n>ge</span><span class=o>=</span><span class=mi>10</span><span class=p>,</span>
<a id=__codelineno-112-9 name=__codelineno-112-9 href=#__codelineno-112-9></a>        <span class=n>le</span><span class=o>=</span><span class=mi>500</span><span class=p>,</span>
<a id=__codelineno-112-10 name=__codelineno-112-10 href=#__codelineno-112-10></a>        <span class=n>description</span><span class=o>=</span><span class=s2>&quot;NÃºmero de Ã¡rboles en el bosque&quot;</span>
<a id=__codelineno-112-11 name=__codelineno-112-11 href=#__codelineno-112-11></a>    <span class=p>)</span>
<a id=__codelineno-112-12 name=__codelineno-112-12 href=#__codelineno-112-12></a>    <span class=n>max_depth</span><span class=p>:</span> <span class=nb>int</span> <span class=o>|</span> <span class=kc>None</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span>
<a id=__codelineno-112-13 name=__codelineno-112-13 href=#__codelineno-112-13></a>        <span class=n>default</span><span class=o>=</span><span class=kc>None</span><span class=p>,</span>
<a id=__codelineno-112-14 name=__codelineno-112-14 href=#__codelineno-112-14></a>        <span class=n>ge</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span>
<a id=__codelineno-112-15 name=__codelineno-112-15 href=#__codelineno-112-15></a>        <span class=n>le</span><span class=o>=</span><span class=mi>50</span><span class=p>,</span>
<a id=__codelineno-112-16 name=__codelineno-112-16 href=#__codelineno-112-16></a>        <span class=n>description</span><span class=o>=</span><span class=s2>&quot;Profundidad mÃ¡xima de cada Ã¡rbol&quot;</span>
<a id=__codelineno-112-17 name=__codelineno-112-17 href=#__codelineno-112-17></a>    <span class=p>)</span>
<a id=__codelineno-112-18 name=__codelineno-112-18 href=#__codelineno-112-18></a>    <span class=n>random_state</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span>
<a id=__codelineno-112-19 name=__codelineno-112-19 href=#__codelineno-112-19></a>        <span class=n>default</span><span class=o>=</span><span class=mi>42</span><span class=p>,</span>
<a id=__codelineno-112-20 name=__codelineno-112-20 href=#__codelineno-112-20></a>        <span class=n>description</span><span class=o>=</span><span class=s2>&quot;Semilla para reproducibilidad&quot;</span>
<a id=__codelineno-112-21 name=__codelineno-112-21 href=#__codelineno-112-21></a>    <span class=p>)</span>
<a id=__codelineno-112-22 name=__codelineno-112-22 href=#__codelineno-112-22></a>
<a id=__codelineno-112-23 name=__codelineno-112-23 href=#__codelineno-112-23></a><span class=c1># Uso:</span>
<a id=__codelineno-112-24 name=__codelineno-112-24 href=#__codelineno-112-24></a><span class=n>config</span> <span class=o>=</span> <span class=n>ModelConfig</span><span class=p>(</span><span class=n>n_estimators</span><span class=o>=</span><span class=mi>200</span><span class=p>,</span> <span class=n>max_depth</span><span class=o>=</span><span class=mi>10</span><span class=p>)</span>
<a id=__codelineno-112-25 name=__codelineno-112-25 href=#__codelineno-112-25></a><span class=nb>print</span><span class=p>(</span><span class=n>config</span><span class=o>.</span><span class=n>model_dump</span><span class=p>())</span>  <span class=c1># {&#39;n_estimators&#39;: 200, &#39;max_depth&#39;: 10, &#39;random_state&#39;: 42}</span>
<a id=__codelineno-112-26 name=__codelineno-112-26 href=#__codelineno-112-26></a>
<a id=__codelineno-112-27 name=__codelineno-112-27 href=#__codelineno-112-27></a><span class=c1># ValidaciÃ³n automÃ¡tica:</span>
<a id=__codelineno-112-28 name=__codelineno-112-28 href=#__codelineno-112-28></a><span class=c1># ModelConfig(n_estimators=5)  # âŒ ValidationError: ge=10</span>
</code></pre></div> </details> <hr> <h3 id=ejercicio-13-src-layout>Ejercicio 1.3: src/ Layout<a class=headerlink href=#ejercicio-13-src-layout title="Permanent link">&para;</a></h3> <p><strong>Objetivo</strong>: Reorganizar cÃ³digo en estructura profesional. <strong>Dificultad</strong>: â­â­</p> <div class=highlight><pre><span></span><code><a id=__codelineno-113-1 name=__codelineno-113-1 href=#__codelineno-113-1></a># Dado este cÃ³digo en un solo archivo main.py:
<a id=__codelineno-113-2 name=__codelineno-113-2 href=#__codelineno-113-2></a># - load_data()
<a id=__codelineno-113-3 name=__codelineno-113-3 href=#__codelineno-113-3></a># - preprocess()
<a id=__codelineno-113-4 name=__codelineno-113-4 href=#__codelineno-113-4></a># - train()
<a id=__codelineno-113-5 name=__codelineno-113-5 href=#__codelineno-113-5></a># - predict()
<a id=__codelineno-113-6 name=__codelineno-113-6 href=#__codelineno-113-6></a># - FastAPI app
<a id=__codelineno-113-7 name=__codelineno-113-7 href=#__codelineno-113-7></a>
<a id=__codelineno-113-8 name=__codelineno-113-8 href=#__codelineno-113-8></a># TU TAREA: Crear estructura src/ con:
<a id=__codelineno-113-9 name=__codelineno-113-9 href=#__codelineno-113-9></a># src/myproject/data.py
<a id=__codelineno-113-10 name=__codelineno-113-10 href=#__codelineno-113-10></a># src/myproject/training.py
<a id=__codelineno-113-11 name=__codelineno-113-11 href=#__codelineno-113-11></a># src/myproject/prediction.py
<a id=__codelineno-113-12 name=__codelineno-113-12 href=#__codelineno-113-12></a># app/fastapi_app.py
</code></pre></div> <details> <summary>ğŸ’¡ Ver soluciÃ³n</summary> <div class=highlight><pre><span></span><code><a id=__codelineno-114-1 name=__codelineno-114-1 href=#__codelineno-114-1></a>myproject/
<a id=__codelineno-114-2 name=__codelineno-114-2 href=#__codelineno-114-2></a>â”œâ”€â”€ src/
<a id=__codelineno-114-3 name=__codelineno-114-3 href=#__codelineno-114-3></a>â”‚   â””â”€â”€ myproject/
<a id=__codelineno-114-4 name=__codelineno-114-4 href=#__codelineno-114-4></a>â”‚       â”œâ”€â”€ __init__.py
<a id=__codelineno-114-5 name=__codelineno-114-5 href=#__codelineno-114-5></a>â”‚       â”œâ”€â”€ data.py          # load_data()
<a id=__codelineno-114-6 name=__codelineno-114-6 href=#__codelineno-114-6></a>â”‚       â”œâ”€â”€ training.py      # preprocess(), train()
<a id=__codelineno-114-7 name=__codelineno-114-7 href=#__codelineno-114-7></a>â”‚       â””â”€â”€ prediction.py    # predict()
<a id=__codelineno-114-8 name=__codelineno-114-8 href=#__codelineno-114-8></a>â”œâ”€â”€ app/
<a id=__codelineno-114-9 name=__codelineno-114-9 href=#__codelineno-114-9></a>â”‚   â””â”€â”€ fastapi_app.py       # FastAPI app
<a id=__codelineno-114-10 name=__codelineno-114-10 href=#__codelineno-114-10></a>â”œâ”€â”€ tests/
<a id=__codelineno-114-11 name=__codelineno-114-11 href=#__codelineno-114-11></a>â”‚   â””â”€â”€ conftest.py
<a id=__codelineno-114-12 name=__codelineno-114-12 href=#__codelineno-114-12></a>â”œâ”€â”€ pyproject.toml
<a id=__codelineno-114-13 name=__codelineno-114-13 href=#__codelineno-114-13></a>â””â”€â”€ Makefile
</code></pre></div> **pyproject.toml mÃ­nimo:** <div class=highlight><pre><span></span><code><a id=__codelineno-115-1 name=__codelineno-115-1 href=#__codelineno-115-1></a><span class=k>[build-system]</span>
<a id=__codelineno-115-2 name=__codelineno-115-2 href=#__codelineno-115-2></a><span class=n>requires</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;setuptools&gt;=61.0&quot;</span><span class=p>]</span>
<a id=__codelineno-115-3 name=__codelineno-115-3 href=#__codelineno-115-3></a><span class=n>build-backend</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;setuptools.build_meta&quot;</span>
<a id=__codelineno-115-4 name=__codelineno-115-4 href=#__codelineno-115-4></a>
<a id=__codelineno-115-5 name=__codelineno-115-5 href=#__codelineno-115-5></a><span class=k>[project]</span>
<a id=__codelineno-115-6 name=__codelineno-115-6 href=#__codelineno-115-6></a><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;myproject&quot;</span>
<a id=__codelineno-115-7 name=__codelineno-115-7 href=#__codelineno-115-7></a><span class=n>version</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;0.1.0&quot;</span>
<a id=__codelineno-115-8 name=__codelineno-115-8 href=#__codelineno-115-8></a><span class=n>requires-python</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;&gt;=3.10&quot;</span>
<a id=__codelineno-115-9 name=__codelineno-115-9 href=#__codelineno-115-9></a><span class=n>dependencies</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<a id=__codelineno-115-10 name=__codelineno-115-10 href=#__codelineno-115-10></a><span class=w>    </span><span class=s2>&quot;pandas&gt;=2.0&quot;</span><span class=p>,</span>
<a id=__codelineno-115-11 name=__codelineno-115-11 href=#__codelineno-115-11></a><span class=w>    </span><span class=s2>&quot;scikit-learn&gt;=1.3&quot;</span><span class=p>,</span>
<a id=__codelineno-115-12 name=__codelineno-115-12 href=#__codelineno-115-12></a><span class=w>    </span><span class=s2>&quot;fastapi&gt;=0.100&quot;</span><span class=p>,</span>
<a id=__codelineno-115-13 name=__codelineno-115-13 href=#__codelineno-115-13></a><span class=p>]</span>
<a id=__codelineno-115-14 name=__codelineno-115-14 href=#__codelineno-115-14></a>
<a id=__codelineno-115-15 name=__codelineno-115-15 href=#__codelineno-115-15></a><span class=k>[project.optional-dependencies]</span>
<a id=__codelineno-115-16 name=__codelineno-115-16 href=#__codelineno-115-16></a><span class=n>dev</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=s2>&quot;pytest&gt;=7.0&quot;</span><span class=p>,</span><span class=w> </span><span class=s2>&quot;ruff&gt;=0.1&quot;</span><span class=p>]</span>
</code></pre></div> </details> <hr> <h2 id=glosario-del-modulo>ğŸ”— Glosario del MÃ³dulo<a class=headerlink href=#glosario-del-modulo title="Permanent link">&para;</a></h2> <table> <thead> <tr> <th>TÃ©rmino</th> <th>DefiniciÃ³n</th> </tr> </thead> <tbody> <tr> <td><strong>Type Hints</strong></td> <td>Anotaciones de tipos en Python que mejoran legibilidad y permiten verificaciÃ³n estÃ¡tica</td> </tr> <tr> <td><strong>Pydantic</strong></td> <td>LibrerÃ­a para validaciÃ³n de datos usando type hints de Python</td> </tr> <tr> <td><strong>src/ Layout</strong></td> <td>Estructura de proyecto donde el cÃ³digo estÃ¡ en <code>src/nombre_paquete/</code></td> </tr> <tr> <td><strong>Ruff</strong></td> <td>Linter y formateador ultrarrÃ¡pido para Python escrito en Rust</td> </tr> </tbody> </table> <hr> <h2 id=la-trampa-errores-comunes-de-este-modulo>ğŸª¤ La Trampa â€” Errores Comunes de Este MÃ³dulo<a class=headerlink href=#la-trampa-errores-comunes-de-este-modulo title="Permanent link">&para;</a></h2> <h3 id=trampa-1-type-hints-que-no-se-verifican>Trampa 1: Type Hints que no se verifican<a class=headerlink href=#trampa-1-type-hints-que-no-se-verifican title="Permanent link">&para;</a></h3> <p><strong>SÃ­ntoma</strong>: <div class=highlight><pre><span></span><code><a id=__codelineno-116-1 name=__codelineno-116-1 href=#__codelineno-116-1></a><span class=k>def</span><span class=w> </span><span class=nf>train</span><span class=p>(</span><span class=n>data</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Pipeline</span><span class=p>:</span>
<a id=__codelineno-116-2 name=__codelineno-116-2 href=#__codelineno-116-2></a>    <span class=k>return</span> <span class=s2>&quot;esto no es un Pipeline&quot;</span>  <span class=c1># Python no se queja</span>
</code></pre></div></p> <p><strong>Causa raÃ­z</strong>: Python no verifica types en runtime por defecto. Los hints son solo documentaciÃ³n.</p> <p><strong>SoluciÃ³n</strong>: <div class=highlight><pre><span></span><code><a id=__codelineno-117-1 name=__codelineno-117-1 href=#__codelineno-117-1></a><span class=c1># Ejecutar mypy para verificar</span>
<a id=__codelineno-117-2 name=__codelineno-117-2 href=#__codelineno-117-2></a>mypy<span class=w> </span>src/<span class=w> </span>--strict
<a id=__codelineno-117-3 name=__codelineno-117-3 href=#__codelineno-117-3></a>
<a id=__codelineno-117-4 name=__codelineno-117-4 href=#__codelineno-117-4></a><span class=c1># Error: Incompatible return value type (got &quot;str&quot;, expected &quot;Pipeline&quot;)</span>
</code></pre></div></p> <p><strong>PrevenciÃ³n</strong>: <div class=highlight><pre><span></span><code><a id=__codelineno-118-1 name=__codelineno-118-1 href=#__codelineno-118-1></a><span class=c1># .pre-commit-config.yaml</span>
<a id=__codelineno-118-2 name=__codelineno-118-2 href=#__codelineno-118-2></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>repo</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/pre-commit/mirrors-mypy</span>
<a id=__codelineno-118-3 name=__codelineno-118-3 href=#__codelineno-118-3></a><span class=w>  </span><span class=nt>hooks</span><span class=p>:</span>
<a id=__codelineno-118-4 name=__codelineno-118-4 href=#__codelineno-118-4></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">mypy</span>
<a id=__codelineno-118-5 name=__codelineno-118-5 href=#__codelineno-118-5></a><span class=w>      </span><span class=nt>args</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=nv>--strict</span><span class="p p-Indicator">]</span>
</code></pre></div></p> <hr> <h3 id=trampa-2-pydantic-con-valores-mutables-por-defecto>Trampa 2: Pydantic con valores mutables por defecto<a class=headerlink href=#trampa-2-pydantic-con-valores-mutables-por-defecto title="Permanent link">&para;</a></h3> <p><strong>SÃ­ntoma</strong>: <div class=highlight><pre><span></span><code><a id=__codelineno-119-1 name=__codelineno-119-1 href=#__codelineno-119-1></a><span class=k>class</span><span class=w> </span><span class=nc>Config</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
<a id=__codelineno-119-2 name=__codelineno-119-2 href=#__codelineno-119-2></a>    <span class=n>features</span><span class=p>:</span> <span class=nb>list</span> <span class=o>=</span> <span class=p>[]</span>  <span class=c1># âŒ PELIGRO: lista compartida entre instancias</span>
<a id=__codelineno-119-3 name=__codelineno-119-3 href=#__codelineno-119-3></a>
<a id=__codelineno-119-4 name=__codelineno-119-4 href=#__codelineno-119-4></a><span class=n>c1</span> <span class=o>=</span> <span class=n>Config</span><span class=p>()</span>
<a id=__codelineno-119-5 name=__codelineno-119-5 href=#__codelineno-119-5></a><span class=n>c1</span><span class=o>.</span><span class=n>features</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=s2>&quot;age&quot;</span><span class=p>)</span>
<a id=__codelineno-119-6 name=__codelineno-119-6 href=#__codelineno-119-6></a><span class=n>c2</span> <span class=o>=</span> <span class=n>Config</span><span class=p>()</span>
<a id=__codelineno-119-7 name=__codelineno-119-7 href=#__codelineno-119-7></a><span class=nb>print</span><span class=p>(</span><span class=n>c2</span><span class=o>.</span><span class=n>features</span><span class=p>)</span>  <span class=c1># [&quot;age&quot;] â† Â¡Contaminado!</span>
</code></pre></div></p> <p><strong>Causa raÃ­z</strong>: Objetos mutables (listas, dicts) como defaults se comparten.</p> <p><strong>SoluciÃ³n</strong>: <div class=highlight><pre><span></span><code><a id=__codelineno-120-1 name=__codelineno-120-1 href=#__codelineno-120-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pydantic</span><span class=w> </span><span class=kn>import</span> <span class=n>Field</span>
<a id=__codelineno-120-2 name=__codelineno-120-2 href=#__codelineno-120-2></a>
<a id=__codelineno-120-3 name=__codelineno-120-3 href=#__codelineno-120-3></a><span class=k>class</span><span class=w> </span><span class=nc>Config</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
<a id=__codelineno-120-4 name=__codelineno-120-4 href=#__codelineno-120-4></a>    <span class=n>features</span><span class=p>:</span> <span class=nb>list</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span><span class=n>default_factory</span><span class=o>=</span><span class=nb>list</span><span class=p>)</span>  <span class=c1># âœ… Nueva lista cada vez</span>
</code></pre></div></p> <hr> <h3 id=trampa-3-validacion-pydantic-silenciosa-con-coercion>Trampa 3: ValidaciÃ³n Pydantic silenciosa con coerciÃ³n<a class=headerlink href=#trampa-3-validacion-pydantic-silenciosa-con-coercion title="Permanent link">&para;</a></h3> <p><strong>SÃ­ntoma</strong>: <div class=highlight><pre><span></span><code><a id=__codelineno-121-1 name=__codelineno-121-1 href=#__codelineno-121-1></a><span class=k>class</span><span class=w> </span><span class=nc>Config</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
<a id=__codelineno-121-2 name=__codelineno-121-2 href=#__codelineno-121-2></a>    <span class=n>n_estimators</span><span class=p>:</span> <span class=nb>int</span>
<a id=__codelineno-121-3 name=__codelineno-121-3 href=#__codelineno-121-3></a>
<a id=__codelineno-121-4 name=__codelineno-121-4 href=#__codelineno-121-4></a><span class=n>config</span> <span class=o>=</span> <span class=n>Config</span><span class=p>(</span><span class=n>n_estimators</span><span class=o>=</span><span class=s2>&quot;100&quot;</span><span class=p>)</span>  <span class=c1># â† String, no int</span>
<a id=__codelineno-121-5 name=__codelineno-121-5 href=#__codelineno-121-5></a><span class=nb>print</span><span class=p>(</span><span class=n>config</span><span class=o>.</span><span class=n>n_estimators</span><span class=p>)</span>  <span class=c1># 100 (int) â† Pydantic lo convirtiÃ³ silenciosamente</span>
</code></pre></div></p> <p><strong>SoluciÃ³n</strong> (si necesitas validaciÃ³n estricta): <div class=highlight><pre><span></span><code><a id=__codelineno-122-1 name=__codelineno-122-1 href=#__codelineno-122-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pydantic</span><span class=w> </span><span class=kn>import</span> <span class=n>ConfigDict</span>
<a id=__codelineno-122-2 name=__codelineno-122-2 href=#__codelineno-122-2></a>
<a id=__codelineno-122-3 name=__codelineno-122-3 href=#__codelineno-122-3></a><span class=k>class</span><span class=w> </span><span class=nc>Config</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
<a id=__codelineno-122-4 name=__codelineno-122-4 href=#__codelineno-122-4></a>    <span class=n>model_config</span> <span class=o>=</span> <span class=n>ConfigDict</span><span class=p>(</span><span class=n>strict</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>  <span class=c1># â† No coerciÃ³n</span>
<a id=__codelineno-122-5 name=__codelineno-122-5 href=#__codelineno-122-5></a>    <span class=n>n_estimators</span><span class=p>:</span> <span class=nb>int</span>
<a id=__codelineno-122-6 name=__codelineno-122-6 href=#__codelineno-122-6></a>
<a id=__codelineno-122-7 name=__codelineno-122-7 href=#__codelineno-122-7></a><span class=n>Config</span><span class=p>(</span><span class=n>n_estimators</span><span class=o>=</span><span class=s2>&quot;100&quot;</span><span class=p>)</span>  <span class=c1># âŒ ValidationError</span>
</code></pre></div></p> <hr> <h3 id=trampa-4-abc-sin-abstractmethod-no-obliga-implementacion>Trampa 4: ABC sin @abstractmethod no obliga implementaciÃ³n<a class=headerlink href=#trampa-4-abc-sin-abstractmethod-no-obliga-implementacion title="Permanent link">&para;</a></h3> <p><strong>SÃ­ntoma</strong>: <div class=highlight><pre><span></span><code><a id=__codelineno-123-1 name=__codelineno-123-1 href=#__codelineno-123-1></a><span class=kn>from</span><span class=w> </span><span class=nn>abc</span><span class=w> </span><span class=kn>import</span> <span class=n>ABC</span>
<a id=__codelineno-123-2 name=__codelineno-123-2 href=#__codelineno-123-2></a>
<a id=__codelineno-123-3 name=__codelineno-123-3 href=#__codelineno-123-3></a><span class=k>class</span><span class=w> </span><span class=nc>BaseTrainer</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
<a id=__codelineno-123-4 name=__codelineno-123-4 href=#__codelineno-123-4></a>    <span class=k>def</span><span class=w> </span><span class=nf>fit</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>X</span><span class=p>,</span> <span class=n>y</span><span class=p>):</span>  <span class=c1># â† OlvidÃ© @abstractmethod</span>
<a id=__codelineno-123-5 name=__codelineno-123-5 href=#__codelineno-123-5></a>        <span class=k>pass</span>
<a id=__codelineno-123-6 name=__codelineno-123-6 href=#__codelineno-123-6></a>
<a id=__codelineno-123-7 name=__codelineno-123-7 href=#__codelineno-123-7></a><span class=k>class</span><span class=w> </span><span class=nc>ChurnTrainer</span><span class=p>(</span><span class=n>BaseTrainer</span><span class=p>):</span>
<a id=__codelineno-123-8 name=__codelineno-123-8 href=#__codelineno-123-8></a>    <span class=k>pass</span>  <span class=c1># â† No implementÃ© fit, pero Python no se queja</span>
<a id=__codelineno-123-9 name=__codelineno-123-9 href=#__codelineno-123-9></a>
<a id=__codelineno-123-10 name=__codelineno-123-10 href=#__codelineno-123-10></a><span class=n>trainer</span> <span class=o>=</span> <span class=n>ChurnTrainer</span><span class=p>()</span>  <span class=c1># âœ… Funciona (mal)</span>
</code></pre></div></p> <p><strong>SoluciÃ³n</strong>: <div class=highlight><pre><span></span><code><a id=__codelineno-124-1 name=__codelineno-124-1 href=#__codelineno-124-1></a><span class=kn>from</span><span class=w> </span><span class=nn>abc</span><span class=w> </span><span class=kn>import</span> <span class=n>ABC</span><span class=p>,</span> <span class=n>abstractmethod</span>
<a id=__codelineno-124-2 name=__codelineno-124-2 href=#__codelineno-124-2></a>
<a id=__codelineno-124-3 name=__codelineno-124-3 href=#__codelineno-124-3></a><span class=k>class</span><span class=w> </span><span class=nc>BaseTrainer</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
<a id=__codelineno-124-4 name=__codelineno-124-4 href=#__codelineno-124-4></a>    <span class=nd>@abstractmethod</span>  <span class=c1># â† Ahora sÃ­ obliga</span>
<a id=__codelineno-124-5 name=__codelineno-124-5 href=#__codelineno-124-5></a>    <span class=k>def</span><span class=w> </span><span class=nf>fit</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>X</span><span class=p>,</span> <span class=n>y</span><span class=p>):</span>
<a id=__codelineno-124-6 name=__codelineno-124-6 href=#__codelineno-124-6></a>        <span class=k>pass</span>
<a id=__codelineno-124-7 name=__codelineno-124-7 href=#__codelineno-124-7></a>
<a id=__codelineno-124-8 name=__codelineno-124-8 href=#__codelineno-124-8></a><span class=n>trainer</span> <span class=o>=</span> <span class=n>ChurnTrainer</span><span class=p>()</span>  <span class=c1># âŒ TypeError: Can&#39;t instantiate abstract class</span>
</code></pre></div></p> <hr> <h3 id=trampa-5-settingwithcopywarning-ignorada>Trampa 5: SettingWithCopyWarning ignorada<a class=headerlink href=#trampa-5-settingwithcopywarning-ignorada title="Permanent link">&para;</a></h3> <p><strong>SÃ­ntoma</strong>: <div class=highlight><pre><span></span><code><a id=__codelineno-125-1 name=__codelineno-125-1 href=#__codelineno-125-1></a><span class=n>df_filtered</span> <span class=o>=</span> <span class=n>df</span><span class=p>[</span><span class=n>df</span><span class=p>[</span><span class=s2>&quot;age&quot;</span><span class=p>]</span> <span class=o>&gt;</span> <span class=mi>18</span><span class=p>]</span>
<a id=__codelineno-125-2 name=__codelineno-125-2 href=#__codelineno-125-2></a><span class=n>df_filtered</span><span class=p>[</span><span class=s2>&quot;category&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;adult&quot;</span>  <span class=c1># âš ï¸ SettingWithCopyWarning</span>
</code></pre></div></p> <p><strong>SoluciÃ³n</strong>: <div class=highlight><pre><span></span><code><a id=__codelineno-126-1 name=__codelineno-126-1 href=#__codelineno-126-1></a><span class=c1># OpciÃ³n 1: Copia explÃ­cita</span>
<a id=__codelineno-126-2 name=__codelineno-126-2 href=#__codelineno-126-2></a><span class=n>df_filtered</span> <span class=o>=</span> <span class=n>df</span><span class=p>[</span><span class=n>df</span><span class=p>[</span><span class=s2>&quot;age&quot;</span><span class=p>]</span> <span class=o>&gt;</span> <span class=mi>18</span><span class=p>]</span><span class=o>.</span><span class=n>copy</span><span class=p>()</span>
<a id=__codelineno-126-3 name=__codelineno-126-3 href=#__codelineno-126-3></a><span class=n>df_filtered</span><span class=p>[</span><span class=s2>&quot;category&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;adult&quot;</span>  <span class=c1># âœ… Siempre funciona</span>
<a id=__codelineno-126-4 name=__codelineno-126-4 href=#__codelineno-126-4></a>
<a id=__codelineno-126-5 name=__codelineno-126-5 href=#__codelineno-126-5></a><span class=c1># OpciÃ³n 2: .loc para modificar en su lugar</span>
<a id=__codelineno-126-6 name=__codelineno-126-6 href=#__codelineno-126-6></a><span class=n>df</span><span class=o>.</span><span class=n>loc</span><span class=p>[</span><span class=n>df</span><span class=p>[</span><span class=s2>&quot;age&quot;</span><span class=p>]</span> <span class=o>&gt;</span> <span class=mi>18</span><span class=p>,</span> <span class=s2>&quot;category&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=s2>&quot;adult&quot;</span>  <span class=c1># âœ… ModificaciÃ³n directa</span>
</code></pre></div></p> <hr> <h3 id=trampa-6-pandera-schema-muy-permisivo>Trampa 6: Pandera schema muy permisivo<a class=headerlink href=#trampa-6-pandera-schema-muy-permisivo title="Permanent link">&para;</a></h3> <p><strong>SÃ­ntoma</strong>: <div class=highlight><pre><span></span><code><a id=__codelineno-127-1 name=__codelineno-127-1 href=#__codelineno-127-1></a><span class=k>class</span><span class=w> </span><span class=nc>DataSchema</span><span class=p>(</span><span class=n>pa</span><span class=o>.</span><span class=n>DataFrameModel</span><span class=p>):</span>
<a id=__codelineno-127-2 name=__codelineno-127-2 href=#__codelineno-127-2></a>    <span class=n>age</span><span class=p>:</span> <span class=n>Series</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span>
<a id=__codelineno-127-3 name=__codelineno-127-3 href=#__codelineno-127-3></a>    <span class=n>balance</span><span class=p>:</span> <span class=n>Series</span><span class=p>[</span><span class=nb>float</span><span class=p>]</span>
<a id=__codelineno-127-4 name=__codelineno-127-4 href=#__codelineno-127-4></a>    <span class=c1># â† Sin Config.strict, permite columnas extra</span>
<a id=__codelineno-127-5 name=__codelineno-127-5 href=#__codelineno-127-5></a>
<a id=__codelineno-127-6 name=__codelineno-127-6 href=#__codelineno-127-6></a><span class=n>df_with_extra</span> <span class=o>=</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>({</span>
<a id=__codelineno-127-7 name=__codelineno-127-7 href=#__codelineno-127-7></a>    <span class=s2>&quot;age&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mi>25</span><span class=p>],</span> <span class=s2>&quot;balance&quot;</span><span class=p>:</span> <span class=p>[</span><span class=mf>1000.0</span><span class=p>],</span> 
<a id=__codelineno-127-8 name=__codelineno-127-8 href=#__codelineno-127-8></a>    <span class=s2>&quot;malicious_column&quot;</span><span class=p>:</span> <span class=p>[</span><span class=s2>&quot;payload&quot;</span><span class=p>]</span>  <span class=c1># â† Pasa validaciÃ³n</span>
<a id=__codelineno-127-9 name=__codelineno-127-9 href=#__codelineno-127-9></a><span class=p>})</span>
<a id=__codelineno-127-10 name=__codelineno-127-10 href=#__codelineno-127-10></a><span class=n>DataSchema</span><span class=o>.</span><span class=n>validate</span><span class=p>(</span><span class=n>df_with_extra</span><span class=p>)</span>  <span class=c1># âœ… No falla</span>
</code></pre></div></p> <p><strong>SoluciÃ³n</strong>: <div class=highlight><pre><span></span><code><a id=__codelineno-128-1 name=__codelineno-128-1 href=#__codelineno-128-1></a><span class=k>class</span><span class=w> </span><span class=nc>DataSchema</span><span class=p>(</span><span class=n>pa</span><span class=o>.</span><span class=n>DataFrameModel</span><span class=p>):</span>
<a id=__codelineno-128-2 name=__codelineno-128-2 href=#__codelineno-128-2></a>    <span class=n>age</span><span class=p>:</span> <span class=n>Series</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span>
<a id=__codelineno-128-3 name=__codelineno-128-3 href=#__codelineno-128-3></a>    <span class=n>balance</span><span class=p>:</span> <span class=n>Series</span><span class=p>[</span><span class=nb>float</span><span class=p>]</span>
<a id=__codelineno-128-4 name=__codelineno-128-4 href=#__codelineno-128-4></a>
<a id=__codelineno-128-5 name=__codelineno-128-5 href=#__codelineno-128-5></a>    <span class=k>class</span><span class=w> </span><span class=nc>Config</span><span class=p>:</span>
<a id=__codelineno-128-6 name=__codelineno-128-6 href=#__codelineno-128-6></a>        <span class=n>strict</span> <span class=o>=</span> <span class=kc>True</span>  <span class=c1># â† Rechaza columnas extra</span>
</code></pre></div></p> <hr> <h2 id=quiz-del-modulo-semanas-1-3>ğŸ“ Quiz del MÃ³dulo â€” Semanas 1-3<a class=headerlink href=#quiz-del-modulo-semanas-1-3 title="Permanent link">&para;</a></h2> <h3 id=quiz-semana-1-type-hints-pydantic>Quiz Semana 1: Type Hints + Pydantic<a class=headerlink href=#quiz-semana-1-type-hints-pydantic title="Permanent link">&para;</a></h3> <h4 id=pregunta-1-25-pts>Pregunta 1 (25 pts)<a class=headerlink href=#pregunta-1-25-pts title="Permanent link">&para;</a></h4> <p>Â¿CuÃ¡l es la diferencia entre type hints de Python y la validaciÃ³n de Pydantic?</p> <details> <summary>âœ… Respuesta</summary> | Aspecto | Type Hints | Pydantic | |---------|-----------|----------| | **CuÃ¡ndo verifica** | EstÃ¡ticamente (con mypy) | En runtime | | **QuÃ© hace si falla** | mypy reporta error | Lanza ValidationError | | **CoerciÃ³n** | No convierte tipos | Convierte `"123"` â†’ `123` | | **DÃ³nde usar** | Todo el cÃ³digo | Fronteras (APIs, configs) | **Clave**: Type hints son documentaciÃ³n verificable; Pydantic es validaciÃ³n activa. </details> <h4 id=pregunta-2-25-pts>Pregunta 2 (25 pts)<a class=headerlink href=#pregunta-2-25-pts title="Permanent link">&para;</a></h4> <p>Â¿Por quÃ© este cÃ³digo es peligroso?</p> <div class=highlight><pre><span></span><code><a id=__codelineno-129-1 name=__codelineno-129-1 href=#__codelineno-129-1></a><span class=k>class</span><span class=w> </span><span class=nc>Config</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
<a id=__codelineno-129-2 name=__codelineno-129-2 href=#__codelineno-129-2></a>    <span class=n>features</span><span class=p>:</span> <span class=nb>list</span> <span class=o>=</span> <span class=p>[]</span>
</code></pre></div> <details> <summary>âœ… Respuesta</summary> La lista `[]` es mutable y se comparte entre todas las instancias. Usar `Field(default_factory=list)` en su lugar. </details> <h4 id=pregunta-3-25-pts>Pregunta 3 (25 pts)<a class=headerlink href=#pregunta-3-25-pts title="Permanent link">&para;</a></h4> <p>Explica quÃ© hace <code>Field(ge=0, le=100)</code> en Pydantic.</p> <details> <summary>âœ… Respuesta</summary> Define restricciones de validaciÃ³n: - `ge=0`: Greater or Equal â†’ valor â‰¥ 0 - `le=100`: Less or Equal â†’ valor â‰¤ 100 </details> <h4 id=ejercicio-practico-25-pts>ğŸ”§ Ejercicio PrÃ¡ctico (25 pts)<a class=headerlink href=#ejercicio-practico-25-pts title="Permanent link">&para;</a></h4> <p>Crea un schema Pydantic <code>CustomerInput</code> que valide: - <code>age</code>: entero entre 18 y 100 - <code>balance</code>: float â‰¥ 0 - <code>tenure</code>: entero â‰¥ 0 - <code>products</code>: entero entre 1 y 4</p> <details> <summary>âœ… SoluciÃ³n</summary> <div class=highlight><pre><span></span><code><a id=__codelineno-130-1 name=__codelineno-130-1 href=#__codelineno-130-1></a><span class=kn>from</span><span class=w> </span><span class=nn>pydantic</span><span class=w> </span><span class=kn>import</span> <span class=n>BaseModel</span><span class=p>,</span> <span class=n>Field</span>
<a id=__codelineno-130-2 name=__codelineno-130-2 href=#__codelineno-130-2></a>
<a id=__codelineno-130-3 name=__codelineno-130-3 href=#__codelineno-130-3></a><span class=k>class</span><span class=w> </span><span class=nc>CustomerInput</span><span class=p>(</span><span class=n>BaseModel</span><span class=p>):</span>
<a id=__codelineno-130-4 name=__codelineno-130-4 href=#__codelineno-130-4></a>    <span class=n>age</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span><span class=o>...</span><span class=p>,</span> <span class=n>ge</span><span class=o>=</span><span class=mi>18</span><span class=p>,</span> <span class=n>le</span><span class=o>=</span><span class=mi>100</span><span class=p>)</span>
<a id=__codelineno-130-5 name=__codelineno-130-5 href=#__codelineno-130-5></a>    <span class=n>balance</span><span class=p>:</span> <span class=nb>float</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span><span class=o>...</span><span class=p>,</span> <span class=n>ge</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-130-6 name=__codelineno-130-6 href=#__codelineno-130-6></a>    <span class=n>tenure</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span><span class=o>...</span><span class=p>,</span> <span class=n>ge</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-130-7 name=__codelineno-130-7 href=#__codelineno-130-7></a>    <span class=n>products</span><span class=p>:</span> <span class=nb>int</span> <span class=o>=</span> <span class=n>Field</span><span class=p>(</span><span class=o>...</span><span class=p>,</span> <span class=n>ge</span><span class=o>=</span><span class=mi>1</span><span class=p>,</span> <span class=n>le</span><span class=o>=</span><span class=mi>4</span><span class=p>)</span>
</code></pre></div> </details> <hr> <h3 id=quiz-semana-2-oop-y-protocolos>Quiz Semana 2: OOP y Protocolos<a class=headerlink href=#quiz-semana-2-oop-y-protocolos title="Permanent link">&para;</a></h3> <h4 id=pregunta-1-25-pts_1>Pregunta 1 (25 pts)<a class=headerlink href=#pregunta-1-25-pts_1 title="Permanent link">&para;</a></h4> <p>Â¿CuÃ¡l es la diferencia entre ABC y Protocol en Python?</p> <details> <summary>âœ… Respuesta</summary> | Aspecto | ABC | Protocol | |---------|-----|----------| | **Herencia** | Requiere `class X(ABC)` | No requiere herencia | | **VerificaciÃ³n** | Runtime con `isinstance` | EstÃ¡tica con mypy | | **LibrerÃ­as externas** | Deben heredar explÃ­citamente | Cumplen automÃ¡ticamente (duck typing) | </details> <h4 id=pregunta-2-25-pts_1>Pregunta 2 (25 pts)<a class=headerlink href=#pregunta-2-25-pts_1 title="Permanent link">&para;</a></h4> <p>Â¿Para quÃ© sirve <code>@runtime_checkable</code> en un Protocol?</p> <details> <summary>âœ… Respuesta</summary> Permite usar `isinstance()` con el Protocol en runtime: <div class=highlight><pre><span></span><code><a id=__codelineno-131-1 name=__codelineno-131-1 href=#__codelineno-131-1></a><span class=nd>@runtime_checkable</span>
<a id=__codelineno-131-2 name=__codelineno-131-2 href=#__codelineno-131-2></a><span class=k>class</span><span class=w> </span><span class=nc>Predictor</span><span class=p>(</span><span class=n>Protocol</span><span class=p>):</span>
<a id=__codelineno-131-3 name=__codelineno-131-3 href=#__codelineno-131-3></a>    <span class=k>def</span><span class=w> </span><span class=nf>predict</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>X</span><span class=p>):</span> <span class=o>...</span>
<a id=__codelineno-131-4 name=__codelineno-131-4 href=#__codelineno-131-4></a>
<a id=__codelineno-131-5 name=__codelineno-131-5 href=#__codelineno-131-5></a><span class=nb>isinstance</span><span class=p>(</span><span class=n>model</span><span class=p>,</span> <span class=n>Predictor</span><span class=p>)</span>  <span class=c1># âœ… Funciona</span>
</code></pre></div> </details> <h4 id=pregunta-3-25-pts_1>Pregunta 3 (25 pts)<a class=headerlink href=#pregunta-3-25-pts_1 title="Permanent link">&para;</a></h4> <p>Â¿QuÃ© error hay en este cÃ³digo? <div class=highlight><pre><span></span><code><a id=__codelineno-132-1 name=__codelineno-132-1 href=#__codelineno-132-1></a><span class=kn>from</span><span class=w> </span><span class=nn>abc</span><span class=w> </span><span class=kn>import</span> <span class=n>ABC</span>
<a id=__codelineno-132-2 name=__codelineno-132-2 href=#__codelineno-132-2></a><span class=k>class</span><span class=w> </span><span class=nc>BaseTrainer</span><span class=p>(</span><span class=n>ABC</span><span class=p>):</span>
<a id=__codelineno-132-3 name=__codelineno-132-3 href=#__codelineno-132-3></a>    <span class=k>def</span><span class=w> </span><span class=nf>fit</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>X</span><span class=p>,</span> <span class=n>y</span><span class=p>):</span> <span class=k>pass</span>
</code></pre></div></p> <details> <summary>âœ… Respuesta</summary> Falta `@abstractmethod`. Sin Ã©l, los mÃ©todos son concretos y heredables, no obliga implementaciÃ³n. </details> <h4 id=ejercicio-practico-25-pts_1>ğŸ”§ Ejercicio PrÃ¡ctico (25 pts)<a class=headerlink href=#ejercicio-practico-25-pts_1 title="Permanent link">&para;</a></h4> <p>Crea un Protocol <code>DataLoader</code> con mÃ©todos <code>load(path: str) -&gt; pd.DataFrame</code> y <code>validate(df: pd.DataFrame) -&gt; bool</code>.</p> <details> <summary>âœ… SoluciÃ³n</summary> <div class=highlight><pre><span></span><code><a id=__codelineno-133-1 name=__codelineno-133-1 href=#__codelineno-133-1></a><span class=kn>from</span><span class=w> </span><span class=nn>typing</span><span class=w> </span><span class=kn>import</span> <span class=n>Protocol</span><span class=p>,</span> <span class=n>runtime_checkable</span>
<a id=__codelineno-133-2 name=__codelineno-133-2 href=#__codelineno-133-2></a><span class=kn>import</span><span class=w> </span><span class=nn>pandas</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>pd</span>
<a id=__codelineno-133-3 name=__codelineno-133-3 href=#__codelineno-133-3></a>
<a id=__codelineno-133-4 name=__codelineno-133-4 href=#__codelineno-133-4></a><span class=nd>@runtime_checkable</span>
<a id=__codelineno-133-5 name=__codelineno-133-5 href=#__codelineno-133-5></a><span class=k>class</span><span class=w> </span><span class=nc>DataLoader</span><span class=p>(</span><span class=n>Protocol</span><span class=p>):</span>
<a id=__codelineno-133-6 name=__codelineno-133-6 href=#__codelineno-133-6></a>    <span class=k>def</span><span class=w> </span><span class=nf>load</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>path</span><span class=p>:</span> <span class=nb>str</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>:</span> <span class=o>...</span>
<a id=__codelineno-133-7 name=__codelineno-133-7 href=#__codelineno-133-7></a>    <span class=k>def</span><span class=w> </span><span class=nf>validate</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>df</span><span class=p>:</span> <span class=n>pd</span><span class=o>.</span><span class=n>DataFrame</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=nb>bool</span><span class=p>:</span> <span class=o>...</span>
</code></pre></div> </details> <hr> <h3 id=quiz-semana-3-pandas-de-produccion-pandera>Quiz Semana 3: Pandas de ProducciÃ³n + Pandera<a class=headerlink href=#quiz-semana-3-pandas-de-produccion-pandera title="Permanent link">&para;</a></h3> <h4 id=pregunta-1-25-pts_2>Pregunta 1 (25 pts)<a class=headerlink href=#pregunta-1-25-pts_2 title="Permanent link">&para;</a></h4> <p>Â¿QuÃ© causa <code>SettingWithCopyWarning</code> y cÃ³mo se evita?</p> <details> <summary>âœ… Respuesta</summary> **Causa**: Modificar un slice que puede ser vista o copia. **SoluciÃ³n**: Usar `.copy()` explÃ­cito o `.loc` para asignar. </details> <h4 id=pregunta-2-25-pts_2>Pregunta 2 (25 pts)<a class=headerlink href=#pregunta-2-25-pts_2 title="Permanent link">&para;</a></h4> <p>Â¿CuÃ¡l es la diferencia entre <code>strict=True</code> y <code>strict=False</code> en Pandera?</p> <details> <summary>âœ… Respuesta</summary> - `strict=False` (default): Permite columnas adicionales no definidas - `strict=True`: Rechaza cualquier columna no definida en el schema </details> <h4 id=pregunta-3-25-pts_2>Pregunta 3 (25 pts)<a class=headerlink href=#pregunta-3-25-pts_2 title="Permanent link">&para;</a></h4> <p>Â¿CÃ³mo validarÃ­as que una columna "email" tenga formato correcto con Pandera?</p> <details> <summary>âœ… Respuesta</summary> <div class=highlight><pre><span></span><code><a id=__codelineno-134-1 name=__codelineno-134-1 href=#__codelineno-134-1></a><span class=n>email</span><span class=p>:</span> <span class=n>Series</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=n>pa</span><span class=o>.</span><span class=n>Field</span><span class=p>(</span><span class=n>str_matches</span><span class=o>=</span><span class=sa>r</span><span class=s2>&quot;^[\w\.-]+@[\w\.-]+\.\w+$&quot;</span><span class=p>)</span>
</code></pre></div> </details> <h4 id=ejercicio-practico-25-pts_2>ğŸ”§ Ejercicio PrÃ¡ctico (25 pts)<a class=headerlink href=#ejercicio-practico-25-pts_2 title="Permanent link">&para;</a></h4> <p>Crea un schema Pandera <code>BankDataSchema</code> con <code>customer_id</code> (string Ãºnico), <code>credit_score</code> (int 300-850), <code>balance</code> (float â‰¥ 0), <code>is_active</code> (bool), modo strict.</p> <details> <summary>âœ… SoluciÃ³n</summary> <div class=highlight><pre><span></span><code><a id=__codelineno-135-1 name=__codelineno-135-1 href=#__codelineno-135-1></a><span class=kn>import</span><span class=w> </span><span class=nn>pandera</span><span class=w> </span><span class=k>as</span><span class=w> </span><span class=nn>pa</span>
<a id=__codelineno-135-2 name=__codelineno-135-2 href=#__codelineno-135-2></a><span class=kn>from</span><span class=w> </span><span class=nn>pandera.typing</span><span class=w> </span><span class=kn>import</span> <span class=n>Series</span>
<a id=__codelineno-135-3 name=__codelineno-135-3 href=#__codelineno-135-3></a>
<a id=__codelineno-135-4 name=__codelineno-135-4 href=#__codelineno-135-4></a><span class=k>class</span><span class=w> </span><span class=nc>BankDataSchema</span><span class=p>(</span><span class=n>pa</span><span class=o>.</span><span class=n>DataFrameModel</span><span class=p>):</span>
<a id=__codelineno-135-5 name=__codelineno-135-5 href=#__codelineno-135-5></a>    <span class=n>customer_id</span><span class=p>:</span> <span class=n>Series</span><span class=p>[</span><span class=nb>str</span><span class=p>]</span> <span class=o>=</span> <span class=n>pa</span><span class=o>.</span><span class=n>Field</span><span class=p>(</span><span class=n>unique</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
<a id=__codelineno-135-6 name=__codelineno-135-6 href=#__codelineno-135-6></a>    <span class=n>credit_score</span><span class=p>:</span> <span class=n>Series</span><span class=p>[</span><span class=nb>int</span><span class=p>]</span> <span class=o>=</span> <span class=n>pa</span><span class=o>.</span><span class=n>Field</span><span class=p>(</span><span class=n>ge</span><span class=o>=</span><span class=mi>300</span><span class=p>,</span> <span class=n>le</span><span class=o>=</span><span class=mi>850</span><span class=p>)</span>
<a id=__codelineno-135-7 name=__codelineno-135-7 href=#__codelineno-135-7></a>    <span class=n>balance</span><span class=p>:</span> <span class=n>Series</span><span class=p>[</span><span class=nb>float</span><span class=p>]</span> <span class=o>=</span> <span class=n>pa</span><span class=o>.</span><span class=n>Field</span><span class=p>(</span><span class=n>ge</span><span class=o>=</span><span class=mi>0</span><span class=p>)</span>
<a id=__codelineno-135-8 name=__codelineno-135-8 href=#__codelineno-135-8></a>    <span class=n>is_active</span><span class=p>:</span> <span class=n>Series</span><span class=p>[</span><span class=nb>bool</span><span class=p>]</span>
<a id=__codelineno-135-9 name=__codelineno-135-9 href=#__codelineno-135-9></a>
<a id=__codelineno-135-10 name=__codelineno-135-10 href=#__codelineno-135-10></a>    <span class=k>class</span><span class=w> </span><span class=nc>Config</span><span class=p>:</span>
<a id=__codelineno-135-11 name=__codelineno-135-11 href=#__codelineno-135-11></a>        <span class=n>strict</span> <span class=o>=</span> <span class=kc>True</span>
</code></pre></div> </details> <hr> <div align=center> **Siguiente mÃ³dulo** â†’ [02. DiseÃ±o de Sistemas ML](02_DISENO_SISTEMAS.md) --- [â† Volver al Ãndice](00_INDICE.md) </div> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Volver al principio </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2024 DuqueOM â€” GuÃ­a MLOps v2 </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/DuqueOM target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://linkedin.com/in/duqueom target=_blank rel=noopener title=linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}, "version": null}</script> <script src=../../assets/javascripts/bundle.79ae519e.min.js></script> </body> </html>